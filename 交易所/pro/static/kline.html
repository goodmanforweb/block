<html>
<head>
    <meta name="renderer" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=GBK">
    <meta name="baidu-sit指标参数设置e-verification" content="DwmS6mQC0u">
    <meta name="viewport" content="width=device-width, initial-scale=0.3, maximum-scale=1.0, user-scalable=yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="Expires" content="-1" />
    <link href="script/kline.css" rel="stylesheet" />
    <script src="script/jquery.min.js"></script>
    <script src="script/jquery.mousewheel.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/sockjs/1/sockjs.min.js"></script>
    <style type="text/css">
        a.kxiana {
            text-decoration: none;
        }
            a.kxiana:hover {
                text-decoration: underline !important;
            }
        #chart_canvasGroup:after {
            display: block;
            width: 100%;
            height: 100%;
            content: "";
            background: url("/statics/img/common/bg_klie.png") 50% 25% no-repeat;
            background-size: auto 22%;
            position: absolute;
            z-index: 1;
        }
    </style>
    <title>行情图</title>
</head>
<body style="height:100%;background-color: #fff">
    <div id="chart_container" class="dark" style="width: 1670px; height: 361px; visibility: visible;">
        <!-- Dom Element Cache -->
        <div id="chart_dom_elem_cache"></div>
        <!-- ToolBar -->
        <div id="chart_toolbar" style="left: 0px; top: 0px; width: 1670px; height: 29px;">
            <div class="chart_toolbar_minisep"> </div>
            <!-- Periods -->
            <div class="chart_dropdown" id="chart_toolbar_periods_vert">
                <div class="chart_dropdown_t"><a class="chart_str_period">周期</a></div>
                <!-- <div class="chart_dropdown_data" style="margin-left: -58px;">
                    <table>
                        <tbody>
                            <tr>
                                <td>
                                    <ul>
                                        <li id="chart_period_1w_v" name="1w"><a class="chart_str_period_1w">周线</a></li>
                                        <li id="chart_period_3d_v" name="3d"><a class="chart_str_period_3d">3日</a></li>
                                        <li id="chart_period_1d_v" name="1d"><a class="chart_str_period_1d">日线</a></li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <ul>
                                        <li id="chart_period_12h_v" name="12h"><a class="chart_str_period_12h">12小时</a></li>
                                        <li id="chart_period_6h_v" name="6h"><a class="chart_str_period_6h">6小时</a></li>
                                        <li id="chart_period_4h_v" name="4h"><a class="chart_str_period_4h">4小时</a></li>
                                        <li id="chart_period_2h_v" name="2h"><a class="chart_str_period_2h">2小时</a></li>
                                        <li id="chart_period_1h_v" name="1h"><a class="chart_str_period_1h">1小时</a></li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <ul>
                                        <li id="chart_period_30m_v" name="30m"> <a class="chart_str_period_30m">30分钟</a></li>
                                        <li id="chart_period_15m_v" name="15m"> <a class="chart_str_period_15m">15分钟</a></li>
                                        <li id="chart_period_5m_v" name="5m">  <a class="chart_str_period_5m">5分钟</a></li>
                                        <li id="chart_period_3m_v" name="3m">  <a class="chart_str_period_3m">3分钟</a></li>
                                        <li id="chart_period_1m_v" name="1m">  <a class="chart_str_period_1m selected">1分钟</a></li>
                                        <li id="chart_period_line_v" name="line"><a class="chart_str_period_line">分时</a></li>
                                    </ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div> -->
            </div><div id="chart_toolbar_periods_horz">
                <ul class="chart_toolbar_tabgroup" style="padding-left:5px; padding-right:11px;">
                    <!-- <li id="chart_period_1w_h" name="1w" style="display: inline-block;">  <a class="chart_str_period_1w">周线</a></li> -->
                    <!-- <li id="chart_period_3d_h" name="3d" style="display: none;">  <a class="chart_str_period_3d">3日</a></li> -->
                    <li id="chart_period_1d_h" data_name="day" name="1d" style="display: inline-block;">  <a class="chart_str_period_1d">1Day</a></li>
                    <!-- <li id="chart_period_12h_h" name="12h" style="display: none;"> <a class="chart_str_period_12h">12小时</a></li> -->
                    <!-- <li id="chart_period_6h_h" name="6h" style="display: none;">  <a class="chart_str_period_6h">6小时</a></li> -->
                    <!-- <li id="chart_period_4h_h" name="4h" style="display: none;">  <a class="chart_str_period_4h">4小时</a></li> -->
                    <!-- <li id="chart_period_2h_h" name="2h" style="display: none;">  <a class="chart_str_period_2h">2小时</a></li> -->
                    <li id="chart_period_1h_h" data_name="minute60" name="1h" style="display: inline-block;">  <a class="chart_str_period_1h">1H</a></li>
                    <li id="chart_period_30m_h" data_name="minute30" name="30m" style="display: inline-block;"> <a class="chart_str_period_30m">30M</a></li>
                    <li id="chart_period_15m_h" data_name="minute15" name="15m" style="display: inline-block;"> <a class="chart_str_period_15m">15M</a></li>
                    <li id="chart_period_5m_h" data_name="minute5" name="5m" style="display: inline-block;">  <a class="chart_str_period_5m">5M</a></li>
                    <!-- <li id="chart_period_3m_h" name="3m" style="display: none;">  <a class="chart_str_period_3m">3分钟</a></li> -->
                    <!-- <li id="chart_period_1m_h" name="1m" style="display: inline-block;">  <a class="chart_str_period_1m selected">1分钟</a></li> -->
                    <li id="chart_period_line_h" data_name="minute" name="line" style="display: inline-block;"><a class="chart_str_period_line">M</a></li>
                </ul>
            </div>
            <div id="chart_show_indicator" class="chart_toolbar_button chart_str_indicator_cap selected">技术指标</div><div id="chart_show_tools" class="chart_toolbar_button chart_str_tools_cap">画线工具</div><div id="chart_toolbar_theme" style="display: none">
                <div class="chart_toolbar_label chart_str_theme_cap">主题选择</div>
                <a name="dark" class="chart_icon chart_icon_theme_dark selected"></a>
                <a name="light" class="chart_icon chart_icon_theme_light"></a>
            </div><div class="chart_dropdown" id="chart_dropdown_settings">
                <div class="chart_dropdown_t"><a class="chart_str_settings">更多</a></div>
                <div class="chart_dropdown_data" style="margin-left: -142px;">
                    <table>
                        <tbody>
                            <tr id="chart_select_main_indicator">
                                <td class="chart_str_main_indicator">主指标</td>
                                <td>
                                    <ul>
                                        <li><a name="MA" class="selected">MA</a></li>
                                        <li><a name="EMA" class="">EMA</a></li>
                                        <li><a name="BOLL" class="">BOLL</a></li>
                                        <li><a name="SAR" class="">SAR</a></li>
                                        <li><a name="NONE" class="">None</a></li>
                                    </ul>
                                </td>
                            </tr>
                            <tr id="chart_select_chart_style">
                                <td class="chart_str_chart_style">主图样式</td>
                                <td>
                                    <ul>
                                        <li><a class="selected">CandleStick</a></li>
                                        <li><a>CandleStickHLC</a></li>
                                        <li><a class="">OHLC</a></li>
                                    </ul>
                                </td>
                            </tr>
                            <tr id="chart_select_theme" style="display: none;">
                                <td class="chart_str_theme">主题选择</td>
                                <td>
                                    <ul>
                                        <li><a name="dark" class="chart_icon chart_icon_theme_dark selected"></a></li>
                                        <li><a name="light" class="chart_icon chart_icon_theme_light"></a></li>
                                    </ul>
                                </td>
                            </tr>
                            <tr id="chart_enable_tools" style="display: none;">
                                <td class="chart_str_tools">画线工具</td>
                                <td>
                                    <ul>
                                        <li><a name="on" class="chart_str_on">开启</a></li>
                                        <li><a name="off" class="chart_str_off selected">关闭</a></li>
                                    </ul>
                                </td>
                            </tr>
                            <tr id="chart_enable_indicator" style="display: none;">
                                <td class="chart_str_indicator">技术指标</td>
                                <td>
                                    <ul>
                                        <li><a name="on" class="chart_str_on selected">开启</a></li>
                                        <li><a name="off" class="chart_str_off">关闭</a></li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <ul><li><a id="chart_btn_parameter_settings" class="chart_str_indicator_parameters">指标参数设置</a></li></ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- <div class="chart_dropdown" id="chart_language_setting_div" style="padding-left: 5px;">
                <div class="chart_dropdown_t">
                    <a class="chart_language_setting">语言(LANG)</a>
                </div>
                <div class="chart_dropdown_data" style="padding-top: 15px; margin-left: -12px;">
                    <ul>
                        <li style="height: 25px;"><a name="zh-cn" class="selected">简体中文(zh-CN)</a></li>
                        <li style="height: 25px;"><a name="en-us">English(en-US)</a></li>
                        <li style="height: 25px;"><a name="zh-tw">繁體中文(zh-HK)</a></li>
                    </ul>
                </div>
            </div> -->
            <div id="chart_updated_time">
                <!-- <span class="chart_str_updated">更新于</span>
                <span id="chart_updated_time_text">4秒</span>
                <span class="chart_str_ago">前</span> -->
            </div>
        </div>
        <!-- ToolPanel -->
        <div id="chart_toolpanel" style="display: none; left: 0px; top: 30px; width: 32px; height: 331px;">
            <div class="chart_toolpanel_separator"></div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_Cursor" name="Cursor"></div>
                <div class="chart_toolpanel_tip chart_str_cursor">光标</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_CrossCursor" name="CrossCursor"></div>
                <div class="chart_toolpanel_tip chart_str_cross_cursor">十字光标</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_SegLine" name="SegLine"></div>
                <div class="chart_toolpanel_tip chart_str_seg_line">线段</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_StraightLine" name="StraightLine"></div>
                <div class="chart_toolpanel_tip chart_str_straight_line">直线</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_RayLine" name="RayLine"></div>
                <div class="chart_toolpanel_tip chart_str_ray_line">射线</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_ArrowLine" name="ArrowLine"></div>
                <div class="chart_toolpanel_tip chart_str_arrow_line">箭头</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_HoriSegLine" name="HoriSegLine"></div>
                <div class="chart_toolpanel_tip chart_str_horz_seg_line">水平线段</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_HoriStraightLine" name="HoriStraightLine"></div>
                <div class="chart_toolpanel_tip chart_str_horz_straight_line">水平直线</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_HoriRayLine" name="HoriRayLine"></div>
                <div class="chart_toolpanel_tip chart_str_horz_ray_line">水平射线</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_VertiStraightLine" name="VertiStraightLine"></div>
                <div class="chart_toolpanel_tip chart_str_vert_straight_line">垂直直线</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_PriceLine" name="PriceLine"></div>
                <div class="chart_toolpanel_tip chart_str_price_line">价格线</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_TriParallelLine" name="TriParallelLine"></div>
                <div class="chart_toolpanel_tip chart_str_tri_parallel_line">价格通道线</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_BiParallelLine" name="BiParallelLine"></div>
                <div class="chart_toolpanel_tip chart_str_bi_parallel_line">平行直线</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_BiParallelRayLine" name="BiParallelRayLine"></div>
                <div class="chart_toolpanel_tip chart_str_bi_parallel_ray">平行射线</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_DrawFibRetrace" name="DrawFibRetrace"></div>
                <div class="chart_toolpanel_tip chart_str_fib_retrace">斐波纳契回调</div>
            </div>
            <div class="chart_toolpanel_button">
                <div class="chart_toolpanel_icon" id="chart_DrawFibFans" name="DrawFibFans"></div>
                <div class="chart_toolpanel_tip chart_str_fib_fans">斐波纳契扇形</div>
            </div>
            <div style="padding-left: 3px;padding-top: 10px;">
                <button style="color: red;" id="clearCanvas" title="Clear All">X</button>
            </div>
        </div>
        <!-- Canvas Group -->
        <div id="chart_canvasGroup" style="left: 0px; top: 30px; width: 1670px; height: 308px;" class="temp">
            <canvas class="chart_canvas" id="chart_mainCanvas" width="1670" height="308" style="cursor: default;"></canvas>
            <canvas class="chart_canvas" id="chart_overlayCanvas" width="1670" height="308" style="cursor: default;"></canvas>
        </div>
        <!-- TabBar -->
        <div id="chart_tabbar" style="display: block; position: relative; left: 0px; top: 338px; width: 1670px; height: 22px;">
            <ul>
                <li><a name="MACD" class="selected">MACD</a></li>
                <li><a name="KDJ" class="">KDJ</a></li>
                <li><a name="StochRSI" class="">StochRSI</a></li>
                <li><a name="RSI" class="">RSI</a></li>
                <li><a name="DMI" class="">DMI</a></li>
                <li><a name="OBV" class="">OBV</a></li>
                <li><a name="BOLL" class="">BOLL</a></li>
                <li><a name="SAR" class="">SAR</a></li>
                <li><a name="DMA" class="">DMA</a></li>
                <li><a name="TRIX" class="">TRIX</a></li>
                <li><a name="BRAR" class="">BRAR</a></li>
                <li><a name="VR" class="">VR</a></li>
                <li><a name="EMV" class="">EMV</a></li>
                <li><a name="WR" class="">WR</a></li>
                <li><a name="ROC" class="">ROC</a></li>
                <li><a name="MTM" class="">MTM</a></li>
                <li><a name="PSY">PSY</a></li>
            </ul>
        </div>
        <!-- Parameter Settings -->
        <div id="chart_parameter_settings" style="left: 515px; top: -64px;">
            <h2 class="chart_str_indicator_parameters">指标参数设置</h2>
            <table>
                <tbody>
                    <tr>
                        <th>MA</th>
                        <td><input name="MA"><input name="MA"><input name="MA"><input name="MA"><br><input name="MA"><input name="MA"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                        <th>DMA</th>
                        <td><input name="DMA"><input name="DMA"><input name="DMA"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                    </tr>
                    <tr>
                        <th>EMA</th>
                        <td><input name="EMA"><input name="EMA"><input name="EMA"><input name="EMA"><br><input name="EMA"><input name="EMA"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                        <th>TRIX</th>
                        <td><input name="TRIX"><input name="TRIX"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                    </tr>
                    <tr>
                        <th>VOLUME</th>
                        <td><input name="VOLUME"><input name="VOLUME"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                        <th>BRAR</th>
                        <td><input name="BRAR"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                    </tr>
                    <tr>
                        <th>MACD</th>
                        <td><input name="MACD"><input name="MACD"><input name="MACD"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                        <th>VR</th>
                        <td><input name="VR"><input name="VR"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                    </tr>
                    <tr>
                        <th>KDJ</th>
                        <td><input name="KDJ"><input name="KDJ"><input name="KDJ"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                        <th>EMV</th>
                        <td><input name="EMV"><input name="EMV"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                    </tr>
                    <tr>
                        <th>StochRSI</th>
                        <td><input name="StochRSI"><input name="StochRSI"><input name="StochRSI"><input name="StochRSI"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                        <th>WR</th>
                        <td><input name="WR"><input name="WR"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                    </tr>
                    <tr>
                        <th>RSI</th>
                        <td><input name="RSI"><input name="RSI"><input name="RSI"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                        <th>ROC</th>
                        <td><input name="ROC"><input name="ROC"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                    </tr>
                    <tr>
                        <th>DMI</th>
                        <td><input name="DMI"><input name="DMI"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                        <th>MTM</th>
                        <td><input name="MTM"><input name="MTM"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                    </tr>
                    <tr>
                        <th>OBV</th>
                        <td><input name="OBV"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                        <th>PSY</th>
                        <td><input name="PSY"><input name="PSY"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                    </tr>
                    <tr>
                        <th>BOLL</th>
                        <td><input name="BOLL"></td>
                        <td><button class="chart_str_default">默认值</button></td>
                    </tr>
                </tbody>
            </table>
            <div id="close_settings"><a class="chart_str_close">关闭</a></div>
        </div>
        <!-- Loading -->
        <div id="chart_loading" class="chart_str_loading" style="left: 735px; top: 78px;">正在读取数据...</div>
    </div>
    <input value="0" id="depArgs" type="hidden">
    <script src="script/kline.assistant.js"></script>   
    <script type="text/javascript">
        var timestcok = "minute";
        var stcoktype = GetQueryString('code');
        var stcoktabs = GetQueryString('tabs');
        var ScalingRatio = "",timedaojishi;
        if (getCookie("changeBg") == 'night') {
            setTimeout(function () {
                switch_theme("dark"); //设置图表背景为黑色      
            }, 10);
        }else {
             setTimeout(function () {
                switch_theme("light"); //设置图表背景为黑色      
            }, 10);
        }
        console.log(JSON.parse(getCookie("chartSettings")).theme);
        if(JSON.parse(getCookie("chartSettings"))){
            switch (JSON.parse(getCookie("chartSettings")).charts.period) {
                case "line":
                    timestcok = "minute";
                    ScalingRatio = 0;
                    break;
                case "5m":
                    timestcok = "minute5";
                    ScalingRatio = 4;
                    break;
                case "15m":
                    timestcok = "minute15";
                    ScalingRatio = 4;
                    break;
                case "30m":
                    timestcok = "minute30";
                    ScalingRatio = 4;
                    break;
                case "1h":
                    timestcok = "minute60";
                    ScalingRatio = 4;
                    break;
                case "1d":
                    timestcok = "day";
                    ScalingRatio = 4;
                    break;
                default:
                   
                    break;
            }
        }else {
             timestcok = "minute15";
             ScalingRatio = 4;
        }
        function getCookie(name){
            var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
            if(arr=document.cookie.match(reg))
                return unescape(arr[2]);
            else
                return null;
        }
        var biType = stcoktype;
        var theme = timestcok;
        var kline = new Kline();
        var typehtml = "kline.html?code="+stcoktype+"&tabs="+stcoktabs;
        var UrlKline = "http://www.zijunkj.com/app/KLine/history?type=2";
        var klineUrl = UrlKline;
        switch (timestcok) {
            case "minute":
                setInterval(function () {
                    var d = new Date();
                    GLOBAL_VAR.requestParam = setHttpRequestParam(biType, "line", null, 10000000
                        );
                    RequestData();
                },5000);
                break;
            case "minute5":
                setInterval(function () {
                    var d = new Date();
                    GLOBAL_VAR.requestParam = setHttpRequestParam(biType, "5min", null, 105000000000
                        );
                    RequestData();
                }, 200000);
                break;
            case "minute15":
                setInterval(function () {
                    var d = new Date();
                    GLOBAL_VAR.requestParam = setHttpRequestParam(biType, "15min", null, 150000000000
                        );
                    RequestData();
                }, 800000);
                break;
            case "minute30":
                setInterval(function () {
                    var d = new Date();
                    GLOBAL_VAR.requestParam = setHttpRequestParam(biType, "30min", null, 300000000000
                        );
                    RequestData();
                }, 1500000);
                break;
            case "minute60":
                setInterval(function () {
                    var d = new Date();
                    GLOBAL_VAR.requestParam = setHttpRequestParam(biType, "1hour", null, 600000000000
                        );
                    RequestData();
                }, 3000000);
                break;
            default:
                setInterval(function () {
                    var d = new Date();
                    GLOBAL_VAR.requestParam = setHttpRequestParam(biType, "line", null, 10000000
                        );
                    RequestData();
                }, 30000000);
                break;
        }
        function GetQueryString(name){
            var reg = new RegExp("(^|&|)" + name + "=([^&?]*)(&|$|)", "i");  
            var r = window.location.search.substr(1).match(reg);  //获取url中"?"符后的字符串并正则匹配
            var context = "";  
            if (r != null)  
                context = r[2];  
                reg = null;  
                r = null;  
                return context == null || context == "" || context == "undefined" ? "" : context;   
        }
    </script>
    <script src="script/kline.draw.js"></script>
</body>
</html>
