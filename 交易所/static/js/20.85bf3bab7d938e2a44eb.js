webpackJsonp([20],{fETG:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=i("spLH"),n=i("vtEc"),e={name:"transactionList",data:function(){return{page:{size:10,p:1,total:10},form:{total_num:"",total_price:"",type:"",tpwd:"",order_no:"",account:JSON.parse(sessionStorage.getItem("account"))},type:"sell",navBtnName:this.$t("french.transactionList[16]"),handleBtn:this.$t("french.transactionList[17]"),dialogTitle:this.$t("french.transactionList[18]"),priceLabel:this.$t("french.transactionList[19]"),countLabel:this.$t("french.transactionList[20]"),pricePlaceholder:this.$t("french.transactionList[21]"),countPlaceholder:this.$t("french.transactionList[22]"),isActive:0,dialogVisible:!1,tableData:[],dialogData:"",paymentData:[],priceData:{}}},created:function(){this.getListData()},methods:{pageChange:function(t){this.page.p=t,this.getListData()},getListData:function(){var t=this;Object(n.w)({type:this.type,p:this.page.p,size:this.page.size}).then(function(a){200==a.data.status&&(t.tableData=a.data.data.res,t.page.total=a.data.data.count)}),Object(n.m)().then(function(a){200==a.data.status&&(t.paymentData=a.data.data)}),Object(n.h)().then(function(a){200!=a.data.status||(t.priceData=a.data.data)})},changeValue:function(){var t=this;this.$public.throttle(function(){if(t.dialogVisible=!0){if(Number(t.form.total_price)>Number(t.dialogData.max_price))return t.$public.msg(t.$t("french.transactionList[23]")+t.dialogData.max_price+"CNY","error",t),t.form.total_price="",void(t.form.total_num="");if(Number(t.form.total_price)<Number(t.dialogData.min_price))return t.$public.msg(t.$t("french.transactionList[24]")+t.dialogData.min_price+"CNY","error",t),t.form.total_price="",void(t.form.total_num="");t.form.total_num>t.dialogData.trans_num&&(t.$public.msg(t.$t("french.transactionList[25]")+t.dialogData.trans_num+"USDT","error",t),t.form.total_num="",t.form.total_price="")}},2e3)},calculateCount:function(){var t=this.form.total_price/this.dialogData.price;this.form.total_num=Math.floor(100*t)/100},calculatePrice:function(){var t=this.form.total_num*this.dialogData.price;this.form.total_price=Math.floor(100*t)/100},handleTransaction:function(t){if(t.account!=sessionStorage.getItem("account")){if(!sessionStorage.account||!sessionStorage.token)return this.$public.msg(this.$t("french.transactionList[26]"),"error",this),void this.$router.push({name:"login"});if(this.form.total_num="",this.form.total_price="",this.form.tpwd="",this.dialogData=t,1==this.isActive){var a=[];if(1!=JSON.parse(sessionStorage.getItem("userInfo")).is_shop)return void this.$public.msg(this.$t("french.transactionList[27]"),"error",this);1==this.dialogData.pay_alipay&&a.push("alipay"),1==this.dialogData.pay_backcard&&a.push("backcard"),1==this.dialogData.pay_wx&&a.push("wx");for(var i=0;i<a.length;i++)for(var s=0;s<this.paymentData.length;s++)if(a[i]==this.paymentData[s].type)return void(this.dialogVisible=!0);this.dialogVisible||this.$public.msg(this.$t("french.transactionList[28]"),"error",this)}else this.dialogVisible=!0}else this.$public.msg(this.$t("french.transactionList[49]"),"error",this)},submitOrder:function(){var t=this;if(""!=this.form.total_price)if(""!=this.form.total_num){if(""!=this.form.tpwd)return this.$public.pwd(this.form.tpwd)?void this.$public.googleVerify().then(function(a){t.form.tpwd=t.$public.Cryptographiccapital(t.form.tpwd),t.form.order_no=t.dialogData.order_no,0==t.isActive?(t.form.type="1",Object(n.e)(t.form).then(function(a){200==a.data.status?(t.$router.push({name:"buyPage",query:{order_num:a.data.data.order_num}}),t.dialogVisible=!1):t.$public.msg(a.data.msg,"error",t)})):1==t.isActive&&(t.form.type="2",Object(n.e)(t.form).then(function(a){200==a.data.status?(t.$router.push({name:"sellPage",query:{order_num:a.data.data.order_num}}),t.dialogVisible=!1):t.$public.msg(a.data.msg,"error",t)}))}).catch(function(t){}):(this.$public.msg(this.$t("french.transactionList[32]"),"error",this),void(this.form.tpwd=""));this.$public.msg(this.$t("french.transactionList[31]"),"error",this)}else this.$public.msg(this.$t("french.transactionList[30]"),"error",this);else this.$public.msg(this.$t("french.transactionList[29]"),"error",this)},release:function(){if(sessionStorage.account&&sessionStorage.token){if(1!=JSON.parse(sessionStorage.getItem("userInfo")).is_shop)return void this.$public.msg(this.$t("french.transactionList[34]"),"error",this);0==this.isActive?this.$router.push({name:"releaseBuy"}):1==this.isActive&&this.$router.push({name:"releaseSell"})}else this.$public.msg(this.$t("french.transactionList[33]"),"error",this),this.$router.push({name:"login"})},handleBuy:function(){this.page.p=1,this.type="sell",this.getListData(),this.isActive=0,this.navBtnName=this.$t("french.transactionList[35]"),this.handleBtn=this.$t("french.transactionList[36]"),this.dialogTitle=this.$t("french.transactionList[37]"),this.priceLabel=this.$t("french.transactionList[38]"),this.countLabel=this.$t("french.transactionList[39]"),this.pricePlaceholder=this.$t("french.transactionList[40]"),this.countPlaceholder=this.$t("french.transactionList[41]")},handleSell:function(){this.page.p=1,this.type="pmma",this.getListData(),this.isActive=1,this.navBtnName=this.$t("french.transactionList[42]"),this.handleBtn=this.$t("french.transactionList[43]"),this.dialogTitle=this.$t("french.transactionList[44]"),this.priceLabel=this.$t("french.transactionList[45]"),this.countLabel=this.$t("french.transactionList[46]"),this.pricePlaceholder=this.$t("french.transactionList[47]"),this.countPlaceholder=this.$t("french.transactionList[48]")},closeDialog:function(){this.dialogVisible=!1}},watch:{"form.total_price":function(t,a){var i=String(t).split(".");isNaN(Number(t))&&(this.form.total_price=a),2==i.length&&i[1].length>2&&(this.form.total_price=a)},"form.total_num":function(t,a){var i=String(t).split(".");isNaN(Number(t))&&(this.form.total_num=a),2==i.length&&i[1].length>4&&(this.form.total_num=a)}},components:{pagination:s.a}},r={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"transaction-list"},[s("div",{staticClass:"transaction-c"},[s("ul",{staticClass:"transaction-nav clr"},[s("li",{staticClass:"nav-list",on:{click:t.handleBuy}},[s("p",{staticClass:"list-buy list-title",class:{active:0==t.isActive}},[t._v("\n                    "+t._s(t.$t("french.transactionList[0]"))+"\n                ")]),t._v(" "),s("p",{staticClass:"price"},[t._v("\n                    "+t._s(t.$t("french.transactionList[1]"))+t._s(t.priceData.price)+"CNY\n                ")])]),t._v(" "),s("span",{staticClass:"desc"}),t._v(" "),s("li",{staticClass:"nav-list",on:{click:t.handleSell}},[s("p",{staticClass:"list-sell list-title",class:{active:1==t.isActive}},[t._v("\n                   "+t._s(t.$t("french.transactionList[2]"))+"\n                ")]),t._v(" "),s("p",{staticClass:"price"},[t._v("\n                    "+t._s(t.$t("french.transactionList[3]"))+t._s(t.priceData.price)+"CNY\n                ")])]),t._v(" "),s("button",{staticClass:"transaction-btn btn",on:{click:t.release}},[t._v("\n                "+t._s(t.navBtnName)+"\n            ")])]),t._v(" "),[s("el-table",{staticStyle:{width:"100%","min-height":"600px"},attrs:{data:t.tableData,"header-cell-style":{"background-color":"#EBEFF3",height:"30px"}}},[s("el-table-column",{attrs:{label:t.$t("french.transactionList[3]"),width:"240",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("div",{staticClass:"avatar"},[s("span",{staticClass:"avatar-name"},[t._v("\n                                "+t._s(a.row.realname.substr(0,1))+"\n                            ")])]),t._v(" "),s("div",{staticClass:"avatar-detail"},[s("p",{staticClass:"name"},[t._v("\n                                "+t._s(a.row.realname)+"\n                            ")]),t._v(" "),s("p",{staticClass:"turnover-rate"},[s("span",{staticClass:"transaction-count"},[t._v("\n                                    "+t._s(t.$t("french.transactionList[5]"))+t._s(a.row.cd_num.substring(0,a.row.cd_num.length-2))+"\n                                ")]),t._v(" "),s("span",{staticClass:"transaction-rate"},[t._v("\n                                    "+t._s(t.$t("french.transactionList[6]"))+t._s(a.row.rate.substring(0,a.row.rate.length-2))+"%\n                                ")])])])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("french.transactionList[7]"),width:"130"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",[t._v("\n                            "+t._s(a.row.trans_num)+"\n                        ")]),t._v(" "),s("span",[t._v("\n                            USDT\n                        ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("french.transactionList[8]"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",[t._v("\n                            "+t._s(a.row.quota)+"\n                        ")]),t._v(" "),s("span",[t._v("\n                            CNY\n                        ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("french.transactionList[9]")},scopedSlots:t._u([{key:"default",fn:function(a){return[s("span",{staticStyle:{color:"#56c182"}},[t._v("\n                            "+t._s(a.row.price)+"\n                        ")]),t._v(" "),s("span",{staticStyle:{color:"#56c182"}},[t._v("\n                            CNY\n                        ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:t.$t("french.transactionList[10]"),align:"left"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.pay_backcard?s("span",{staticStyle:{display:"inline-block",width:"18px",height:"18px","border-radius":"50%",cursor:"pointer"}},[s("img",{staticStyle:{width:"100%"},attrs:{src:i("XjPw"),alt:""}})]):t._e(),t._v(" "),1==a.row.pay_wx?s("span",{staticStyle:{display:"inline-block",width:"18px",height:"18px","border-radius":"50%",cursor:"pointer"}},[s("img",{staticStyle:{width:"100%"},attrs:{src:i("eKwM"),alt:""}})]):t._e(),t._v(" "),1==a.row.pay_alipay?s("span",{staticStyle:{display:"inline-block",width:"18px",height:"18px","border-radius":"50%",cursor:"pointer"}},[s("img",{staticStyle:{width:"100%"},attrs:{src:i("CUkC"),alt:""}})]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"address",label:t.$t("french.transactionList[11]"),width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("button",{staticClass:"handle-btn btn",on:{click:function(i){return t.handleTransaction(a.row)}}},[t._v("\n                            "+t._s(t.handleBtn)+"\n                        ")])]}}])})],1),t._v(" "),s("pagination",{attrs:{page:t.page},on:{change:t.pageChange}})],t._v(" "),s("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(a){t.dialogVisible=a}}},[s("div",{staticClass:"dialog-c"},[s("div",{staticClass:"input-warp"},[s("span",{staticClass:"label"},[t._v("\n                        "+t._s(t.priceLabel)+"\n                    ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.total_price,expression:"form.total_price"}],staticClass:"dialog-input",attrs:{type:"text",placeholder:t.pricePlaceholder},domProps:{value:t.form.total_price},on:{blur:t.changeValue,input:[function(a){a.target.composing||t.$set(t.form,"total_price",a.target.value)},t.calculateCount]}}),t._v(" "),s("span",{staticClass:"unit"},[t._v("\n                        CNY\n                    ")])]),t._v(" "),s("div",{staticClass:"input-warp"},[s("span",{staticClass:"label"},[t._v("\n                        "+t._s(t.countLabel)+"\n                    ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.total_num,expression:"form.total_num"}],staticClass:"dialog-input",attrs:{type:"text",placeholder:t.countPlaceholder},domProps:{value:t.form.total_num},on:{blur:t.changeValue,input:[function(a){a.target.composing||t.$set(t.form,"total_num",a.target.value)},t.calculatePrice]}}),t._v(" "),s("span",{staticClass:"unit"},[t._v("\n                        USDT\n                    ")])]),t._v(" "),s("div",{staticClass:"input-warp"},[s("span",{staticClass:"label"},[t._v("\n                        "+t._s(t.$t("french.transactionList[12]"))+"\n                    ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tpwd,expression:"form.tpwd"}],staticClass:"dialog-input",attrs:{type:"password",placeholder:t.$t("french.transactionList[13]")},domProps:{value:t.form.tpwd},on:{input:function(a){a.target.composing||t.$set(t.form,"tpwd",a.target.value)}}})]),t._v(" "),s("div",{staticClass:"dialog-footer"},[s("button",{staticClass:"btn dialog-btn",on:{click:t.submitOrder}},[t._v("\n                        "+t._s(t.$t("french.transactionList[14]"))+"\n                    ")]),t._v(" "),s("button",{staticClass:"cancel-btn dialog-btn",on:{click:t.closeDialog}},[t._v("\n                        "+t._s(t.$t("french.transactionList[15]"))+"\n                    ")])])])])],2)])},staticRenderFns:[]};var o=i("VU/8")(e,r,!1,function(t){i("sS/B")},null,null);a.default=o.exports},"sS/B":function(t,a){}});
//# sourceMappingURL=20.85bf3bab7d938e2a44eb.js.map