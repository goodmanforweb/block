!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("jquery"));else if("function"==typeof define&&define.amd)define(["jquery"],e);else{var n="object"==typeof exports?e(require("jquery")):e(t.$);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}("undefined"!=typeof self?self:this,function(__WEBPACK_EXTERNAL_MODULE_23__){return function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=25)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartManager=void 0;var i=n(10),o=n(26),l=r(n(30)),a=r(n(22)),s=r(n(8)),h=r(n(2)),u=n(4),d=r(n(14)),c=r(n(6)),p=r(n(13)),f=r(n(12)),g=r(n(15)),_=n(5);function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=function(){function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this._dataSources={},this._dataSourceCache={},this._dataProviders={},this._frames={},this._areas={},this._timelines={},this._ranges={},this._plotters={},this._themes={},this._titles={},this._frameMousePos={},this._dsChartStyle={},this._dragStarted=!1,this._oldX=0,this._fakeIndicators={},this._captureMouseWheelDirectly=!0,this._chart={},this._chart.defaultFrame=new o.Chart,this._drawingTool=r.DrawingTool.CrossCursor,this._beforeDrawingTool=this._drawingTool,this._language="zh-cn",this._mainCanvas=null,this._overlayCanvas=null,this._mainContext=null,this._overlayContext=null,r.created||(r.instance=this,r.created=!0),r.instance}var t,e,n;return t=r,(e=[{key:"redraw",value:function(t,e){(void 0===t||e)&&(t="All"),"All"!==t&&"MainCanvas"!==t||(e&&this.getFrame("frame0").setChanged(!0),this.layout(this._mainContext,"frame0",0,0,this._mainCanvas.width,this._mainCanvas.height),this.drawMain("frame0",this._mainContext)),"All"!==t&&"OverlayCanvas"!==t||(this._overlayContext.clearRect(0,0,this._overlayCanvas.width,this._overlayCanvas.height),this.drawOverlay("frame0",this._overlayContext))}},{key:"bindCanvas",value:function(t,e){"main"===t?(this._mainCanvas=e,this._mainContext=e.getContext("2d")):"overlay"===t&&(this._overlayCanvas=e,this._overlayContext=e.getContext("2d"),this._captureMouseWheelDirectly&&$(this._overlayCanvas).bind("mousewheel",i.Control.mouseWheel))}},{key:"getCaptureMouseWheelDirectly",value:function(){return this._captureMouseWheelDirectly}},{key:"setCaptureMouseWheelDirectly",value:function(t){(this._captureMouseWheelDirectly=t)?$(this._overlayCanvas).bind("mousewheel",i.Control.mouseWheel):$(this._overlayCanvas).unbind("mousewheel")}},{key:"getChart",value:function(t){return this._chart.defaultFrame}},{key:"init",value:function(){delete this._ranges["frame0.k0.indic1"],delete this._ranges["frame0.k0.indic1Range"],delete this._areas["frame0.k0.indic1"],delete this._areas["frame0.k0.indic1Range"],s.DefaultTemplate.loadTemplate("frame0.k0",""),this.redraw("All",!0)}},{key:"setCurrentDrawingTool",value:function(t){this._drawingTool=r.DrawingTool[t],this.setRunningMode(this._drawingTool)}},{key:"getLanguage",value:function(){return this._language}},{key:"setLanguage",value:function(t){this._language=t}},{key:"setThemeName",value:function(t,e){var n;switch(void 0===e&&(e="Dark"),e){case"Light":n=new c.LightTheme;break;default:e="Dark",n=new c.DarkTheme}this._themeName=e,this.setTheme(t,n),this.getFrame(t).setChanged(!0)}},{key:"getChartStyle",value:function(t){var e=this._dsChartStyle[t];return void 0===e?"CandleStick":e}},{key:"setChartStyle",value:function(t,e){if(this._dsChartStyle[t]!==e){var n,r,i=t+".main",o=i+".main",a=i+".main";switch(e){case"CandleStick":case"CandleStickHLC":case"OHLC":switch(void 0!==(n=this.getDataProvider(o))&&_.Util.isInstance(n,d.MainDataProvider)||(n=new d.MainDataProvider(o),this.setDataProvider(o,n),n.updateData()),this.setMainIndicator(t,u.ChartSettings.get().charts.mIndic),e){case"CandleStick":r=new p.CandlestickPlotter(a);break;case"CandleStickHLC":r=new p.CandlestickHLCPlotter(a);break;case"OHLC":r=new p.OHLCPlotter(a)}this.setPlotter(a,r),r=new p.MinMaxPlotter(i+".decoration"),this.setPlotter(r.getName(),r);break;case"Line":n=new d.IndicatorDataProvider(o),this.setDataProvider(n.getName(),n),n.setIndicator(new l.HLCIndicator),this.removeMainIndicator(t),r=new p.IndicatorPlotter(a),this.setPlotter(a,r),this.removePlotter(i+".decoration")}this.getArea(r.getAreaName()).setChanged(!0),this._dsChartStyle[t]=e}}},{key:"setNormalMode",value:function(){this._drawingTool=this._beforeDrawingTool,$(".chart_dropdown_data").removeClass("chart_dropdown-hover"),$("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),$("#chart_CrossCursor").parent().addClass("selected"),this._drawingTool===r.DrawingTool.Cursor?(this.showCursor(),$("#mode a").removeClass("selected"),$("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),$("#chart_Cursor").parent().addClass("selected")):this.hideCursor()}},{key:"setRunningMode",value:function(t){var e=this.getDataSource("frame0.k0"),n=e.getCurrentToolObject();if(null!==n&&n.state!==f.CToolObject.state.AfterDraw&&e.delToolObject(),10<e.getToolObjectCount())this.setNormalMode();else switch((this._drawingTool=t)===r.DrawingTool.Cursor&&this.showCursor(),t){case r.DrawingTool.Cursor:this._beforeDrawingTool=t;break;case r.DrawingTool.ArrowLine:e.addToolObject(new f.CArrowLineObject("frame0.k0"));break;case r.DrawingTool.BandLine:e.addToolObject(new f.CBandLineObject("frame0.k0"));break;case r.DrawingTool.BiParallelLine:e.addToolObject(new f.CBiParallelLineObject("frame0.k0"));break;case r.DrawingTool.BiParallelRayLine:e.addToolObject(new f.CBiParallelRayLineObject("frame0.k0"));break;case r.DrawingTool.CrossCursor:this._beforeDrawingTool=t;break;case r.DrawingTool.DrawFibFans:e.addToolObject(new f.CFibFansObject("frame0.k0"));break;case r.DrawingTool.DrawFibRetrace:e.addToolObject(new f.CFibRetraceObject("frame0.k0"));break;case r.DrawingTool.DrawLines:e.addToolObject(new f.CStraightLineObject("frame0.k0"));break;case r.DrawingTool.HoriRayLine:e.addToolObject(new f.CHoriRayLineObject("frame0.k0"));break;case r.DrawingTool.HoriSegLine:e.addToolObject(new f.CHoriSegLineObject("frame0.k0"));break;case r.DrawingTool.HoriStraightLine:e.addToolObject(new f.CHoriStraightLineObject("frame0.k0"));break;case r.DrawingTool.PriceLine:e.addToolObject(new f.CPriceLineObject("frame0.k0"));break;case r.DrawingTool.RayLine:e.addToolObject(new f.CRayLineObject("frame0.k0"));break;case r.DrawingTool.SegLine:e.addToolObject(new f.CSegLineObject("frame0.k0"));break;case r.DrawingTool.StraightLine:e.addToolObject(new f.CStraightLineObject("frame0.k0"));break;case r.DrawingTool.TriParallelLine:e.addToolObject(new f.CTriParallelLineObject("frame0.k0"));break;case r.DrawingTool.VertiStraightLine:e.addToolObject(new f.CVertiStraightLineObject("frame0.k0"))}}},{key:"getTitle",value:function(t){return this._titles[t]}},{key:"setTitle",value:function(t,e){this._titles[t]=e}},{key:"setCurrentDataSource",value:function(t,e){var n=this.getCachedDataSource(e);null!=n?this.setDataSource(t,n,!0):(n=new h.MainDataSource(e),this.setDataSource(t,n,!0),this.setCachedDataSource(e,n))}},{key:"getDataSource",value:function(t){return this._dataSources[t]}},{key:"setDataSource",value:function(t,e,n){this._dataSources[t]=e,n&&this.updateData(t,null)}},{key:"getCachedDataSource",value:function(t){return this._dataSourceCache[t]}},{key:"setCachedDataSource",value:function(t,e){this._dataSourceCache[t]=e}},{key:"getDataProvider",value:function(t){return this._dataProviders[t]}},{key:"setDataProvider",value:function(t,e){this._dataProviders[t]=e}},{key:"removeDataProvider",value:function(t){delete this._dataProviders[t]}},{key:"getFrame",value:function(t){return this._frames[t]}},{key:"setFrame",value:function(t,e){this._frames[t]=e}},{key:"removeFrame",value:function(t){delete this._frames[t]}},{key:"getArea",value:function(t){return this._areas[t]}},{key:"setArea",value:function(t,e){this._areas[t]=e}},{key:"removeArea",value:function(t){delete this._areas[t]}},{key:"getTimeline",value:function(t){return this._timelines[t]}},{key:"setTimeline",value:function(t,e){this._timelines[t]=e}},{key:"removeTimeline",value:function(t){delete this._timelines[t]}},{key:"getRange",value:function(t){return this._ranges[t]}},{key:"setRange",value:function(t,e){this._ranges[t]=e}},{key:"removeRange",value:function(t){delete this._ranges[t]}},{key:"getPlotter",value:function(t){return this._plotters[t]}},{key:"setPlotter",value:function(t,e){this._plotters[t]=e}},{key:"removePlotter",value:function(t){delete this._plotters[t]}},{key:"getTheme",value:function(t){return this._themes[t]}},{key:"setTheme",value:function(t,e){this._themes[t]=e}},{key:"getFrameMousePos",value:function(t,e){void 0!==this._frameMousePos[t]?(e.x=this._frameMousePos[t].x,e.y=this._frameMousePos[t].y):(e.x=-1,e.y=-1)}},{key:"setFrameMousePos",value:function(t,e,n){this._frameMousePos[t]={x:e,y:n}}},{key:"drawArea",value:function(t,e,n){var r=e.getNameObject().getCompAt(2);if("timeline"===r){if(e.getHeight()<20)return}else if(e.getHeight()<30)return;if(!(e.getWidth()<30)){var i;r=e.getName();var o,a=n.length;for(o=0;o<a;o++)void 0!==(i=this._plotters[r+n[o]])&&i.Draw(t)}}},{key:"drawAreaMain",value:function(t,e){var n;n=this._dataSources[e.getDataSourceName()].getDataCount()<1?[".background"]:[".background",".grid",".main",".secondary"],this.drawArea(t,e,n),e.setChanged(!1)}},{key:"drawAreaOverlay",value:function(t,e){var n;n=this._dataSources[e.getDataSourceName()].getDataCount()<1?[".selection"]:[".decoration",".selection",".info",".tool"],this.drawArea(t,e,n)}},{key:"drawMain",value:function(t,e){var n;for(var r in this._areas)this._areas[r].getFrameName()!==t||_.Util.isInstance(this._areas[r],g.ChartAreaGroup)||this.drawAreaMain(e,this._areas[r]);for(var i in this._timelines)(n=this._timelines[i]).getFrameName()===t&&n.setUpdated(!1);for(var o in this._ranges)(n=this._ranges[o]).getFrameName()===t&&n.setUpdated(!1);for(var a in this._areas)(n=this._areas[a]).getFrameName()===t&&n.setChanged(!1)}},{key:"drawOverlay",value:function(t,e){for(var n in this._areas){var r=this._areas[n];_.Util.isInstance(r,g.ChartAreaGroup)&&r.getFrameName()===t&&r.drawGrid(e)}for(var i in this._areas){var o=this._areas[i];!1===_.Util.isInstance(o,g.ChartAreaGroup)&&o.getFrameName()===t&&this.drawAreaOverlay(e,o)}}},{key:"updateData",value:function(t,e){var n=this.getDataSource(t);if(null!=n){if(null!=e){if(!n.update(e))return!1;if(n.getUpdateMode()===h.DataSource.UpdateMode.DoNothing)return!0}else n.setUpdateMode(h.DataSource.UpdateMode.Refresh);var r=this.getTimeline(t);if(null!=r&&r.update(),n.getDataCount()<1)return!0;var i,o,a=[".main",".secondary"];for(var s in this._areas)if(i=this._areas[s],!_.Util.isInstance(i,g.ChartAreaGroup)&&i.getDataSourceName()===t){o=i.getName();for(var u=0;u<a.length;u++){var c=this.getDataProvider(o+a[u]);null!=c&&c.updateData()}}return!0}}},{key:"updateRange",value:function(t){if(!(this.getDataSource(t).getDataCount()<1)){var e,n,r=[".main",".secondary"];for(var i in this._areas)if(e=this._areas[i],!_.Util.isInstance(e,g.ChartAreaGroup)&&e.getDataSourceName()===t){n=e.getName();for(var o=0;o<r.length;o++){var a=this.getDataProvider(n+r[o]);null!=a&&a.updateRange()}var s=this.getTimeline(t);if(void 0!==s&&0<s.getMaxItemCount()){var u=this.getRange(n);null!=u&&u.update()}}}}},{key:"layout",value:function(t,e,n,r,i,o){var a=this.getFrame(e);for(var s in a.measure(t,i-n,o-r),a.layout(n,r,i,o),this._timelines){var u=this._timelines[s];u.getFrameName()===e&&u.onLayout()}for(var c in this._dataSources)c.substring(0,e.length)===e&&this.updateRange(c)}},{key:"SelectRange",value:function(t,e){for(var n in this._ranges){this._ranges[n].getAreaName()===t.getName()?this._ranges[n].selectAt(e):this._ranges[n].unselect()}}},{key:"scale",value:function(t){if(null!==this._highlightedFrame){var e=this._highlightedFrame.getHighlightedArea();if(void 0!==this.getRange(e.getName())){var n=e.getDataSourceName(),r=this.getTimeline(n);null!==r&&(r.scale(t),this.updateRange(n))}}}},{key:"showCursor",value:function(t){void 0===t&&(t="default"),this._mainCanvas.style.cursor=t,this._overlayCanvas.style.cursor=t}},{key:"hideCursor",value:function(){this._mainCanvas.style.cursor="none",this._overlayCanvas.style.cursor="none"}},{key:"showCrossCursor",value:function(t,e,n){var r=this.getRange(t.getName());return!(void 0===r||(r.selectAt(n),void 0===(r=this.getTimeline(t.getDataSourceName()))||!r.selectAt(e)))}},{key:"hideCrossCursor",value:function(t){if(null!=t)for(var e in this._timelines){var n=this._timelines[e];n!==t&&n.unselect()}else for(var r in this._timelines)this._timelines[r].unselect();for(var i in this._ranges)this._ranges[i].unselect()}},{key:"clearHighlight",value:function(){null!==this._highlightedFrame&&void 0!==this._highlightedFrame&&(this._highlightedFrame.highlight(null),this._highlightedFrame=null)}},{key:"onToolMouseMove",value:function(t,e,n){var r=!1;for(var i in t+=".",this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.Util.isInstance(o,h.MainDataSource)&&o.toolManager.acceptMouseMoveEvent(e,n)&&(r=!0)}return r}},{key:"onToolMouseDown",value:function(t,e,n){var r=!1;for(var i in t+=".",this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.Util.isInstance(o,h.MainDataSource)&&o.toolManager.acceptMouseDownEvent(e,n)&&(r=!0)}return r}},{key:"onToolMouseUp",value:function(t,e,n){var r=!1;for(var i in t+=".",this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.Util.isInstance(o,h.MainDataSource)&&o.toolManager.acceptMouseUpEvent(e,n)&&(r=!0)}return r}},{key:"onToolMouseDrag",value:function(t,e,n){var r=!1;for(var i in t+=".",this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.Util.isInstance(o,h.MainDataSource)&&o.toolManager.acceptMouseDownMoveEvent(e,n)&&(r=!0)}return r}},{key:"onMouseMove",value:function(t,e,n,r){var i=this.getFrame(t);if(void 0!==i)if(this.setFrameMousePos(t,e,n),this.hideCrossCursor(),this._highlightedFrame!==i&&this.clearHighlight(),null===this._capturingMouseArea||void 0===this._capturingMouseArea){var o,a,s=i.contains(e,n);if(null!==s)for(a=s.length-1;0<=a;a--)if(null!==(o=(o=s[a]).onMouseMove(e,n)))return void(_.Util.isInstance(o,g.ChartAreaGroup)||(i.highlight(o),this._highlightedFrame=i))}else this._capturingMouseArea.onMouseMove(e,n)}},{key:"onMouseLeave",value:function(t,e,n,r){void 0!==this.getFrame(t)&&(this.setFrameMousePos(t,e,n),this.hideCrossCursor(),this.clearHighlight(),null!==this._capturingMouseArea&&void 0!==this._capturingMouseArea&&(this._capturingMouseArea.onMouseLeave(e,n),this._capturingMouseArea=null),this._dragStarted=!1)}},{key:"onMouseDown",value:function(t,e,n){var r=this.getFrame(t);if(void 0!==r){var i,o,a=r.contains(e,n);if(null!==a)for(o=a.length-1;0<=o;o--)if(null!==(i=(i=a[o]).onMouseDown(e,n)))return void(this._capturingMouseArea=i)}}},{key:"onMouseUp",value:function(t,e,n){var r=this.getFrame(t);void 0!==r&&this._capturingMouseArea&&(null===this._capturingMouseArea.onMouseUp(e,n)&&!1===this._dragStarted&&(null!==this._selectedFrame&&void 0!==this._selectedFrame&&this._selectedFrame!==r&&this._selectedFrame.select(null),this._capturingMouseArea.isSelected()?(this._captureMouseWheelDirectly||$(this._overlayCanvas).unbind("mousewheel"),r.select(null),this._selectedFrame=null):(this._selectedFrame!==r&&(this._captureMouseWheelDirectly||$(this._overlayCanvas).bind("mousewheel",i.Control.mouseWheel)),r.select(this._capturingMouseArea),this._selectedFrame=r)),this._capturingMouseArea=null,this._dragStarted=!1)}},{key:"deleteToolObject",value:function(){var t=this.getDataSource("frame0.k0");null!==t.getSelectToolObjcet()&&t.delSelectToolObject();var e=t.getCurrentToolObject();null!==e&&e.getState()!==f.CToolObject.state.AfterDraw&&t.delToolObject(),this.setNormalMode()}},{key:"unloadTemplate",value:function(t){if(void 0!==this.getFrame(t)){for(var e in this._dataSources)e.match(t+".")&&delete this._dataSources[e];for(var n in this._dataProviders)this._dataProviders[n].getFrameName()===t&&delete this._dataProviders[n];for(var r in delete this._frames[t],this._areas)this._areas[r].getFrameName()===t&&delete this._areas[r];for(var i in this._timelines)this._timelines[i].getFrameName()===t&&delete this._timelines[i];for(var o in this._ranges)this._ranges[o].getFrameName()===t&&delete this._ranges[o];for(var a in this._plotters)this._plotters[a].getFrameName()===t&&delete this._plotters[a];delete this._themes[t],delete this._frameMousePos[t]}}},{key:"createIndicatorAndRange",value:function(t,e,n){var r,i;switch(e){case"MA":r=new l.MAIndicator,i=new a.PositiveRange(t);break;case"EMA":r=new l.EMAIndicator,i=new a.PositiveRange(t);break;case"VOLUME":r=new l.VOLUMEIndicator,i=new a.ZeroBasedPositiveRange(t);break;case"MACD":r=new l.MACDIndicator,i=new a.ZeroCenteredRange(t);break;case"DMI":r=new l.DMIIndicator,i=new a.PercentageRange(t);break;case"DMA":r=new l.DMAIndicator,i=new a.Range(t);break;case"TRIX":r=new l.TRIXIndicator,i=new a.Range(t);break;case"BRAR":r=new l.BRARIndicator,i=new a.Range(t);break;case"VR":r=new l.VRIndicator,i=new a.Range(t);break;case"OBV":r=new l.OBVIndicator,i=new a.Range(t);break;case"EMV":r=new l.EMVIndicator,i=new a.Range(t);break;case"RSI":r=new l.RSIIndicator,i=new a.PercentageRange(t);break;case"WR":r=new l.WRIndicator,i=new a.PercentageRange(t);break;case"SAR":r=new l.SARIndicator,i=new a.PositiveRange(t);break;case"KDJ":r=new l.KDJIndicator,i=new a.PercentageRange(t);break;case"ROC":r=new l.ROCIndicator,i=new a.Range(t);break;case"MTM":r=new l.MTMIndicator,i=new a.Range(t);break;case"BOLL":r=new l.BOLLIndicator,i=new a.Range(t);break;case"PSY":r=new l.PSYIndicator,i=new a.Range(t);break;case"StochRSI":r=new l.STOCHRSIIndicator,i=new a.PercentageRange(t);break;default:return null}return n||r.setParameters(u.ChartSettings.get().indics[e]),{indic:r,range:i}}},{key:"setMainIndicator",value:function(t,e){var n,r=t+".main",i=this.getDataProvider(r+".main");if(void 0===i||!_.Util.isInstance(i,d.MainDataProvider))return!1;switch(e){case"MA":n=new l.MAIndicator;break;case"EMA":n=new l.EMAIndicator;break;case"BOLL":n=new l.BOLLIndicator;break;case"SAR":n=new l.SARIndicator;break;default:return!1}n.setParameters(u.ChartSettings.get().indics[e]);var o=r+".secondary",a=this.getDataProvider(o);void 0===a&&(a=new d.IndicatorDataProvider(o),this.setDataProvider(a.getName(),a)),a.setIndicator(n);var s=this.getPlotter(o);return void 0===s&&(s=new p.IndicatorPlotter(o),this.setPlotter(s.getName(),s)),this.getArea(r).setChanged(!0),!0}},{key:"setIndicator",value:function(t,e){var n=this.getArea(t);if(null==n||"main"===n.getNameObject().getCompAt(2))return!1;var r=this.getDataProvider(t+".secondary");if(null==r||!_.Util.isInstance(r,d.IndicatorDataProvider))return!1;var i=this.createIndicatorAndRange(t,e);if(null==i)return!1;var o=i.indic,a=i.range;if(this.removeDataProvider(t+".main"),this.removePlotter(t+".main"),this.removeRange(t),this.removePlotter(t+"Range.decoration"),r.setIndicator(o),this.setRange(t,a),a.setPaddingTop(20),a.setPaddingBottom(4),a.setMinInterval(20),_.Util.isInstance(o,l.VOLUMEIndicator)){var s=new p.LastVolumePlotter(t+"Range.decoration");this.setPlotter(s.getName(),s)}else if(_.Util.isInstance(o,l.BOLLIndicator)||_.Util.isInstance(o,l.SARIndicator)){var u=new d.MainDataProvider(t+".main");this.setDataProvider(u.getName(),u),u.updateData();var c=new p.OHLCPlotter(t+".main");this.setPlotter(c.getName(),c)}return!0}},{key:"removeMainIndicator",value:function(t){var e=t+".main",n=e+".secondary",r=this.getDataProvider(n);void 0!==r&&_.Util.isInstance(r,d.IndicatorDataProvider)&&(this.removeDataProvider(n),this.removePlotter(n),this.getArea(e).setChanged(!0))}},{key:"removeIndicator",value:function(t){var e=this.getArea(t);if(void 0!==e&&"main"!==e.getNameObject().getCompAt(2)){var n=this.getDataProvider(t+".secondary");if(void 0!==n&&_.Util.isInstance(n,d.IndicatorDataProvider)){var r=t+"Range",i=this.getArea(r);if(void 0!==i){var o=this.getArea(e.getDataSourceName()+".charts");if(void 0!==o){for(var a in o.removeArea(e),this.removeArea(t),o.removeArea(i),this.removeArea(r),this._dataProviders)this._dataProviders[a].getAreaName()===t&&this.removeDataProvider(a);for(var s in this._ranges)this._ranges[s].getAreaName()===t&&this.removeRange(s);for(var u in this._plotters)this._plotters[u].getAreaName()===t&&this.removePlotter(u);for(var c in this._plotters)this._plotters[c].getAreaName()===r&&this.removePlotter(c)}}}}}},{key:"getIndicatorParameters",value:function(t){var e=this._fakeIndicators[t];if(void 0===e){var n=this.createIndicatorAndRange("",t);if(null===n)return null;this._fakeIndicators[t]=e=n.indic}var r,i=[],o=e.getParameterCount();for(r=0;r<o;r++)i.push(e.getParameterAt(r));return i}},{key:"setIndicatorParameters",value:function(t,e){var n,r;for(n in this._dataProviders){var i=this._dataProviders[n];!1!==_.Util.isInstance(i,d.IndicatorDataProvider)&&((r=i.getIndicator()).getName()===t&&(r.setParameters(e),i.refresh(),this.getArea(i.getAreaName()).setChanged(!0)))}if(void 0===(r=this._fakeIndicators[t])){var o=this.createIndicatorAndRange("",t,!0);if(null===o)return;this._fakeIndicators[t]=r=o.indic}r.setParameters(e)}},{key:"getIndicatorAreaName",value:function(t,e){var n=this.getArea(t+".charts"),r=n.getAreaCount()>>1;return e<0||r<=e?"":n.getAreaAt(e<<1).getName()}}])&&v(t.prototype,e),n&&v(t,n),r}();(e.ChartManager=m).DrawingTool={Cursor:0,CrossCursor:1,DrawLines:2,DrawFibRetrace:3,DrawFibFans:4,SegLine:5,StraightLine:6,ArrowLine:7,RayLine:8,HoriStraightLine:9,HoriRayLine:10,HoriSegLine:11,VertiStraightLine:12,PriceLine:13,BiParallelLine:14,BiParallelRayLine:15,TriParallelLine:16,BandLine:17},m.created=!1,m.instance=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NamedObject=void 0;var i=n(19);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._nameObj=new i.CName(t)}var t,n,r;return t=e,(n=[{key:"getFrameName",value:function(){return this._nameObj.getName(0)}},{key:"getDataSourceName",value:function(){return this._nameObj.getName(1)}},{key:"getAreaName",value:function(){return this._nameObj.getName(2)}},{key:"getName",value:function(){return this._nameObj.getName(-1)}},{key:"getNameObject",value:function(){return this._nameObj}},{key:"getRectCrossPt",value:function(t,e,n){var r={x:-1,y:-1},i={x:-1,y:-1},o=n.x-e.x,a=n.y-e.y;if(Math.abs(o)<2)return[r={x:e.x,y:t.top},i={x:n.x,y:t.bottom}];var s=a/o;return i.x=t.right,i.y=e.y+(t.right-e.x)*s,r.x=t.left,r.y=e.y+(t.left-e.x)*s,[r,i]}}])&&o(t.prototype,n),r&&o(t,r),e}();e.NamedObject=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainDataSource=e.DataSource=void 0;var r,i=n(1),o=n(27),d=(r=n(3))&&r.__esModule?r:{default:r};function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){function e(t){return s(this,e),l(this,h(e).call(this,t))}return p(e,i.NamedObject),c(e,[{key:"getUpdateMode",value:function(){return this._updateMode}},{key:"setUpdateMode",value:function(t){this._updateMode=t}},{key:"getCacheSize",value:function(){return 0}},{key:"getDataCount",value:function(){return 0}},{key:"getDataAt",value:function(t){return this._dataItems[t]}}]),e}();(e.DataSource=g).UpdateMode={DoNothing:0,Refresh:1,Update:2,Append:3};var _=function(t){function n(t){var e;return s(this,n),(e=l(this,h(n).call(this,t)))._erasedCount=0,e._dataItems=[],e._decimalDigits=0,e.toolManager=new o.CToolManager(t),e}return p(n,g),c(n,[{key:"getCacheSize",value:function(){return this._dataItems.length}},{key:"getDataCount",value:function(){return this._dataItems.length}},{key:"getUpdatedCount",value:function(){return this._updatedCount}},{key:"getAppendedCount",value:function(){return this._appendedCount}},{key:"getErasedCount",value:function(){return this._erasedCount}},{key:"getDecimalDigits",value:function(){return this._decimalDigits}},{key:"calcDecimalDigits",value:function(t){var e=""+t,n=e.indexOf(".");return n<0?0:e.length-1-n}},{key:"getLastDate",value:function(){var t=this.getDataCount();return t<1?-1:this.getDataAt(t-1).date}},{key:"getDataAt",value:function(t){return this._dataItems[t]}},{key:"update",value:function(t){this._updatedCount=0,this._appendedCount=0,this._erasedCount=0;var e=this._dataItems.length;if(0<e){var n,r,i=e-1,o=this._dataItems[i],a=t.length;for(r=0;r<a;r++)if((n=t[r])[0]===o.date){if(o.open===n[1]&&o.high===n[2]&&o.low===n[3]&&o.close===n[4]&&o.volume===n[5]?this.setUpdateMode(g.UpdateMode.DoNothing):(this.setUpdateMode(g.UpdateMode.Update),this._dataItems[i]={date:n[0],open:n[1],high:n[2],low:n[3],close:n[4],volume:n[5]},this._updatedCount++),++r<a)for(this.setUpdateMode(g.UpdateMode.Append);r<a;r++,this._appendedCount++)n=t[r],this._dataItems.push({date:n[0],open:n[1],high:n[2],low:n[3],close:n[4],volume:n[5]});return!0}if(a<d.default.instance.limit)return this.setUpdateMode(g.UpdateMode.DoNothing),!1}this.setUpdateMode(g.UpdateMode.Refresh),this._dataItems=[];var s,u,c,l,h=t.length;for(l=0;l<h;l++){for(c=t[l],u=1;u<=4;u++)s=this.calcDecimalDigits(c[u]),this._decimalDigits<s&&(this._decimalDigits=s);this._dataItems.push({date:c[0],open:c[1],high:c[2],low:c[3],close:c[4],volume:c[5]})}return!0}},{key:"select",value:function(t){this.toolManager.selecedObject=t}},{key:"unselect",value:function(){this.toolManager.selecedObject=-1}},{key:"addToolObject",value:function(t){this.toolManager.addToolObject(t)}},{key:"delToolObject",value:function(){this.toolManager.delCurrentObject()}},{key:"getToolObject",value:function(t){return this.toolManager.getToolObject(t)}},{key:"getToolObjectCount",value:function(){return this.toolManager.toolObjects.length}},{key:"getCurrentToolObject",value:function(){return this.toolManager.getCurrentObject()}},{key:"getSelectToolObjcet",value:function(){return this.toolManager.getSelectedObject()}},{key:"delSelectToolObject",value:function(){this.toolManager.delSelectedObject()}}]),n}();e.MainDataSource=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(10),i=n(18),a=n(0),s=n(4),u=n(8);n(31);var c=o(n(47)),l=o(n(48)),h=o(n(23));function o(t){return t&&t.__esModule?t:{default:t}}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.element="#kline_container",this.chartMgr=null,this.G_HTTP_REQUEST=null,this.timer=null,this.buttonDown=!1,this.init=!1,this.requestParam="",this.data={},this.width=1200,this.height=650,this.symbol="",this.symbolName="",this.range=null,this.url="",this.limit=1e3,this.type="poll",this.subscribePath="",this.sendPath="",this.stompClient=null,this.intervalTime=5e3,this.debug=!0,this.language="zh-cn",this.theme="dark",this.ranges=["1w","1d","1h","30m","15m","5m","1m","line"],this.showTrade=!0,this.tradeWidth=250,this.socketConnected=!1,this.enableSockjs=!0,this.reverseColor=!1,this.isSized=!1,this.paused=!1,this.subscribed=null,this.disableFirebase=!1,this.periodMap={"01w":6048e5,"03d":2592e5,"01d":864e5,"12h":432e5,"06h":216e5,"04h":144e5,"02h":72e5,"01h":36e5,"30m":18e5,"15m":9e5,"05m":3e5,"03m":18e4,"01m":6e4,line:6e4},this.tagMapPeriod={"1w":"01w","3d":"03d","1d":"01d","12h":"12h","6h":"06h","4h":"04h","2h":"02h","1h":"01h","30m":"30m","15m":"15m","5m":"05m","3m":"03m","1m":"01m",line:"line"},Object.assign(this,t),o.created||(o.instance=this,o.created=!0),o.instance}var t,e,n;return t=o,(e=[{key:"draw",value:function(){o.trade=new i.KlineTrade,o.chartMgr=new a.ChartManager;var t=h.default.parseHTML(c.default);for(var e in this.ranges){(0,h.default)(t).find('[name="'+this.ranges[e]+'"]').each(function(t,e){(0,h.default)(e).attr("style","display:inline-block")})}(0,h.default)(this.element).html(t),setInterval(r.Control.refreshFunction,this.intervalTime),"stomp"===this.type&&r.Control.socketConnect(),this.disableFirebase||(0,l.default)(),this.registerMouseEvent(),a.ChartManager.instance.bindCanvas("main",document.getElementById("chart_mainCanvas")),a.ChartManager.instance.bindCanvas("overlay",document.getElementById("chart_overlayCanvas")),r.Control.refreshTemplate(),r.Control.onSize(this.width,this.height),r.Control.readCookie(),this.setTheme(this.theme),this.setLanguage(this.language),(0,h.default)(this.element).css({visibility:"visible"})}},{key:"resize",value:function(t,e){this.width=t,this.height=e,r.Control.onSize(this.width,this.height)}},{key:"setSymbol",value:function(t,e){this.symbol=t,this.symbolName=e,r.Control.switchSymbol(t),this.onSymbolChange(t,e)}},{key:"setTheme",value:function(t){this.theme=t,r.Control.switchTheme(t)}},{key:"setLanguage",value:function(t){this.language=t,r.Control.chartSwitchLanguage(t)}},{key:"setShowTrade",value:function(t){(this.showTrade=t)?(0,h.default)(".trade_container").show():(0,h.default)(".trade_container").hide(),r.Control.onSize(this.width,this.height)}},{key:"toggleTrade",value:function(){this.showTrade?(this.showTrade=!1,(0,h.default)(".trade_container").hide()):(this.showTrade=!0,(0,h.default)(".trade_container").show()),r.Control.onSize(this.width,this.height)}},{key:"setIntervalTime",value:function(t){this.intervalTime=t,this.debug&&console.log("DEBUG: interval time changed to "+t)}},{key:"pause",value:function(){this.debug&&console.log("DEBUG: kline paused"),this.paused=!0}},{key:"resend",value:function(){this.debug&&console.log("DEBUG: kline continue"),this.paused=!1,r.Control.requestData(!0)}},{key:"connect",value:function(){"stomp"===this.type?r.Control.socketConnect():this.debug&&console.log("DEBUG: this is for stomp type")}},{key:"disconnect",value:function(){"stomp"===this.type?(this.stompClient&&(this.stompClient.disconnect(),this.socketConnected=!1),this.debug&&console.log("DEBUG: socket disconnected")):this.debug&&console.log("DEBUG: this is for stomp type")}},{key:"onResize",value:function(t,e){this.debug&&console.log("DEBUG: chart resized to width: "+t+" height: "+e)}},{key:"onLangChange",value:function(t){this.debug&&console.log("DEBUG: language changed to "+t)}},{key:"onSymbolChange",value:function(t,e){this.debug&&console.log("DEBUG: symbol changed to "+t+" "+e)}},{key:"onThemeChange",value:function(t){this.debug&&console.log("DEBUG: themes changed to : "+t)}},{key:"onRangeChange",value:function(t){this.debug&&console.log("DEBUG: range changed to "+t)}},{key:"registerMouseEvent",value:function(){(0,h.default)(document).ready(function(){(0,h.default)("#chart_overlayCanvas").bind("contextmenu",function(t){return t.cancelBubble=!0,t.returnValue=!1,t.preventDefault(),t.stopPropagation(),!1}),(0,h.default)(".chart_container .chart_dropdown .chart_dropdown_t").mouseover(function(){var t=(0,h.default)(".chart_container"),e=(0,h.default)(this),n=e.next(),r=t.offset().left,i=e.offset().left,o=t.width(),a=e.width(),s=(n.width()-a)/2<<0;i-s<r+4?s=i-r-4:s+=r+o-4<i+a+s?i+a+s-(r+o-4)+19:4,n.css({"margin-left":-s}),e.addClass("chart_dropdown-hover"),n.addClass("chart_dropdown-hover")}).mouseout(function(){(0,h.default)(this).next().removeClass("chart_dropdown-hover"),(0,h.default)(this).removeClass("chart_dropdown-hover")}),(0,h.default)(".chart_dropdown_data").mouseover(function(){(0,h.default)(this).addClass("chart_dropdown-hover"),(0,h.default)(this).prev().addClass("chart_dropdown-hover")}).mouseout(function(){(0,h.default)(this).prev().removeClass("chart_dropdown-hover"),(0,h.default)(this).removeClass("chart_dropdown-hover")}),(0,h.default)("#chart_btn_parameter_settings").click(function(){(0,h.default)("#chart_parameter_settings").addClass("clicked"),(0,h.default)(".chart_dropdown_data").removeClass("chart_dropdown-hover"),(0,h.default)("#chart_parameter_settings").find("th").each(function(){var t=(0,h.default)(this).html(),e=0,n=s.ChartSettings.get().indics[t];(0,h.default)(this.nextElementSibling).find("input").each(function(){null!==n&&e<n.length&&(0,h.default)(this).val(n[e]),e++})})}),(0,h.default)("#close_settings").click(function(){(0,h.default)("#chart_parameter_settings").removeClass("clicked")}),(0,h.default)(".chart_container .chart_toolbar_tabgroup a").click(function(){r.Control.switchPeriod((0,h.default)(this).parent().attr("name")),window.location.href=hrefurl}),(0,h.default)(".market_chooser ul a").click(function(){r.Control.switchSymbol((0,h.default)(this).attr("name"))}),(0,h.default)("#chart_show_tools").click(function(){(0,h.default)(this).hasClass("selected")?r.Control.switchTools("off"):r.Control.switchTools("on")}),(0,h.default)("#chart_toolpanel .chart_toolpanel_button").click(function(){(0,h.default)(".chart_dropdown_data").removeClass("chart_dropdown-hover"),(0,h.default)("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),(0,h.default)(this).addClass("selected");var t=(0,h.default)(this).children().attr("name");o.instance.chartMgr.setRunningMode(a.ChartManager.DrawingTool[t])}),(0,h.default)("#chart_show_indicator").click(function(){(0,h.default)(this).hasClass("selected")?r.Control.switchIndic("off"):r.Control.switchIndic("on")}),(0,h.default)("#chart_tabbar li a").click(function(){(0,h.default)("#chart_tabbar li a").removeClass("selected"),(0,h.default)(this).addClass("selected");var t=(0,h.default)(this).attr("name");s.ChartSettings.get().charts.indics[1]=t,s.ChartSettings.save(),!1===u.Template.displayVolume?a.ChartManager.instance.getChart().setIndicator(1,t):a.ChartManager.instance.getChart().setIndicator(2,t)}),(0,h.default)("#chart_select_chart_style a").click(function(){(0,h.default)("#chart_select_chart_style a").removeClass("selected"),(0,h.default)(this).addClass("selected"),s.ChartSettings.get().charts.chartStyle=(0,h.default)(this)[0].innerHTML,s.ChartSettings.save();var t=a.ChartManager.instance;t.setChartStyle("frame0.k0",(0,h.default)(this).html()),t.redraw()}),(0,h.default)("#chart_dropdown_themes li").click(function(){(0,h.default)("#chart_dropdown_themes li a").removeClass("selected");var t=(0,h.default)(this).attr("name");"chart_themes_dark"===t?r.Control.switchTheme("dark"):"chart_themes_light"===t&&r.Control.switchTheme("light")}),(0,h.default)("#chart_select_main_indicator a").click(function(){(0,h.default)("#chart_select_main_indicator a").removeClass("selected"),(0,h.default)(this).addClass("selected");var t=(0,h.default)(this).attr("name");s.ChartSettings.get().charts.mIndic=t,s.ChartSettings.save();var e=a.ChartManager.instance;e.setMainIndicator("frame0.k0",t)||e.removeMainIndicator("frame0.k0"),e.redraw()}),(0,h.default)("#chart_toolbar_theme a").click(function(){(0,h.default)("#chart_toolbar_theme a").removeClass("selected"),"dark"===(0,h.default)(this).attr("name")?r.Control.switchTheme("dark"):"light"===(0,h.default)(this).attr("name")&&r.Control.switchTheme("light")}),(0,h.default)("#chart_select_theme li a").click(function(){(0,h.default)("#chart_select_theme a").removeClass("selected"),"dark"===(0,h.default)(this).attr("name")?r.Control.switchTheme("dark"):"light"===(0,h.default)(this).attr("name")&&r.Control.switchTheme("light")}),(0,h.default)("#chart_enable_tools li a").click(function(){(0,h.default)("#chart_enable_tools a").removeClass("selected"),"on"===(0,h.default)(this).attr("name")?r.Control.switchTools("on"):"off"===(0,h.default)(this).attr("name")&&r.Control.switchTools("off")}),(0,h.default)("#chart_enable_indicator li a").click(function(){(0,h.default)("#chart_enable_indicator a").removeClass("selected"),"on"===(0,h.default)(this).attr("name")?r.Control.switchIndic("on"):"off"===(0,h.default)(this).attr("name")&&r.Control.switchIndic("off")}),(0,h.default)("#chart_language_setting_div li a").click(function(){(0,h.default)("#chart_language_setting_div a").removeClass("selected"),"zh-cn"===(0,h.default)(this).attr("name")?r.Control.chartSwitchLanguage("zh-cn"):"en-us"===(0,h.default)(this).attr("name")?r.Control.chartSwitchLanguage("en-us"):"zh-tw"===(0,h.default)(this).attr("name")&&r.Control.chartSwitchLanguage("zh-tw")}),(0,h.default)(document).keyup(function(t){46===t.keyCode&&(a.ChartManager.instance.deleteToolObject(),a.ChartManager.instance.redraw("OverlayCanvas",!1))}),(0,h.default)("#clearCanvas").click(function(){for(var t=a.ChartManager.instance.getDataSource("frame0.k0"),e=t.getToolObjectCount(),n=0;n<e;n++)t.delToolObject();a.ChartManager.instance.redraw("OverlayCanvas",!1)}),(0,h.default)("#chart_overlayCanvas").mousemove(function(t){var e=t.target.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top,i=a.ChartManager.instance;!0===o.instance.buttonDown?(i.onMouseMove("frame0",n,r,!0),i.redraw("All",!1)):(i.onMouseMove("frame0",n,r,!1),i.redraw("OverlayCanvas"))}).mouseleave(function(t){var e=t.target.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top,i=a.ChartManager.instance;i.onMouseLeave("frame0",n,r,!1),i.redraw("OverlayCanvas")}).mouseup(function(t){if(1===t.which){o.instance.buttonDown=!1;var e=t.target.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top,i=a.ChartManager.instance;i.onMouseUp("frame0",n,r),i.redraw("All")}}).mousedown(function(t){if(1!==t.which)return a.ChartManager.instance.deleteToolObject(),void a.ChartManager.instance.redraw("OverlayCanvas",!1);o.instance.buttonDown=!0;var e=t.target.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;a.ChartManager.instance.onMouseDown("frame0",n,r)}),(0,h.default)("#chart_parameter_settings :input").change(function(){var e=(0,h.default)(this).attr("name"),n=0,r=[],t=a.ChartManager.instance;if((0,h.default)("#chart_parameter_settings :input").each(function(){if((0,h.default)(this).attr("name")===e){if(""!==(0,h.default)(this).val()&&null!==(0,h.default)(this).val()&&void 0!==(0,h.default)(this).val()){var t=parseInt((0,h.default)(this).val());r.push(t)}n++}}),0!==r.length){t.setIndicatorParameters(e,r);var i=t.getIndicatorParameters(e),o=[];(n=0,h.default)("#chart_parameter_settings :input").each(function(){(0,h.default)(this).attr("name")===e&&(""!==(0,h.default)(this).val()&&null!==(0,h.default)(this).val()&&void 0!==(0,h.default)(this).val()&&((0,h.default)(this).val(i[n].getValue()),o.push(i[n].getValue())),n++)}),s.ChartSettings.get().indics[e]=o,s.ChartSettings.save(),t.redraw("All",!1)}}),(0,h.default)("#chart_parameter_settings button").click(function(){var t=(0,h.default)(this).parents("tr").children("th").html(),e=0,n=a.ChartManager.instance.getIndicatorParameters(t),r=[];(0,h.default)(this).parent().prev().children("input").each(function(){null!==n&&e<n.length&&((0,h.default)(this).val(n[e].getDefaultValue()),r.push(n[e].getDefaultValue())),e++}),a.ChartManager.instance.setIndicatorParameters(t,r),s.ChartSettings.get().indics[t]=r,s.ChartSettings.save(),a.ChartManager.instance.redraw("All",!1)}),(0,h.default)("body").on("click","#sizeIcon",function(){o.instance.isSized=!o.instance.isSized,o.instance.isSized?((0,h.default)(o.instance.element).css({position:"fixed",left:"0",right:"0",top:"0",bottom:"0",width:"100%",height:"100%",zIndex:"10000"}),r.Control.onSize(),(0,h.default)("html,body").css({width:"100%",height:"100%",overflow:"hidden"})):((0,h.default)(o.instance.element).attr("style",""),(0,h.default)("html,body").attr("style",""),r.Control.onSize(o.instance.width,o.instance.height),(0,h.default)(o.instance.element).css({visibility:"visible",height:o.instance.height+"px"}))})})}}])&&d(t.prototype,e),n&&d(t,n),o}();(e.default=p).created=!1,p.instance=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartSettings=void 0;var u=n(0);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function s(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s)}var t,e,n;return t=s,n=[{key:"checkVersion",value:function(){if(s._data.ver<2){s._data.ver=2;var t=s._data.charts;t.period_weight={},t.period_weight.line=8,t.period_weight["1min"]=7,t.period_weight["5min"]=6,t.period_weight["15min"]=5,t.period_weight["30min"]=4,t.period_weight["1hour"]=3,t.period_weight["1day"]=2,t.period_weight["1week"]=1,t.period_weight["3min"]=0,t.period_weight["2hour"]=0,t.period_weight["4hour"]=0,t.period_weight["6hour"]=0,t.period_weight["12hour"]=0,t.period_weight["3day"]=0}s._data.ver<3&&(s._data.ver=3,s._data.charts.areaHeight=[])}},{key:"get",value:function(){return void 0===s._data&&(s.init(),s.load(),s.checkVersion()),s._data}},{key:"init",value:function(){for(var t={},e=["MA","EMA","VOLUME","MACD","KDJ","StochRSI","RSI","DMI","OBV","BOLL","DMA","TRIX","BRAR","VR","EMV","WR","ROC","MTM","PSY"],n=0;n<e.length;n++){var r=u.ChartManager.instance.createIndicatorAndRange("",e[n],!0);if(null!==r){t[e[n]]=[];for(var i=r.indic.getParameters(),o=0;o<i.length;o++)t[e[n]].push(i[o])}}var a={chartStyle:"CandleStick",mIndic:"MA",indics:["VOLUME","MACD"],indicsStatus:"open",period:"15m"};s._data={ver:1,charts:a,indics:t,theme:"Dark"},s.checkVersion()}},{key:"load",value:function(){if(!(document.cookie.length<=0)){var t=document.cookie.indexOf("chartSettings=");if(!(t<0)){t+="chartSettings=".length;var e=document.cookie.indexOf(";",t);e<0&&(e=document.cookie.length);var n=unescape(document.cookie.substring(t,e));s._data=JSON.parse(n)}}}},{key:"save",value:function(){var t=new Date;t.setDate(t.getDate()+2),document.cookie="chartSettings="+escape(JSON.stringify(s._data))+";expires="+t.toGMTString()}}],(e=null)&&r(t.prototype,e),n&&r(t,n),s}();e.ChartSettings=i},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"fromFloat",value:function(t,e){for(var n=t.toFixed(e),r=n.length-1;0<=r;r--){if("."===n[r])return n.substring(0,r);if("0"!==n[r])return n.substring(0,r+1)}}},{key:"formatTime",value:function(t){return t<10?"0"+t.toString():t.toString()}},{key:"isInstance",value:function(t,e){return null!=t&&t instanceof e}}],(n=null)&&i(e.prototype,n),r&&i(e,r),t}();e.Util=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LightTheme=e.DarkTheme=e.Theme=void 0;var r,i=(r=n(3))&&r.__esModule?r:{default:r};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=function(){function t(){l(this,t),this.getFont=function(t){return this._fonts[t]}}var e,n,r;return e=t,(n=[{key:"getColor",value:function(t){return this._colors[t]}}])&&h(e.prototype,n),r&&h(e,r),t}();(e.Theme=d).theme_color_id=0,d.theme_font_id=0,d.Color={Positive:d.theme_color_id++,Negative:d.theme_color_id++,PositiveDark:d.theme_color_id++,NegativeDark:d.theme_color_id++,Unchanged:d.theme_color_id++,Background:d.theme_color_id++,Cursor:d.theme_color_id++,RangeMark:d.theme_color_id++,Indicator0:d.theme_color_id++,Indicator1:d.theme_color_id++,Indicator2:d.theme_color_id++,Indicator3:d.theme_color_id++,Indicator4:d.theme_color_id++,Indicator5:d.theme_color_id++,Grid0:d.theme_color_id++,Grid1:d.theme_color_id++,Grid2:d.theme_color_id++,Grid3:d.theme_color_id++,Grid4:d.theme_color_id++,TextPositive:d.theme_color_id++,TextNegative:d.theme_color_id++,Text0:d.theme_color_id++,Text1:d.theme_color_id++,Text2:d.theme_color_id++,Text3:d.theme_color_id++,Text4:d.theme_color_id++,LineColorNormal:d.theme_color_id++,LineColorSelected:d.theme_color_id++,CircleColorFill:d.theme_color_id++,CircleColorStroke:d.theme_color_id++},d.Font={Default:d.theme_font_id++};var p=function(t){function e(){var t;return l(this,e),(t=a(this,s(e).call(this)))._colors=[],i.default.instance.reverseColor?(t._colors[d.Color.Positive]="#03be87",t._colors[d.Color.Negative]="#e66b41",t._colors[d.Color.PositiveDark]="#682a2a",t._colors[d.Color.NegativeDark]="#1a3e39"):(t._colors[d.Color.Positive]="#e66b41",t._colors[d.Color.Negative]="#03be87",t._colors[d.Color.PositiveDark]="#1a3e39",t._colors[d.Color.NegativeDark]="#682a2a"),t._colors[d.Color.Unchanged]="#fff",t._colors[d.Color.Background]="#0c1028",t._colors[d.Color.Cursor]="#aaa",t._colors[d.Color.RangeMark]="#f9ee30",t._colors[d.Color.Indicator0]="#ddd",t._colors[d.Color.Indicator1]="#bdb753",t._colors[d.Color.Indicator2]="#c34ca0",t._colors[d.Color.Indicator3]="#6bf",t._colors[d.Color.Indicator4]="#a5cf81",t._colors[d.Color.Indicator5]="#e18b89",t._colors[d.Color.Grid0]="#323752",t._colors[d.Color.Grid1]="#323752",t._colors[d.Color.Grid2]="#666",t._colors[d.Color.Grid3]="#888",t._colors[d.Color.Grid4]="#aaa",t._colors[d.Color.TextPositive]="#ff6f5e",t._colors[d.Color.TextNegative]="#1bd357",t._colors[d.Color.Text0]="red",t._colors[d.Color.Text1]="#666",t._colors[d.Color.Text2]="#888",t._colors[d.Color.Text3]="#aaa",t._colors[d.Color.Text4]="#ccc",t._colors[d.Color.LineColorNormal]="#a6a6a6",t._colors[d.Color.LineColorSelected]="#ffffff",t._colors[d.Color.CircleColorFill]="#000000",t._colors[d.Color.CircleColorStroke]="#ffffff",t._fonts=[],t._fonts[d.Font.Default]="12px Tahoma",t}return u(e,d),e}();e.DarkTheme=p;var f=function(t){function e(){var t;return l(this,e),(t=a(this,s(e).call(this)))._colors=[],i.default.instance.reverseColor?(t._colors[d.Color.Positive]="#03be87",t._colors[d.Color.Negative]="#e66b41",t._colors[d.Color.PositiveDark]="#e39393",t._colors[d.Color.NegativeDark]="#93cac3"):(t._colors[d.Color.Positive]="#e66b41",t._colors[d.Color.Negative]="#03be87",t._colors[d.Color.PositiveDark]="#93cac3",t._colors[d.Color.NegativeDark]="#e39393"),t._colors[d.Color.Unchanged]="#fff",t._colors[d.Color.Background]="#f7f7f7",t._colors[d.Color.Cursor]="#aaa",t._colors[d.Color.RangeMark]="#f06213",t._colors[d.Color.Indicator0]="#17c6a4",t._colors[d.Color.Indicator1]="#ff9000",t._colors[d.Color.Indicator2]="#e849b9",t._colors[d.Color.Indicator3]="#1478c8",t._colors[d.Color.Grid0]="#eee",t._colors[d.Color.Grid1]="#d3d3d3",t._colors[d.Color.Grid2]="#ccc",t._colors[d.Color.Grid3]="#bbb",t._colors[d.Color.Grid4]="#aaa",t._colors[d.Color.TextPositive]="#db5542",t._colors[d.Color.TextNegative]="#53b37b",t._colors[d.Color.Text0]="#ccc",t._colors[d.Color.Text1]="#aaa",t._colors[d.Color.Text2]="#888",t._colors[d.Color.Text3]="#666",t._colors[d.Color.Text4]="#444",t._colors[d.Color.LineColorNormal]="#8c8c8c",t._colors[d.Color.LineColorSelected]="#393c40",t._colors[d.Color.CircleColorFill]="#ffffff",t._colors[d.Color.CircleColorStroke]="#393c40",t._fonts=[],t._fonts[d.Font.Default]="12px Tahoma",t}return u(e,d),e}();e.LightTheme=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"firebase",function(){return o});var p=n(16),f=(n.n(p),function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}),g="[DEFAULT]",r=[],_=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=Object(p.deepCopy)(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){r.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(e){r=r.filter(function(t){return t!==e})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var r=this;return new Promise(function(t){r.checkDestroyed_(),t()}).then(function(){r.firebase_.INTERNAL.removeApp(r.name_);var n=[];return Object.keys(r.services_).forEach(function(e){Object.keys(r.services_[e]).forEach(function(t){n.push(r.services_[e][t])})}),Promise.all(n.map(function(t){return t.INTERNAL.delete()}))}).then(function(){r.isDeleted_=!0,r.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=g),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==g?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;Object(p.deepExtend)(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(r.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),r=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&v("app-deleted",{name:this.name_})},t}();function v(t,e){throw i.create(t,e)}_.prototype.name&&_.prototype.options||_.prototype.delete||console.log("dc");var i=new p.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),o=function t(){var a={},s={},u={},c={__esModule:!0,initializeApp:function(t,e){if(void 0===e&&(e={}),"object"!=typeof e||null===e){var n=e;e={name:n}}var r=e;void 0===r.name&&(r.name=g);var i=r.name;"string"==typeof i&&i||v("bad-app-name",{name:i+""}),f(a,i)&&v("duplicate-app",{name:i});var o=new _(t,r,c);return d(a[i]=o,"create"),o},app:l,apps:null,Promise:Promise,SDK_VERSION:"4.13.0",INTERNAL:{registerService:function(n,t,e,r,i){s[n]&&v("duplicate-service",{name:n}),s[n]=t,r&&(u[n]=r,h().forEach(function(t){r("create",t)}));var o=function(t){return void 0===t&&(t=l()),"function"!=typeof t[n]&&v("invalid-app-argument",{name:n}),t[n]()};return void 0!==e&&Object(p.deepExtend)(o,e),c[n]=o,_.prototype[n]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,n).apply(this,i?t:[])},o},createFirebaseNamespace:t,extendNamespace:function(t){Object(p.deepExtend)(c,t)},createSubscribe:p.createSubscribe,ErrorFactory:p.ErrorFactory,removeApp:function(t){d(a[t],"delete"),delete a[t]},factories:s,useAsService:i,Promise:Promise,deepExtend:p.deepExtend}};function l(t){return f(a,t=t||g)||v("no-app",{name:t}),a[t]}function h(){return Object.keys(a).map(function(t){return a[t]})}function d(n,r){Object.keys(s).forEach(function(t){var e=i(n,t);null!==e&&u[e]&&u[e](r,n)})}function i(t,e){if("serverAuth"===e)return null;var n=e;return t.options,n}return Object(p.patchProperty)(c,"default",c),Object.defineProperty(c,"apps",{get:h}),Object(p.patchProperty)(l,"App",_),c}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TemplateMeasuringHandler=e.DefaultTemplate=e.Template=void 0;var f=n(0),g=n(4),r=o(n(2)),_=o(n(14)),v=o(n(15)),m=o(n(13)),i=n(28),u=n(19),c=o(n(29)),l=o(n(6)),h=o(n(22));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}var C=function(){function t(){y(this,t)}return w(t,null,[{key:"createCandlestickDataSource",value:function(t){return new r.MainDataSource(t)}},{key:"createDataSource",value:function(t,e,n){var r=f.ChartManager.instance;null===r.getCachedDataSource(e)&&r.setCachedDataSource(e,n(e)),r.setCurrentDataSource(t,e),r.updateData(t,null)}},{key:"createTableComps",value:function(t){this.createMainChartComps(t),this.displayVolume&&this.createIndicatorChartComps(t,"VOLUME"),this.createTimelineComps(t)}},{key:"createMainChartComps",value:function(t){var e=f.ChartManager.instance,n=e.getArea(t+".charts"),r=t+".main",i=r+"Range",o=new v.MainArea(r);e.setArea(r,o),n.addArea(o);var a=new v.MainRangeArea(i);e.setArea(i,a),n.addArea(a);var s=new _.MainDataProvider(r+".main");e.setDataProvider(s.getName(),s),e.setMainIndicator(t,"MA");var u=new h.MainRange(r);e.setRange(u.getName(),u),u.setPaddingTop(28),u.setPaddingBottom(12);var c=new m.MainAreaBackgroundPlotter(r+".background");e.setPlotter(c.getName(),c),c=new m.CGridPlotter(r+".grid"),e.setPlotter(c.getName(),c),c=new m.CandlestickPlotter(r+".main"),e.setPlotter(c.getName(),c),c=new m.MinMaxPlotter(r+".decoration"),e.setPlotter(c.getName(),c),c=new m.MainInfoPlotter(r+".info"),e.setPlotter(c.getName(),c),c=new m.SelectionPlotter(r+".selection"),e.setPlotter(c.getName(),c),c=new m.CDynamicLinePlotter(r+".tool"),e.setPlotter(c.getName(),c),c=new m.RangeAreaBackgroundPlotter(r+"Range.background"),e.setPlotter(c.getName(),c),c=new m.COrderGraphPlotter(r+"Range.grid"),e.setPlotter(c.getName(),c),c=new m.RangePlotter(r+"Range.main"),e.setPlotter(c.getName(),c),c=new m.RangeSelectionPlotter(r+"Range.selection"),e.setPlotter(c.getName(),c),c=new m.LastClosePlotter(r+"Range.decoration"),e.setPlotter(c.getName(),c)}},{key:"createIndicatorChartComps",value:function(t,e){var n=f.ChartManager.instance,r=n.getArea(t+".charts"),i=t+".indic"+r.getNextRowId(),o=i+"Range",a=new v.IndicatorArea(i);n.setArea(i,a),r.addArea(a);var s=r.getAreaCount()>>1,u=g.ChartSettings.get().charts.areaHeight;if(u.length>s){var c,l;for(l=0;l<s;l++)(c=r.getAreaAt(l<<1)).setTop(0),c.setBottom(u[l]);a.setTop(0),a.setBottom(u[s])}var h=new v.IndicatorRangeArea(o);n.setArea(o,h),r.addArea(h);var d=new _.IndicatorDataProvider(i+".secondary");if(n.setDataProvider(d.getName(),d),!1!==n.setIndicator(i,e)){var p=new m.MainAreaBackgroundPlotter(i+".background");n.setPlotter(p.getName(),p),p=new m.CGridPlotter(i+".grid"),n.setPlotter(p.getName(),p),p=new m.IndicatorPlotter(i+".secondary"),n.setPlotter(p.getName(),p),p=new m.IndicatorInfoPlotter(i+".info"),n.setPlotter(p.getName(),p),p=new m.SelectionPlotter(i+".selection"),n.setPlotter(p.getName(),p),p=new m.RangeAreaBackgroundPlotter(i+"Range.background"),n.setPlotter(p.getName(),p),p=new m.RangePlotter(i+"Range.main"),n.setPlotter(p.getName(),p),p=new m.RangeSelectionPlotter(i+"Range.selection"),n.setPlotter(p.getName(),p)}else n.removeIndicator(i)}},{key:"createTimelineComps",value:function(t){var e,n=f.ChartManager.instance,r=new i.Timeline(t);n.setTimeline(r.getName(),r),e=new m.TimelineAreaBackgroundPlotter(t+".timeline.background"),n.setPlotter(e.getName(),e),e=new m.TimelinePlotter(t+".timeline.main"),n.setPlotter(e.getName(),e),e=new m.TimelineSelectionPlotter(t+".timeline.selection"),n.setPlotter(e.getName(),e)}},{key:"createLiveOrderComps",value:function(t){var e,n=f.ChartManager.instance;e=new m.BackgroundPlotter(t+".main.background"),n.setPlotter(e.getName(),e),e=new m.CLiveOrderPlotter(t+".main.main"),n.setPlotter(e.getName(),e)}},{key:"createLiveTradeComps",value:function(t){var e,n=f.ChartManager.instance;e=new m.BackgroundPlotter(t+".main.background"),n.setPlotter(e.getName(),e),e=new m.CLiveTradePlotter(t+".main.main"),n.setPlotter(e.getName(),e)}}]),t}();(e.Template=C).displayVolume=!0;var E=function(t){function e(){return y(this,e),s(this,d(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,C),w(e,null,[{key:"loadTemplate",value:function(t,e){var n=f.ChartManager.instance,r=g.ChartSettings.get(),i=new u.CName(t).getCompAt(0);n.unloadTemplate(i),this.createDataSource(t,e,this.createCandlestickDataSource);var o=new c.DockableLayout(i);n.setFrame(o.getName(),o),n.setArea(o.getName(),o),o.setGridColor(l.Theme.Color.Grid1);var a=new v.TimelineArea(t+".timeline");n.setArea(a.getName(),a),o.addArea(a),a.setDockStyle(v.ChartArea.DockStyle.Bottom),a.Measuring.addHandler(a,x.onMeasuring);var s=new c.TableLayout(t+".charts");return n.setArea(s.getName(),s),s.setDockStyle(v.ChartArea.DockStyle.Fill),o.addArea(s),this.createTableComps(t),n.setThemeName(i,r.theme),n}}]),e}();e.DefaultTemplate=E;var x=function(){function t(){y(this,t)}return w(t,null,[{key:"onMeasuring",value:function(t,e){var n=e.Width;e.Height;"timeline"===t.getNameObject().getCompAt(2)&&t.setMeasuredDimension(n,22)}}]),t}();e.TemplateMeasuringHandler=x},function(jr,kr){var lr;lr=function(){return this}();try{lr=lr||Function("return this")()||eval("this")}catch(t){"object"==typeof window&&(lr=window)}jr.exports=lr},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Control=void 0;var _kline=_interopRequireDefault(__webpack_require__(3)),_kline_trade=__webpack_require__(18),_chart_manager=__webpack_require__(0),_chart_settings=__webpack_require__(4),_templates=__webpack_require__(8),_mevent=__webpack_require__(21),_jquery=_interopRequireDefault(__webpack_require__(23));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Control=function(){function Control(){_classCallCheck(this,Control)}return _createClass(Control,null,[{key:"refreshFunction",value:function(){Control.refreshCounter++;var t=_chart_manager.ChartManager.instance.getLanguage();if(3600<Control.refreshCounter){var e=Number(Control.refreshCounter/3600);"en-us"===t?(0,_jquery.default)("#chart_updated_time_text").html(e.toFixed(0)+"h"):"zh-tw"===t?(0,_jquery.default)("#chart_updated_time_text").html(e.toFixed(0)+"小時"):(0,_jquery.default)("#chart_updated_time_text").html(e.toFixed(0)+"小时")}else if(60<Control.refreshCounter&&Control.refreshCounter<=3600){var n=Number(Control.refreshCounter/60);"en-us"===t?(0,_jquery.default)("#chart_updated_time_text").html(n.toFixed(0)+"m"):"zh-tw"===t?(0,_jquery.default)("#chart_updated_time_text").html(n.toFixed(0)+"分鐘"):(0,_jquery.default)("#chart_updated_time_text").html(n.toFixed(0)+"分钟")}else Control.refreshCounter<=60&&("en-us"===t?(0,_jquery.default)("#chart_updated_time_text").html(Control.refreshCounter+"s"):(0,_jquery.default)("#chart_updated_time_text").html(Control.refreshCounter+"秒"))}},{key:"clearRefreshCounter",value:function(){window.clearInterval(Control.refreshHandler),Control.refreshCounter=0,"en-us"===_chart_manager.ChartManager.instance.getLanguage()?(0,_jquery.default)("#chart_updated_time_text").html(Control.refreshCounter+"s"):(0,_jquery.default)("#chart_updated_time_text").html(Control.refreshCounter+"秒"),Control.refreshHandler=setInterval(Control.refreshFunction,_kline.default.instance.intervalTime)}},{key:"requestData",value:function(t){Control.AbortRequest(),window.clearTimeout(_kline.default.instance.timer),_kline.default.instance.paused||(!0===t&&(0,_jquery.default)("#chart_loading").addClass("activated"),"stomp"===_kline.default.instance.type&&_kline.default.instance.stompClient?Control.requestOverStomp():Control.requestOverHttp())}},{key:"parseRequestParam",value:function(t){return JSON.parse('{"'+decodeURI(t.replace(/&/g,'","').replace(/=/g,'":"'))+'"}')}},{key:"requestOverStomp",value:function(){_kline.default.instance.socketConnected?_kline.default.instance.stompClient&&1===_kline.default.instance.stompClient.ws.readyState?_kline.default.instance.stompClient.send(_kline.default.instance.sendPath,{},JSON.stringify(Control.parseRequestParam(_kline.default.instance.requestParam))):(_kline.default.instance.debug&&console.log("DEBUG: stomp client is not ready yet ..."),_kline.default.instance.timer=setTimeout(function(){Control.requestData(!0)},1e3)):_kline.default.instance.debug&&console.log("DEBUG: socket is not coonnected")}},{key:"requestOverHttp",value:function(){_kline.default.instance.debug&&console.log("DEBUG: "+_kline.default.instance.requestParam),(0,_jquery.default)(document).ready(_kline.default.instance.G_HTTP_REQUEST=_jquery.default.ajax({type:"GET",url:_kline.default.instance.url,dataType:"json",data:_kline.default.instance.requestParam,timeout:3e4,created:Date.now(),beforeSend:function(){this.range=_kline.default.instance.range,this.symbol=_kline.default.instance.symbol},success:function(t){"200"==t.code&&(DataProcessing.goodsHistoryInfoGet(t),datashuju.data.lines[datashuju.data.lines.length-1][1]=Number(curprices),_kline.default.instance.G_HTTP_REQUEST&&Control.requestSuccessHandler(datashuju),MainData&&MainData.close(),"WebSocket"in window?MainData=new WebSocket(wsurldata):"MozWebSocket"in window?MainData=new MozWebSocket(wsurldata):MainData=new SockJS(wsurldata),MainData.onopen=function(t){var e={code:CodeData};MainData.send(JSON.stringify(e))},MainData.onmessage=function(t){var e=JSON.parse(t.data);e.code==CodeData&&("minute"==StateofTime&&(datashuju.data.lines[datashuju.data.lines.length-1][0]=TimeTransformation.getTIME(e.date,e.time)),datashuju.data.lines[datashuju.data.lines.length-1][1]=Number(e.price),datashuju.data.lines[datashuju.data.lines.length-1][4]=Number(e.close),Control.requestSuccessHandler(datashuju))},MainData.onerror=function(t){console.log("  websocket.onerror")},MainData.onclose=function(t){console.log("  websocket.onclose")})},error:function(t,e,n){_kline.default.instance.debug&&console.log(t),200===t.status&&4===t.readyState||(_kline.default.instance.timer=setTimeout(function(){Control.requestData(!0)},_kline.default.instance.intervalTime))},complete:function(){_kline.default.instance.G_HTTP_REQUEST=null}}))}},{key:"requestSuccessHandler",value:function requestSuccessHandler(res){if(_kline.default.instance.debug&&console.log(res),res&&res.success){(0,_jquery.default)("#chart_loading").removeClass("activated");var chart=_chart_manager.ChartManager.instance.getChart();chart.setTitle(),_kline.default.instance.data=eval(res.data);var updateDataRes=_kline.default.instance.chartMgr.updateData("frame0.k0",_kline.default.instance.data.lines);_kline.default.instance.requestParam=Control.setHttpRequestParam(_kline.default.instance.symbol,_kline.default.instance.range,null,_kline.default.instance.chartMgr.getDataSource("frame0.k0").getLastDate());var intervalTime=_kline.default.instance.intervalTime<_kline.default.instance.range?_kline.default.instance.intervalTime:_kline.default.instance.range;updateDataRes?(_kline.default.instance.data.trades&&0<_kline.default.instance.data.trades.length&&(_kline_trade.KlineTrade.instance.pushTrades(_kline.default.instance.data.trades),_kline_trade.KlineTrade.instance.klineTradeInit=!0),_kline.default.instance.data.depths&&_kline_trade.KlineTrade.instance.updateDepth(_kline.default.instance.data.depths),Control.clearRefreshCounter(),"poll"===_kline.default.instance.type&&(_kline.default.instance.timer=setTimeout(Control.TwoSecondThread,intervalTime)),_chart_manager.ChartManager.instance.redraw("All",!1)):"poll"===_kline.default.instance.type&&(_kline.default.instance.timer=setTimeout(Control.requestData,intervalTime))}else"poll"===_kline.default.instance.type&&(_kline.default.instance.timer=setTimeout(function(){Control.requestData(!0)},_kline.default.instance.intervalTime))}},{key:"AbortRequest",value:function(){"stomp"===_kline.default.instance.type&&_kline.default.instance.stompClient||_kline.default.instance.G_HTTP_REQUEST&&4!==_kline.default.instance.G_HTTP_REQUEST.readyState&&_kline.default.instance.G_HTTP_REQUEST.abort()}},{key:"TwoSecondThread",value:function(){var t=_kline.default.instance.chartMgr.getDataSource("frame0.k0").getLastDate();_kline.default.instance.requestParam=-1===t?Control.setHttpRequestParam(_kline.default.instance.symbol,_kline.default.instance.range,_kline.default.instance.limit,null):Control.setHttpRequestParam(_kline.default.instance.symbol,_kline.default.instance.range,null,t.toString()),Control.requestData()}},{key:"readCookie",value:function(){_chart_settings.ChartSettings.get(),_chart_settings.ChartSettings.save();var t=_chart_settings.ChartSettings.get();_chart_manager.ChartManager.instance.setChartStyle("frame0.k0",t.charts.chartStyle);var e=t.charts.symbol;_kline.default.instance.init||(e=_kline.default.instance.symbol,_kline.default.instance.init=!0),_kline.default.instance.symbol=e,Control.switchSymbolSelected(e);var n=t.charts.period;Control.switchPeriod(n),(0,_jquery.default)("#chart_period_"+n+"_v a").addClass("selected"),(0,_jquery.default)("#chart_period_"+n+"_h a").addClass("selected"),"close"===t.charts.indicsStatus?Control.switchIndic("off"):"open"===t.charts.indicsStatus&&Control.switchIndic("on"),(0,_jquery.default)("#chart_select_main_indicator").find("a").each(function(){(0,_jquery.default)(this).attr("name")===t.charts.mIndic&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)("#chart_select_chart_style").find("a").each(function(){(0,_jquery.default)(this)[0].innerHTML===t.charts.chartStyle&&(0,_jquery.default)(this).addClass("selected")}),_chart_manager.ChartManager.instance.getChart().setMainIndicator(t.charts.mIndic),_chart_manager.ChartManager.instance.setThemeName("frame0",t.theme),Control.switchTools("off"),"Dark"===t.theme?Control.switchTheme("dark"):"Light"===t.theme&&Control.switchTheme("light"),Control.chartSwitchLanguage(t.language||"zh-cn")}},{key:"setHttpRequestParam",value:function(t,e,n,r){return""}},{key:"refreshTemplate",value:function(){_kline.default.instance.chartMgr=_templates.DefaultTemplate.loadTemplate("frame0.k0",""),_chart_manager.ChartManager.instance.redraw("All",!0)}},{key:"chartSwitchLanguage",value:function(t){var n=t.replace(/-/,"_");(0,_jquery.default)("#chart_language_switch_tmp").find("span").each(function(){var t=(0,_jquery.default)(this).attr("name"),e=(0,_jquery.default)(this).attr(n);t="."+t,(0,_jquery.default)(t)[0]&&(0,_jquery.default)(t).each(function(){(0,_jquery.default)(this)[0].innerHTML=e})}),(0,_jquery.default)("#chart_language_setting_div li a[name='"+t+"']").addClass("selected"),_chart_manager.ChartManager.instance.setLanguage(t),_chart_manager.ChartManager.instance.getChart().setTitle(),_chart_settings.ChartSettings.get().language=t,_chart_settings.ChartSettings.save(),_kline.default.instance.onLangChange(t)}},{key:"onSize",value:function(t,e){var n=t||window.innerWidth,r=_kline.default.instance.showTrade?n-_kline.default.instance.tradeWidth:n,i=e||window.innerHeight;(0,_jquery.default)(_kline.default.instance.element).css({width:n+"px",height:i+"px"});var o=(0,_jquery.default)("#chart_toolbar"),a=(0,_jquery.default)("#chart_toolpanel"),s=(0,_jquery.default)("#chart_canvasGroup"),u=(0,_jquery.default)("#chart_tabbar"),c="inline"===a[0].style.display,l="block"===u[0].style.display,h={x:0,y:0};h.w=r,h.h=29;var d={x:0};d.y=h.h+1,d.w=c?32:0,d.h=i-d.y;var p={};p.w=c?r-(d.w+1):r,p.h=l?22:-1,p.x=r-p.w,p.y=i-(p.h+1);var f={};f.x=p.x,f.y=d.y,f.w=p.w,f.h=p.y-d.y,o.css({left:h.x+"px",top:h.y+"px",width:h.w+"px",height:h.h+"px"}),c&&a.css({left:d.x+"px",top:d.y+"px",width:d.w+"px",height:d.h+"px"}),s.css({left:f.x+"px",top:f.y+"px",height:f.h+"px"});var g=(0,_jquery.default)("#chart_mainCanvas")[0],_=(0,_jquery.default)("#chart_overlayCanvas")[0];g.width=f.w,g.height=f.h,_.width=f.w,_.height=f.h,l&&u.css({left:p.x+"px",top:p.y+"px",width:p.w+"px",height:p.h+"px"});var v=(0,_jquery.default)("#chart_parameter_settings");v.css({left:r-v.width()>>1,top:i-v.height()>>1});var m=(0,_jquery.default)("#chart_loading");m.css({left:r-m.width()>>1,top:i-m.height()>>2});var y=(0,_jquery.default)("#chart_dom_elem_cache"),b=(0,_jquery.default)("#chart_select_theme")[0],w=(0,_jquery.default)("#chart_enable_tools")[0],C=(0,_jquery.default)("#chart_enable_indicator")[0],E=(0,_jquery.default)("#chart_toolbar_periods_vert"),x=(0,_jquery.default)("#chart_toolbar_periods_horz")[0],k=(0,_jquery.default)("#chart_show_indicator")[0],S=(0,_jquery.default)("#chart_show_tools")[0],A=(0,_jquery.default)("#chart_toolbar_theme")[0],P=(0,_jquery.default)("#chart_dropdown_settings"),T=E[0].offsetWidth,I=T+x.offsetWidth,O=I+k.offsetWidth+4,R=O+S.offsetWidth+4,N=R+A.offsetWidth,D=P.find(".chart_dropdown_t")[0].offsetWidth+150;T+=D,O+=D,R+=D,N+=D,r<(I+=D)?y.append(x):E.after(x),r<O?(y.append(k),C.style.display=""):(P.before(k),C.style.display="none"),r<R?(y.append(S),w.style.display=""):(P.before(S),w.style.display="none"),r<N?(y.append(A),b.style.display=""):(P.before(A),b.style.display="none"),_chart_manager.ChartManager.instance.redraw("All",!0),_kline.default.instance.onResize(n,i)}},{key:"mouseWheel",value:function(t,e){return _chart_manager.ChartManager.instance.scale(0<e?1:-1),_chart_manager.ChartManager.instance.redraw("All",!0),!1}},{key:"switchTheme",value:function(t){if((0,_jquery.default)("#chart_toolbar_theme a").removeClass("selected"),(0,_jquery.default)("#chart_select_theme a").removeClass("selected"),(0,_jquery.default)("#chart_toolbar_theme").find("a").each(function(){(0,_jquery.default)(this).attr("name")===t&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)("#chart_select_theme a").each(function(){(0,_jquery.default)(this).attr("name")===t&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)(".chart_container").attr("class","chart_container "+t),(0,_jquery.default)(".marketName_ a").attr("class",t),"dark"===t)(0,_jquery.default)(".trade_container").addClass("dark").removeClass("light"),_chart_manager.ChartManager.instance.setThemeName("frame0","Dark"),_chart_settings.ChartSettings.get().theme="Dark",_chart_settings.ChartSettings.save();else if("light"===t){(0,_jquery.default)(".trade_container").addClass("light").removeClass("dark"),_chart_manager.ChartManager.instance.setThemeName("frame0","Light"),_chart_settings.ChartSettings.get().theme="Light",_chart_settings.ChartSettings.save()}var e={command:"set current themes"};e.content=t,(0,_jquery.default)("#chart_output_interface_text").val(JSON.stringify(e)),(0,_jquery.default)("#chart_output_interface_submit").submit(),(new _mevent.MEvent).raise(t),_chart_manager.ChartManager.instance.redraw(),_kline.default.instance.onThemeChange(t)}},{key:"switchTools",value:function(t){(0,_jquery.default)(".chart_dropdown_data").removeClass("chart_dropdown-hover"),(0,_jquery.default)("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),(0,_jquery.default)("#chart_enable_tools a").removeClass("selected"),"on"===t?((0,_jquery.default)("#chart_show_tools").addClass("selected"),(0,_jquery.default)("#chart_enable_tools a").each(function(){"on"===(0,_jquery.default)(this).attr("name")&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)("#chart_toolpanel")[0].style.display="inline",_chart_manager.ChartManager.instance._drawingTool===_chart_manager.ChartManager.DrawingTool.Cursor?(0,_jquery.default)("#chart_Cursor").parent().addClass("selected"):_chart_manager.ChartManager.instance._drawingTool===_chart_manager.ChartManager.DrawingTool.CrossCursor&&(0,_jquery.default)("#chart_CrossCursor").parent().addClass("selected")):"off"===t&&((0,_jquery.default)("#chart_show_tools").removeClass("selected"),(0,_jquery.default)("#chart_enable_tools a").each(function(){"off"===(0,_jquery.default)(this).attr("name")&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)("#chart_toolpanel")[0].style.display="none",_chart_manager.ChartManager.instance.setRunningMode(_chart_manager.ChartManager.instance._beforeDrawingTool),_chart_manager.ChartManager.instance.redraw("All",!0)),_kline.default.instance.isSized?Control.onSize():Control.onSize(_kline.default.instance.width,_kline.default.instance.height)}},{key:"switchIndic",value:function(t){if((0,_jquery.default)("#chart_enable_indicator a").removeClass("selected"),(0,_jquery.default)("#chart_enable_indicator a[name='"+t+"']").addClass("selected"),"on"===t){(0,_jquery.default)("#chart_show_indicator").addClass("selected");var e=_chart_settings.ChartSettings.get();e.charts.indicsStatus="open",_chart_settings.ChartSettings.save();var n=e.charts.indics[1];_templates.Template.displayVolume,_chart_manager.ChartManager.instance.getChart().setIndicator(2,n),(0,_jquery.default)("#chart_tabbar").find("a").each(function(){(0,_jquery.default)(this).attr("name")===n&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)("#chart_tabbar")[0].style.display="block"}else if("off"===t){(0,_jquery.default)("#chart_show_indicator").removeClass("selected"),_chart_manager.ChartManager.instance.getChart().setIndicator(2,"NONE"),_chart_settings.ChartSettings.get().charts.indicsStatus="close",_chart_settings.ChartSettings.save(),(0,_jquery.default)("#chart_tabbar")[0].style.display="none",(0,_jquery.default)("#chart_tabbar a").removeClass("selected")}_kline.default.instance.isSized?Control.onSize():Control.onSize(_kline.default.instance.width,_kline.default.instance.height)}},{key:"switchPeriod",value:function(t){if((0,_jquery.default)(".chart_container .chart_toolbar_tabgroup a").removeClass("selected"),(0,_jquery.default)("#chart_toolbar_periods_vert ul a").removeClass("selected"),(0,_jquery.default)(".chart_container .chart_toolbar_tabgroup a").each(function(){(0,_jquery.default)(this).parent().attr("name")===t&&(0,_jquery.default)(this).addClass("selected")}),(0,_jquery.default)("#chart_toolbar_periods_vert ul a").each(function(){(0,_jquery.default)(this).parent().attr("name")===t&&(0,_jquery.default)(this).addClass("selected")}),_chart_manager.ChartManager.instance.showCursor(),Control.calcPeriodWeight(t),"line"===t)return _chart_manager.ChartManager.instance.getChart().strIsLine=!0,_chart_manager.ChartManager.instance.setChartStyle("frame0.k0","Line"),_chart_manager.ChartManager.instance.getChart().setCurrentPeriod("line"),_chart_settings.ChartSettings.get().charts.period=t,void _chart_settings.ChartSettings.save();_chart_manager.ChartManager.instance.getChart().strIsLine=!1;var e=_kline.default.instance.tagMapPeriod[t];_chart_manager.ChartManager.instance.setChartStyle("frame0.k0",_chart_settings.ChartSettings.get().charts.chartStyle),_chart_manager.ChartManager.instance.getChart().setCurrentPeriod(e),_chart_settings.ChartSettings.get().charts.period=t,_chart_settings.ChartSettings.save()}},{key:"reset",value:function(t){_kline.default.instance.symbol=t,_kline.default.instance.showTrade&&_kline_trade.KlineTrade.instance.reset(t)}},{key:"switchSymbolSelected",value:function(t){Control.reset(t),(0,_jquery.default)(".market_chooser ul a").removeClass("selected"),(0,_jquery.default)(".market_chooser ul a[name='"+t+"']").addClass("selected"),_chart_manager.ChartManager.instance.getChart()._symbol=t,_chart_settings.ChartSettings.get().charts.symbol=t,_chart_settings.ChartSettings.save()}},{key:"switchSymbol",value:function(t){"stomp"===_kline.default.instance.type&&1===_kline.default.instance.stompClient.ws.readyState&&(_kline.default.instance.subscribed.unsubscribe(),_kline.default.instance.subscribed=_kline.default.instance.stompClient.subscribe(_kline.default.instance.subscribePath+"/"+t+"/"+_kline.default.instance.range,Control.subscribeCallback)),Control.switchSymbolSelected(t),"line"===_chart_settings.ChartSettings.get().charts.period?(_chart_manager.ChartManager.instance.getChart().strIsLine=!0,_chart_manager.ChartManager.instance.setChartStyle("frame0.k0","Line")):(_chart_manager.ChartManager.instance.getChart().strIsLine=!1,_chart_manager.ChartManager.instance.setChartStyle("frame0.k0",_chart_settings.ChartSettings.get().charts.chartStyle)),_chart_manager.ChartManager.instance.getChart().setSymbol(t)}},{key:"calcPeriodWeight",value:function(t){var e=t;"line"!==t&&(e=_kline.default.instance.periodMap[_kline.default.instance.tagMapPeriod[t]]);var n=_chart_settings.ChartSettings.get().charts.period_weight;for(var r in n)n[r]>n[e]&&(n[r]-=1);n[e]=8,_chart_settings.ChartSettings.save()}},{key:"subscribeCallback",value:function(t){Control.requestSuccessHandler(JSON.parse(t.body))}},{key:"socketConnect",value:function(){if(!_kline.default.instance.stompClient||!_kline.default.instance.socketConnected){if(_kline.default.instance.enableSockjs){var t=new SockJS(_kline.default.instance.url);_kline.default.instance.stompClient=Stomp.over(t)}else _kline.default.instance.stompClient=Stomp.client(_kline.default.instance.url);_kline.default.instance.socketConnected=!0}1!==_kline.default.instance.stompClient.ws.readyState?(_kline.default.instance.debug||(_kline.default.instance.stompClient.debug=null),_kline.default.instance.stompClient.connect({},function(){_kline.default.instance.stompClient.subscribe("/user"+_kline.default.instance.subscribePath,Control.subscribeCallback),_kline.default.instance.subscribed=_kline.default.instance.stompClient.subscribe(_kline.default.instance.subscribePath+"/"+_kline.default.instance.symbol+"/"+_kline.default.instance.range,Control.subscribeCallback),Control.requestData(!0)},function(){_kline.default.instance.stompClient.disconnect(),console.log("DEBUG: reconnect in 5 seconds ..."),setTimeout(function(){Control.socketConnect()},5e3)})):console.log("DEBUG: already connected")}}]),Control}();exports.Control=Control,Control.refreshCounter=0,Control.refreshHandler=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPoint=void 0;var o=n(0),a=n(1),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}}(n(2)),u=n(5);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i=function(t){function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=l(this,h(r).call(this,t))).pos={index:-1,value:-1},e.state=r.state.Hide,e}var e,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(r,a.NamedObject),e=r,(n=[{key:"getChartObjects",value:function(){var t=o.ChartManager.instance,e=t.getDataSource("frame0.k0");if(null===e||!u.Util.isInstance(e,s.MainDataSource))return null;var n=t.getTimeline("frame0.k0");if(null===n)return null;var r=t.getRange("frame0.k0.main");return null===r?null:{pMgr:t,pCDS:e,pTimeline:n,pRange:r}}},{key:"setPosXY",value:function(t,e){var n=this.getChartObjects(),r=n.pTimeline.toIndex(t),i=n.pRange.toValue(e),o=this.snapValue(r,i);null!==o&&(i=o),this.setPosIV(r,i)}},{key:"setPosXYNoSnap",value:function(t,e){var n=this.getChartObjects(),r=n.pTimeline.toIndex(t),i=n.pRange.toValue(e);this.setPosIV(r,i)}},{key:"setPosIV",value:function(t,e){this.pos={index:t,value:e}}},{key:"getPosXY",value:function(){var t=this.getChartObjects();return{x:t.pTimeline.toItemCenter(this.pos.index),y:t.pRange.toY(this.pos.value)}}},{key:"getPosIV",value:function(){return{i:this.pos.index,v:this.pos.value}}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"isSelected",value:function(t,e){var n=this.getPosXY();return!(t<n.x-4||t>n.x+4||e<n.y-4||e>n.y+4)&&(this.setState(r.state.Highlight),!0)}},{key:"snapValue",value:function(t,e){var n=this.getChartObjects(),r=null,i=Math.floor(n.pTimeline.getFirstIndex()),o=Math.floor(n.pTimeline.getLastIndex());if(t<i||o<t)return r;var a=n.pRange.toY(e),s=n.pCDS.getDataAt(t);if(null==s)return r;var u=null;u=0<t?n.pCDS.getDataAt(t-1):n.pCDS.getDataAt(t);var c=n.pMgr.getChartStyle(n.pCDS.getFrameName()),l=n.pRange.toY(s.open),h=n.pRange.toY(s.high),d=n.pRange.toY(s.low),p=n.pRange.toY(s.close);"CandleStickHLC"===c&&(l=n.pRange.toY(u.close));var f=Math.abs(l-a),g=Math.abs(h-a),_=Math.abs(d-a),v=Math.abs(p-a);return f<=g&&f<=_&&f<=v&&f<6&&(r=s.open),g<=f&&g<=_&&g<=v&&g<6&&(r=s.high),_<=f&&_<=g&&_<=v&&_<6&&(r=s.low),v<=f&&v<=g&&v<=_&&v<6&&(r=s.close),r}}])&&c(e.prototype,n),i&&c(e,i),r}();(e.CPoint=i).state={Hide:0,Show:1,Highlight:2}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CArrowLineObject=e.CPriceLineObject=e.CVertiStraightLineObject=e.CTriParallelLineObject=e.CStraightLineObject=e.CSegLineObject=e.CRayLineObject=e.CHoriStraightLineObject=e.CHoriSegLineObject=e.CHoriRayLineObject=e.CFibRetraceObject=e.CFibFansObject=e.CBiParallelRayLineObject=e.CBiParallelLineObject=e.CBandLineObject=e.CTriToolObject=e.CBiToolObject=e.CToolObject=void 0;var o=n(0),r=n(1),y=n(11),a=n(5),s=i(n(2)),u=i(n(13));function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function f(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(t){function h(t){var e;return d(this,h),(e=f(this,w(h).call(this,t))).drawer=null,e.state=h.state.BeforeDraw,e.points=[],e.step=0,e}return g(h,r.NamedObject),p(h,[{key:"getChartObjects",value:function(){var t=o.ChartManager.instance,e=t.getDataSource("frame0.k0");if(null===e||!a.Util.isInstance(e,s.MainDataSource))return null;var n=t.getTimeline("frame0.k0");if(null===n)return null;var r=t.getArea("frame0.k0.main");if(null===r)return null;var i=t.getRange("frame0.k0.main");return null===i?null:{pMgr:t,pCDS:e,pTimeline:n,pArea:r,pRange:i}}},{key:"isValidMouseXY",value:function(t,e){var n=this.getChartObjects(),r=n.pArea.getLeft(),i=n.pArea.getTop(),o=n.pArea.getRight(),a=n.pArea.getBottom();return!(t<r||o<t||e<i||a<e)}},{key:"getPlotter",value:function(){return this.drawer}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"addPoint",value:function(t){this.points.push(t)}},{key:"getPoint",value:function(t){return this.points[t]}},{key:"acceptMouseMoveEvent",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===h.state.BeforeDraw?this.setBeforeDrawPos(t,e):this.state===h.state.Draw?this.setDrawPos(t,e):this.state===h.state.AfterDraw&&this.setAfterDrawPos(t,e),!0)}},{key:"acceptMouseDownEvent",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===h.state.BeforeDraw?(this.setDrawPos(t,e),this.setState(h.state.Draw)):this.state===h.state.Draw?(this.setAfterDrawPos(t,e),0===this.step&&this.setState(h.state.AfterDraw)):this.state===h.state.AfterDraw&&(h.prototype.isSelected(t,e)?(this.setDrawPos(t,e),this.setState(h.state.Draw)):(this.oldx=t,this.oldy=e)),!0)}},{key:"acceptMouseDownMoveEvent",value:function(t,e){if(!1===this.isValidMouseXY(t,e))return!1;if(this.state===h.state.Draw)this.setDrawPos(t,e);else if(this.state===h.state.AfterDraw){var n=this.getChartObjects(),r=n.pTimeline.getItemWidth();n.pRange;if(Math.abs(t-this.oldx)<r&&0===Math.abs(e-this.oldy))return!0;var i=n.pTimeline.toIndex(this.oldx),o=n.pRange.toValue(this.oldy),a=n.pTimeline.toIndex(t),s=n.pRange.toValue(e);this.oldx=t,this.oldy=e;var u=a-i,c=s-o;for(var l in this.points)this.points[l].pos.index+=u,this.points[l].pos.value+=c}return!0}},{key:"acceptMouseUpEvent",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===h.state.Draw&&(this.setAfterDrawPos(t,e),0===this.step&&this.setState(h.state.AfterDraw),!0))}},{key:"setBeforeDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e),this.points[n].setState(y.CPoint.state.Show)}},{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].getState()===y.CPoint.state.Highlight&&this.points[n].setPosXY(t,e)}},{key:"setAfterDrawPos",value:function(t,e){for(var n in 0!==this.step&&(this.step-=1),this.points)this.points[n].setState(y.CPoint.state.Hide);0===this.step&&this.getChartObjects().pMgr.setNormalMode()}},{key:"isSelected",value:function(t,e){var n=!1;for(var r in this.points)if(this.points[r].isSelected(t,e)){this.points[r].setState(y.CPoint.state.Highlight),n=!0;break}return!0===n&&(this.select(),!0)}},{key:"select",value:function(){for(var t in this.points)this.points[t].getState()===y.CPoint.state.Hide&&this.points[t].setState(y.CPoint.state.Show)}},{key:"unselect",value:function(){for(var t in this.points)this.points[t].getState()!==y.CPoint.state.Hide&&this.points[t].setState(y.CPoint.state.Hide)}},{key:"calcDistance",value:function(t,e,n){var r=t.getPosXY().x,i=t.getPosXY().y,o=e.getPosXY().x,a=e.getPosXY().y,s=n.getPosXY().x,u=n.getPosXY().y,c=r-s,l=i-u,h=o-s,d=a-u;return Math.abs(c*d-l*h)/Math.sqrt(Math.pow(o-r,2)+Math.pow(a-i,2))}},{key:"calcGap",value:function(t,e,n){var r=t.sx,i=t.sy,o=t.ex,a=t.ey,s=r-e,u=i-n,c=o-e,l=a-n;return Math.abs(s*l-u*c)/Math.sqrt(Math.pow(o-r,2)+Math.pow(a-i,2))}},{key:"isWithRect",value:function(t,e,n){var r=t.getPosXY().x,i=t.getPosXY().y,o=e.getPosXY().x,a=e.getPosXY().y,s=n.getPosXY().x,u=n.getPosXY().y;return o<r?(r+=4,o-=4):(r-=4,o+=4),a<i?(i+=4,a-=4):(i-=4,a+=4),r<=s&&s<=o&&i<=u&&u<=a||(s<=r&&o<=s&&i<=u&&u<=a||(r<=s&&s<=o&&u<=i&&a<=u||s<=r&&o<=s&&u<=i&&a<=u))}}]),h}();(e.CToolObject=v).state={BeforeDraw:0,Draw:1,AfterDraw:2};var C=function(t){function n(t){var e;return d(this,n),(e=f(this,w(n).call(this,t))).addPoint(new y.CPoint(t)),e.addPoint(new y.CPoint(t)),e}return g(n,v),p(n,[{key:"setBeforeDrawPos",value:function(t,e){this.step=1,b(w(n.prototype),"setBeforeDrawPos",this).call(this,t,e),this.getPoint(0).setState(y.CPoint.state.Show),this.getPoint(1).setState(y.CPoint.state.Highlight)}}]),n}();e.CBiToolObject=C;var m=function(t){function n(t){var e;return d(this,n),(e=f(this,w(n).call(this,t))).addPoint(new y.CPoint(t)),e.addPoint(new y.CPoint(t)),e.addPoint(new y.CPoint(t)),e}return g(n,v),p(n,[{key:"setBeforeDrawPos",value:function(t,e){this.step=2,b(w(n.prototype),"setBeforeDrawPos",this).call(this,t,e),this.getPoint(0).setState(y.CPoint.state.Show),this.getPoint(1).setState(y.CPoint.state.Show),this.getPoint(2).setState(y.CPoint.state.Highlight)}},{key:"setAfterDrawPos",value:function(t,e){if(0!==this.step&&(this.step-=1),0===this.step)for(var n in this.points)this.points[n].setState(y.CPoint.state.Hide);else this.getPoint(0).setState(y.CPoint.state.Show),this.getPoint(1).setState(y.CPoint.state.Highlight),this.getPoint(2).setState(y.CPoint.state.Show);0===this.step&&this.getChartObjects().pMgr.setNormalMode()}}]),n}();e.CTriToolObject=m;var E=function(t){function s(t){var e;return d(this,s),(e=f(this,w(s).call(this,t))).drawer=new u.DrawBandLinesPlotter(t,h(h(e))),e}return g(s,C),p(s,[{key:"isSelected",value:function(t,e){if(!0===b(w(s.prototype),"isSelected",this).call(this,t,e))return!0;new y.CPoint("frame0.k0").setPosXY(t,e);this.getPoint(0).getPosXY().x;for(var n=this.getPoint(0).getPosXY().y,r=(this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y),i=[100,87.5,75,62.5,50,37.5,25,12.5,0],o=0;o<i.length;o++){var a=n+(100-i[o])/100*(r-n);if(a<e+4&&e-4<a)return this.select(),!0}return!1}}]),s}();e.CBandLineObject=E;var x=function(t){function l(t){var e;return d(this,l),(e=f(this,w(l).call(this,t))).drawer=new u.DrawBiParallelLinesPlotter(t,h(h(e))),e}return g(l,m),p(l,[{key:"isSelected",value:function(t,e){if(!0===b(w(l.prototype),"isSelected",this).call(this,t,e))return!0;var n=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,o=this.getPoint(1).getPosXY().y,a=this.getPoint(2).getPosXY().x,s=this.getPoint(2).getPosXY().y,u={sx:n,sy:r,ex:a,ey:s},c={sx:i,sy:o,ex:n-(n-i+(n-a)),ey:r-(r-o+(r-s))};return!(4<this.calcGap(u,t,e)&&4<this.calcGap(c,t,e))}}]),l}();e.CBiParallelLineObject=x;var k=function(t){function l(t){var e;return d(this,l),(e=f(this,w(l).call(this,t))).drawer=new u.DrawBiParallelRayLinesPlotter(t,h(h(e))),e}return g(l,m),p(l,[{key:"isSelected",value:function(t,e){if(!0===b(w(l.prototype),"isSelected",this).call(this,t,e))return!0;var n=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,o=this.getPoint(1).getPosXY().y,a=this.getPoint(2).getPosXY().x,s=this.getPoint(2).getPosXY().y,u={sx:n,sy:r,ex:a,ey:s},c={sx:i,sy:o,ex:n-(n-i+(n-a)),ey:r-(r-o+(r-s))};return(u.sx<u.ex&&u.sx-4<t||u.ex<u.sx&&t<u.sx+4||c.sx<c.ex&&c.sx-4<t||c.ex<c.sx&&t<c.sx+4)&&(!(4<this.calcGap(u,t,e)&&4<this.calcGap(c,t,e))&&(this.select(),!0))}}]),l}();e.CBiParallelRayLineObject=k;var S=function(t){function m(t){var e;return d(this,m),(e=f(this,w(m).call(this,t))).drawer=new u.DrawFibFansPlotter(t,h(h(e))),e}return g(m,C),p(m,[{key:"isSelected",value:function(t,e){if(!0===b(w(m.prototype),"isSelected",this).call(this,t,e))return!0;var n=new y.CPoint("frame0.k0");n.setPosXY(t,e);for(var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,o=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,s=this.getChartObjects(),u={left:s.pArea.getLeft(),top:s.pArea.getTop(),right:s.pArea.getRight(),bottom:s.pArea.getBottom()},c=[0,38.2,50,61.8],l=0;l<c.length;l++){var h={x:r,y:i},d={x:o,y:i+(100-c[l])/100*(a-i)},p=this.getRectCrossPt(u,h,d),f=Math.pow(p[0].x-r,2)+Math.pow(p[0].y-i,2),g=Math.pow(p[0].x-o,2)+Math.pow(p[0].y-a,2)<f?{x:p[0].x,y:p[0].y}:{x:p[1].x,y:p[1].y};if(!(r<g.x&&t<r)&&!(g.x<r&&r<t)){var _=new y.CPoint("frame0.k0");_.setPosXY(r,i);var v=new y.CPoint("frame0.k0");if(v.setPosXY(g.x,g.y),!(4<this.calcDistance(_,v,n)))return this.select(),!0}}return!1}}]),m}();e.CFibFansObject=S;var A=function(t){function s(t){var e;return d(this,s),(e=f(this,w(s).call(this,t))).drawer=new u.DrawFibRetracePlotter(t,h(h(e))),e}return g(s,C),p(s,[{key:"isSelected",value:function(t,e){if(!0===b(w(s.prototype),"isSelected",this).call(this,t,e))return!0;new y.CPoint("frame0.k0").setPosXY(t,e);this.getPoint(0).getPosXY().x;for(var n=this.getPoint(0).getPosXY().y,r=(this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y),i=[100,78.6,61.8,50,38.2,23.6,0],o=0;o<i.length;o++){var a=n+(100-i[o])/100*(r-n);if(a<e+4&&e-4<a)return this.select(),!0}return!1}}]),s}();e.CFibRetraceObject=A;var P=function(t){function o(t){var e;return d(this,o),(e=f(this,w(o).call(this,t))).drawer=new u.DrawHoriRayLinesPlotter(t,h(h(e))),e}return g(o,C),p(o,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===y.CPoint.state.Highlight)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===y.CPoint.state.Highlight&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"isSelected",value:function(t,e){if(!0===b(w(o.prototype),"isSelected",this).call(this,t,e))return!0;new y.CPoint("frame0.k0").setPosXY(t,e);var n=this.getPoint(0).getPosXY().y,r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(n+4<e||e<n-4)&&(!(r<i&&t<r-4)&&(!(i<r&&r+4<t)&&(this.select(),!0)))}}]),o}();e.CHoriRayLineObject=P;var T=function(t){function o(t){var e;return d(this,o),(e=f(this,w(o).call(this,t))).drawer=new u.DrawHoriSegLinesPlotter(t,h(h(e))),e}return g(o,C),p(o,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===y.CPoint.state.Highlight)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===y.CPoint.state.Highlight&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"isSelected",value:function(t,e){if(!0===b(w(o.prototype),"isSelected",this).call(this,t,e))return!0;new y.CPoint("frame0.k0").setPosXY(t,e);var n=this.getPoint(0).getPosXY().y,r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(n+4<e||e<n-4)&&(!(i<r&&(r+4<t||t<i-4))&&(!(r<i&&(t<r-4||i+4<t))&&(this.select(),!0)))}}]),o}();e.CHoriSegLineObject=T;var I=function(t){function r(t){var e;return d(this,r),(e=f(this,w(r).call(this,t))).drawer=new u.DrawHoriStraightLinesPlotter(t,h(h(e))),e}return g(r,C),p(r,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e)}},{key:"isSelected",value:function(t,e){if(!0===b(w(r.prototype),"isSelected",this).call(this,t,e))return!0;new y.CPoint("frame0.k0").setPosXY(t,e);var n=this.getPoint(0).getPosXY().y;return!(n+4<e||e<n-4)&&(this.select(),!0)}}]),r}();e.CHoriStraightLineObject=I;var O=function(t){function o(t){var e;return d(this,o),(e=f(this,w(o).call(this,t))).drawer=new u.DrawRayLinesPlotter(t,h(h(e))),e}return g(o,C),p(o,[{key:"isSelected",value:function(t,e){if(!0===b(w(o.prototype),"isSelected",this).call(this,t,e))return!0;var n=new y.CPoint("frame0.k0");n.setPosXY(t,e);var r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(r<i&&t<r-4)&&(!(i<r&&r+4<t)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),n)<4&&(this.select(),!0)))}}]),o}();e.CRayLineObject=O;var R=function(t){function r(t){var e;return d(this,r),(e=f(this,w(r).call(this,t))).drawer=new u.DrawSegLinesPlotter(t,h(h(e))),e}return g(r,C),p(r,[{key:"isSelected",value:function(t,e){if(!0===b(w(r.prototype),"isSelected",this).call(this,t,e))return!0;var n=new y.CPoint("frame0.k0");return n.setPosXY(t,e),!1!==this.isWithRect(this.getPoint(0),this.getPoint(1),n)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),n)<4&&(this.select(),!0))}}]),r}();e.CSegLineObject=R;var N=function(t){function r(t){var e;return d(this,r),(e=f(this,w(r).call(this,t))).drawer=new u.DrawStraightLinesPlotter(t,h(h(e))),e}return g(r,C),p(r,[{key:"isSelected",value:function(t,e){if(!0===b(w(r.prototype),"isSelected",this).call(this,t,e))return!0;var n=new y.CPoint("frame0.k0");return n.setPosXY(t,e),this.calcDistance(this.getPoint(0),this.getPoint(1),n)<4&&(this.select(),!0)}}]),r}();e.CStraightLineObject=N;var D=function(t){function v(t){var e;return d(this,v),(e=f(this,w(v).call(this,t))).drawer=new u.DrawTriParallelLinesPlotter(t,h(h(e))),e}return g(v,m),p(v,[{key:"isSelected",value:function(t,e){if(!0===b(w(v.prototype),"isSelected",this).call(this,t,e))return!0;this.getChartObjects();var n=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,o=this.getPoint(1).getPosXY().y,a=this.getPoint(2).getPosXY().x,s=this.getPoint(2).getPosXY().y,u=n-(n-i+(n-a)),c=r-(r-o+(r-s)),l={sx:n,sy:r,ex:a,ey:s},h={sx:i,sy:o,ex:u,ey:c},d=i-n,p=o-r,f=u-a,g=c-s,_={sx:Math.abs(d-n),sy:Math.abs(p-r),ex:Math.abs(f-a),ey:Math.abs(g-s)};return!(4<this.calcGap(l,t,e)&&4<this.calcGap(h,t,e)&&4<this.calcGap(_,t,e))&&(this.select(),!0)}}]),v}();e.CTriParallelLineObject=D;var M=function(t){function r(t){var e;return d(this,r),(e=f(this,w(r).call(this,t))).drawer=new u.DrawVertiStraightLinesPlotter(t,h(h(e))),e}return g(r,C),p(r,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e)}},{key:"isSelected",value:function(t,e){if(!0===b(w(r.prototype),"isSelected",this).call(this,t,e))return!0;new y.CPoint("frame0.k0").setPosXY(t,e);var n=this.getPoint(0).getPosXY().x;return!(n+4<t||t<n-4)&&(this.select(),!0)}}]),r}();e.CVertiStraightLineObject=M;var L=function(t){function i(t){var e;return d(this,i),(e=f(this,w(i).call(this,t))).drawer=new u.DrawPriceLinesPlotter(t,h(h(e))),e}return g(i,R),p(i,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e)}},{key:"isSelected",value:function(t,e){if(!0===b(w(i.prototype),"isSelected",this).call(this,t,e))return!0;new y.CPoint("frame0.k0").setPosXY(t,e);var n=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y;this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y;return!(t<n-4)&&(!(r+4<=e||e<=r-4)&&(this.select(),!0))}}]),i}();e.CPriceLineObject=L;var j=function(t){function n(t){var e;return d(this,n),(e=f(this,w(n).call(this,t))).drawer=new u.DrawArrowLinesPlotter(t,h(h(e))),e}return g(n,R),n}();e.CArrowLineObject=j},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDynamicLinePlotter=e.DrawFibFansPlotter=e.DrawBandLinesPlotter=e.DrawFibRetracePlotter=e.BandLinesPlotter=e.DrawTriParallelLinesPlotter=e.DrawBiParallelRayLinesPlotter=e.DrawBiParallelLinesPlotter=e.ParallelLinesPlotter=e.DrawPriceLinesPlotter=e.DrawVertiStraightLinesPlotter=e.DrawHoriSegLinesPlotter=e.DrawHoriRayLinesPlotter=e.DrawHoriStraightLinesPlotter=e.DrawArrowLinesPlotter=e.DrawRayLinesPlotter=e.DrawSegLinesPlotter=e.DrawStraightLinesPlotter=e.CToolPlotter=e.RangeSelectionPlotter=e.TimelineSelectionPlotter=e.SelectionPlotter=e.LastClosePlotter=e.LastVolumePlotter=e.COrderGraphPlotter=e.RangePlotter=e.TimelinePlotter=e.MinMaxPlotter=e.IndicatorInfoPlotter=e.IndicatorPlotter=e.MainInfoPlotter=e.OHLCPlotter=e.CandlestickHLCPlotter=e.CandlestickPlotter=e.CGridPlotter=e.TimelineAreaBackgroundPlotter=e.RangeAreaBackgroundPlotter=e.MainAreaBackgroundPlotter=e.BackgroundPlotter=e.Plotter=void 0;var r,w=(r=n(3))&&r.__esModule?r:{default:r},o=n(1),R=n(0),N=n(5),a=n(11),E=i(n(20)),D=i(n(6)),x=i(n(14)),M=i(n(2)),s=i(n(12));function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function d(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var L=function(t){function i(t){return c(this,i),d(this,p(i).call(this,t))}return f(i,o.NamedObject),h(i,null,[{key:"drawLine",value:function(t,e,n,r,i){t.beginPath(),t.moveTo(.5+(e<<0),.5+(n<<0)),t.lineTo(.5+(r<<0),.5+(i<<0)),t.stroke()}},{key:"drawLines",value:function(t,e){var n,r=e.length;for(t.beginPath(),t.moveTo(e[0].x,e[0].y),n=1;n<r;n++)t.lineTo(e[n].x,e[n].y);if(i.isChrome)for(t.moveTo(e[0].x,e[0].y),n=1;n<r;n++)t.lineTo(e[n].x,e[n].y);t.stroke()}},{key:"drawDashedLine",value:function(t,e,n,r,i,o,a){o<2&&(o=2);var s=r-e,u=i-n;if(t.beginPath(),0===u){for(var c=s/o+.5<<0,l=0;l<c;l++)t.rect(e,n,a,1),e+=o;t.fill()}else{for(var h=Math.sqrt(s*s+u*u)/o+.5<<0,d=(s/=h)*a/o,p=(u/=h)*a/o,f=0;f<h;f++)t.moveTo(e+.5,n+.5),t.lineTo(e+.5+d,n+.5+p),e+=s,n+=u;t.stroke()}}},{key:"createHorzDashedLine",value:function(t,e,n,r,i,o){i<2&&(i=2);for(var a=(n-e)/i+.5<<0,s=0;s<a;s++)t.rect(e,r,o,1),e+=i}},{key:"createRectangles",value:function(t,e){t.beginPath();var n,r,i=e.length;for(r=0;r<i;r++)n=e[r],t.rect(n.x,n.y,n.w,n.h)}},{key:"createPolygon",value:function(t,e){t.beginPath(),t.moveTo(e[0].x+.5,e[0].y+.5);var n,r=e.length;for(n=1;n<r;n++)t.lineTo(e[n].x+.5,e[n].y+.5);t.closePath()}},{key:"drawString",value:function(t,e,n){var r=t.measureText(e).width;return!(n.w<r)&&(t.fillText(e,n.x,n.y),n.x+=r,n.w-=r,!0)}}]),i}();(e.Plotter=L).isChrome=null!==navigator.userAgent.toLowerCase().match(/chrome/);var _=function(t){function n(t){var e;return c(this,n),(e=d(this,p(n).call(this,t)))._color=D.Theme.Color.Background,e}return f(n,L),h(n,[{key:"getColor",value:function(){return this._color}},{key:"setColor",value:function(t){this._color=t}},{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTheme(this.getFrameName());t.fillStyle=r.getColor(this._color),t.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight())}}]),n}();e.BackgroundPlotter=_;var v=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,_),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getRange(this.getAreaName()),o=e.getTheme(this.getFrameName()),a=n.getRect();if(!n.isChanged()&&!r.isUpdated()&&!i.isUpdated()){var s=r.getFirstIndex(),u=r.getLastIndex()-2,c=Math.max(s,u);a.X=r.toColumnLeft(c),a.Width=n.getRight()-a.X}t.fillStyle=o.getColor(this._color),t.fillRect(a.X,a.Y,a.Width,a.Height)}}]),e}();e.MainAreaBackgroundPlotter=v;var m=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,_),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=this.getAreaName(),r=e.getArea(n),i=e.getRange(n.substring(0,n.lastIndexOf("Range")));if("main"===i.getNameObject().getCompAt(2)||r.isChanged()||i.isUpdated()){var o=e.getTheme(this.getFrameName());t.fillStyle=o.getColor(this._color),t.fillRect(r.getLeft(),r.getTop(),r.getWidth(),r.getHeight())}}}]),e}();e.RangeAreaBackgroundPlotter=m;var y=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,_),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName());if(n.isChanged()||r.isUpdated()){var i=e.getTheme(this.getFrameName());t.fillStyle=i.getColor(this._color),t.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight())}}}]),e}();e.TimelineAreaBackgroundPlotter=y;var b=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,o.NamedObject),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getRange(this.getAreaName()),o=!1;if(!n.isChanged()&&!r.isUpdated()&&!i.isUpdated()){var a=r.getFirstIndex(),s=r.getLastIndex(),u=Math.max(a,s-2),c=r.toColumnLeft(u);t.save(),t.rect(c,n.getTop(),n.getRight()-c,n.getHeight()),t.clip(),o=!0}var l=e.getTheme(this.getFrameName());t.fillStyle=l.getColor(D.Theme.Color.Grid0),t.beginPath();var h=4,d=1;L.isChrome&&(h=4,d=1);var p=i.getGradations();for(var f in p)L.createHorzDashedLine(t,n.getLeft(),n.getRight(),i.toY(p[f]),h,d);t.fill(),o&&t.restore()}}]),e}();e.CGridPlotter=b;var C=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,o.NamedObject),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getDataSource(this.getDataSourceName());if(!(n.getDataCount()<1)){var r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),o=e.getRange(this.getAreaName());if(0!==o.getRange()){var a,s=e.getTheme(this.getFrameName()),u=N.Util.isInstance(s,D.DarkTheme),c=i.getFirstIndex(),l=i.getLastIndex();a=r.isChanged()||i.isUpdated()||o.isUpdated()?c:Math.max(c,l-2);for(var h=i.getColumnWidth(),d=i.getItemWidth(),p=i.toItemLeft(a),f=i.toItemCenter(a),g=[],_=[],v=[],m=[],y=a;y<l;y++){var b=n.getDataAt(y),w=o.toY(b.high),C=o.toY(b.low),E=b.open,x=b.close;if(E<x){var k=o.toY(x),S=o.toY(E),A=Math.max(S-k,1);1<A&&1<d&&u?g.push({x:p+.5,y:k+.5,w:d-1,h:A-1}):_.push({x:p,y:k,w:Math.max(d,1),h:Math.max(A,1)}),b.high>x&&(w=Math.min(w,k-1),_.push({x:f,y:w,w:1,h:k-w})),E>b.low&&(C=Math.max(C,S+1),_.push({x:f,y:S,w:1,h:C-S}))}else if(x===E){var P=o.toY(x);v.push({x:p,y:P,w:Math.max(d,1),h:1}),b.high>x&&(w=Math.min(w,P-1)),E>b.low&&(C=Math.max(C,P+1)),w<C&&v.push({x:f,y:w,w:1,h:C-w})}else{var T=o.toY(E),I=o.toY(x),O=Math.max(I-T,1);m.push({x:p,y:T,w:Math.max(d,1),h:Math.max(O,1)}),b.high>E&&(w=Math.min(w,T-1)),x>b.low&&(C=Math.max(C,I+1)),w<C&&m.push({x:f,y:w,w:1,h:C-w})}p+=h,f+=h}0<g.length&&(t.fillStyle="#e66b41",L.createRectangles(t,g),t.fill()),0<_.length&&(t.fillStyle=s.getColor(D.Theme.Color.Positive),L.createRectangles(t,_),t.fill()),0<v.length&&(t.fillStyle=s.getColor(D.Theme.Color.Negative),L.createRectangles(t,v),t.fill()),0<m.length&&(t.fillStyle=s.getColor(D.Theme.Color.Negative),L.createRectangles(t,m),t.fill())}}}}]),e}();e.CandlestickPlotter=C;var k=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,L),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getDataSource(this.getDataSourceName());if(N.Util.isInstance(n,M.MainDataSource)&&!(n.getDataCount()<1)){var r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),o=e.getRange(this.getAreaName());if(0!==o.getRange()){var a,s=e.getTheme(this.getFrameName()),u=N.Util.isInstance(s,D.DarkTheme),c=i.getFirstIndex(),l=i.getLastIndex();a=r.isChanged()||i.isUpdated()||o.isUpdated()?c:Math.max(c,l-2);for(var h=i.getColumnWidth(),d=i.getItemWidth(),p=i.toItemLeft(a),f=i.toItemCenter(a),g=[],_=[],v=[],m=[],y=a;y<l;y++){var b=n.getDataAt(y),w=o.toY(b.high),C=o.toY(b.low),E=b.open;0<y&&(E=n.getDataAt(y-1).close);var x=b.close;if(E<x){var k=o.toY(x),S=o.toY(E),A=Math.max(S-k,1);1<A&&1<d&&u?g.push({x:p+.5,y:k+.5,w:d-1,h:A-1}):_.push({x:p,y:k,w:Math.max(d,1),h:Math.max(A,1)}),b.high>x&&(w=Math.min(w,k-1),_.push({x:f,y:w,w:1,h:k-w})),E>b.low&&(C=Math.max(C,S+1),_.push({x:f,y:S,w:1,h:C-S}))}else if(x===E){var P=o.toY(x);v.push({x:p,y:P,w:Math.max(d,1),h:1}),b.high>x&&(w=Math.min(w,P-1)),E>b.low&&(C=Math.max(C,P+1)),w<C&&v.push({x:f,y:w,w:1,h:C-w})}else{var T=o.toY(E),I=o.toY(x),O=Math.max(I-T,1);m.push({x:p,y:T,w:Math.max(d,1),h:Math.max(O,1)}),b.high>E&&(w=Math.min(w,T-1)),x>b.low&&(C=Math.max(C,I+1)),w<C&&m.push({x:f,y:w,w:1,h:C-w})}p+=h,f+=h}0<g.length&&(t.strokeStyle=s.getColor(D.Theme.Color.Positive),L.createRectangles(t,g),t.stroke()),0<_.length&&(t.fillStyle=s.getColor(D.Theme.Color.Positive),L.createRectangles(t,_),t.fill()),0<v.length&&(t.fillStyle=s.getColor(D.Theme.Color.Negative),L.createRectangles(t,v),t.fill()),0<m.length&&(t.fillStyle=s.getColor(D.Theme.Color.Negative),L.createRectangles(t,m),t.fill())}}}}]),e}();e.CandlestickHLCPlotter=k;var S=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,L),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getDataSource(this.getDataSourceName());if(N.Util.isInstance(n,M.MainDataSource)&&!(n.getDataCount()<1)){var r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),o=e.getRange(this.getAreaName());if(0!==o.getRange()){var a,s=e.getTheme(this.getFrameName()),u=i.getFirstIndex(),c=i.getLastIndex();a=r.isChanged()||i.isUpdated()||o.isUpdated()?u:Math.max(u,c-2);for(var l=i.getColumnWidth(),h=i.getItemWidth()>>1,d=i.toItemLeft(a),p=i.toItemCenter(a),f=(i.getItemWidth(),[]),g=[],_=[],v=a;v<c;v++){var m=n.getDataAt(v),y=o.toY(m.high),b=o.toY(m.low),w=Math.max(b-y,1);if(m.close>m.open){var C=o.toY(m.close),E=o.toY(m.open);f.push({x:p,y:y,w:1,h:w}),f.push({x:d,y:C,w:h,h:1}),f.push({x:p,y:E,w:h,h:1})}else if(m.close===m.open){var x=o.toY(m.close);g.push({x:p,y:y,w:1,h:w}),g.push({x:d,y:x,w:h,h:1}),g.push({x:p,y:x,w:h,h:1})}else{var k=o.toY(m.open),S=o.toY(m.close);_.push({x:p,y:y,w:1,h:w}),_.push({x:d,y:k,w:h,h:1}),_.push({x:p,y:S,w:h,h:1})}d+=l,p+=l,l}0<f.length&&(t.fillStyle=s.getColor(D.Theme.Color.Positive),L.createRectangles(t,f),t.fill()),0<g.length&&(t.fillStyle=s.getColor(D.Theme.Color.Negative),L.createRectangles(t,g),t.fill()),0<_.length&&(t.fillStyle=s.getColor(D.Theme.Color.Negative),L.createRectangles(t,_),t.fill())}}}}]),e}();e.OHLCPlotter=S;var A=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,L),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getDataSource(this.getDataSourceName()),o=e.getTheme(this.getFrameName());t.font=o.getFont(D.Theme.Font.Default),t.textAlign="left",t.textBaseline="top",t.fillStyle=o.getColor(D.Theme.Color.Text4);var a={x:n.getLeft()+4,y:n.getTop()+2,w:n.getWidth()-8,h:20},s=r.getSelectedIndex();if(!(s<0)){var u,c=i.getDataAt(s),l=i.getDecimalDigits(),h=new Date(c.date),d=(h.getFullYear(),N.Util.formatTime(h.getMonth()+1),N.Util.formatTime(h.getDate()),N.Util.formatTime(h.getHours()),N.Util.formatTime(h.getMinutes()),e.getLanguage());if("zh-cn"===d){if(!L.drawString(t,"  开: "+c.open.toFixed(l),a))return;if(!L.drawString(t,"  高: "+c.high.toFixed(l),a))return;if(!L.drawString(t,"  低: "+c.low.toFixed(l),a))return;if(!L.drawString(t,"  收: "+c.close.toFixed(l),a))return}else if("en-us"===d){if(!L.drawString(t,"  O: "+c.open.toFixed(l),a))return;if(!L.drawString(t,"  H: "+c.high.toFixed(l),a))return;if(!L.drawString(t,"  L: "+c.low.toFixed(l),a))return;if(!L.drawString(t,"  C: "+c.close.toFixed(l),a))return}else if("zh-tw"===d){if(!L.drawString(t,"  開: "+c.open.toFixed(l),a))return;if(!L.drawString(t,"  高: "+c.high.toFixed(l),a))return;if(!L.drawString(t,"  低: "+c.low.toFixed(l),a))return;if(!L.drawString(t,"  收: "+c.close.toFixed(l),a))return}if(0<s){if("zh-cn"===d){if(!L.drawString(t,"  涨幅: ",a))return}else if("en-us"===d){if(!L.drawString(t,"  CHANGE: ",a))return}else if("zh-tw"===d&&!L.drawString(t,"  漲幅: ",a))return;var p,f=i.getDataAt(s-1);if(0<=(p=(c.close-f.close)/f.close*100?(c.close-f.close)/f.close*100:0)?(p=" "+p.toFixed(2),t.fillStyle=o.getColor(D.Theme.Color.TextPositive)):(p=p.toFixed(2),t.fillStyle=o.getColor(D.Theme.Color.TextNegative)),!L.drawString(t,p,a))return;if(t.fillStyle=o.getColor(D.Theme.Color.Text4),!L.drawString(t," %",a))return}if(u=(c.high-c.low)/c.low*100?(c.high-c.low)/c.low*100:0,"zh-cn"===d){if(!L.drawString(t,"  振幅: "+u.toFixed(2)+" %",a))return}else if("en-us"===d){if(!L.drawString(t,"  AMPLITUDE: "+u.toFixed(2)+" %",a))return}else if("zh-tw"===d&&!L.drawString(t,"  振幅: "+u.toFixed(2)+" %",a))return;var g=e.getDataProvider(this.getAreaName()+".secondary");if(void 0!==g){var _,v=g.getIndicator(),m=v.getOutputCount();for(_=0;_<m;_++){var y=v.getOutputAt(_),b=y.execute(s);if(!isNaN(b)){var w="  "+y.getName()+": "+b.toFixed(l),C=y.getColor();if(void 0===C&&(C=D.Theme.Color.Indicator0+_),t.fillStyle=o.getColor(C),!L.drawString(t,w,a))return}}}}}}]),e}();e.MainInfoPlotter=A;var P=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,o.NamedObject),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getRange(this.getAreaName());if(0!==i.getRange()){var o=e.getDataProvider(this.getName());if(N.Util.isInstance(o,x.IndicatorDataProvider)){var a,s=e.getTheme(this.getFrameName()),u=r.getColumnWidth(),c=r.getFirstIndex(),l=r.getLastIndex();a=n.isChanged()||r.isUpdated()||i.isUpdated()?c:Math.max(c,l-2);var h,d,p=o.getIndicator(),f=p.getOutputCount();for(d=0;d<f;d++){var g=(h=p.getOutputAt(d)).getStyle();g===E.OutputExpr.outputStyle.VolumeStick?this.drawVolumeStick(t,s,e.getDataSource(this.getDataSourceName()),a,l,r.toItemLeft(a),u,r.getItemWidth(),i):g===E.OutputExpr.outputStyle.MACDStick?this.drawMACDStick(t,s,h,a,l,r.toItemLeft(a),u,r.getItemWidth(),i):g===E.OutputExpr.outputStyle.SARPoint&&this.drawSARPoint(t,s,h,a,l,r.toItemCenter(a),u,r.getItemWidth(),i)}var _=r.toColumnLeft(a),v=r.toItemCenter(a);for(t.save(),t.rect(_,n.getTop(),n.getRight()-_,n.getHeight()),t.clip(),t.translate(.5,.5),d=0;d<f;d++){var m=v;if((h=p.getOutputAt(d)).getStyle()===E.OutputExpr.outputStyle.Line){var y=void 0,b=[];c<a&&(y=h.execute(a-1),!1===isNaN(y)&&b.push({x:m-u,y:i.toY(y)}));for(var w=a;w<l;w++,m+=u)y=h.execute(w),!1===isNaN(y)&&b.push({x:m,y:i.toY(y)});if(0<b.length){var C=h.getColor();void 0===C&&(C=D.Theme.Color.Indicator0+d),t.strokeStyle=s.getColor(C),L.drawLines(t,b)}}}t.restore()}}}},{key:"drawVolumeStick",value:function(t,e,n,r,i,o,a,s,u){for(var c=N.Util.isInstance(e,D.DarkTheme),l=o,h=(u.toY(0),[]),d=[],p=[],f=r;f<i;f++){var g=n.getDataAt(f),_=u.toY(g.volume),v=u.toHeight(g.volume);g.close>g.open?1<v&&1<s&&c?h.push({x:l+.5,y:_+.5,w:s-1,h:v-1}):d.push({x:l,y:_,w:Math.max(s,1),h:Math.max(v,1)}):g.close===g.open&&0<f&&g.close>=n.getDataAt(f-1).close?1<v&&1<s&&c?h.push({x:l+.5,y:_+.5,w:s-1,h:v-1}):d.push({x:l,y:_,w:Math.max(s,1),h:Math.max(v,1)}):p.push({x:l,y:_,w:Math.max(s,1),h:Math.max(v,1)}),l+=a}0<h.length&&(t.fillStyle="#e66b41",L.createRectangles(t,h),t.fill()),0<d.length&&(t.fillStyle=e.getColor(D.Theme.Color.Positive),L.createRectangles(t,d),t.fill()),0<p.length&&(t.fillStyle=e.getColor(D.Theme.Color.Negative),L.createRectangles(t,p),t.fill())}},{key:"drawMACDStick",value:function(t,e,n,r,i,o,a,s,u){for(var c=o,l=u.toY(0),h=[],d=[],p=[],f=[],g=0<r?n.execute(r-1):NaN,_=r;_<i;_++){var v=n.execute(_);if(0<=v){var m=u.toHeight(v);(0===_||g<=v)&&1<m&&1<s?h.push({x:c+.5,y:l-m+.5,w:s-1,h:m-1}):p.push({x:c,y:l-m,w:Math.max(s,1),h:Math.max(m,1)})}else{var y=u.toHeight(-v);(0===_||g<=v)&&1<y&&1<s?d.push({x:c+.5,y:l+.5,w:s-1,h:y-1}):f.push({x:c,y:l,w:Math.max(s,1),h:Math.max(y,1)})}g=v,c+=a}0<h.length&&(t.fillStyle="#e66b41",L.createRectangles(t,h),t.fill()),0<d.length&&(t.fillStyle="#03be87",L.createRectangles(t,d),t.fill()),0<p.length&&(t.fillStyle=e.getColor(D.Theme.Color.Positive),L.createRectangles(t,p),t.fill()),0<f.length&&(t.fillStyle=e.getColor(D.Theme.Color.Negative),L.createRectangles(t,f),t.fill())}},{key:"drawSARPoint",value:function(t,e,n,r,i,o,a,s,u){var c=s>>1;c<.5&&(c=.5),4<c&&(c=4);var l=o,h=l+c,d=2*Math.PI;t.save(),t.translate(.5,.5),t.strokeStyle=e.getColor(D.Theme.Color.Indicator3),t.beginPath();for(var p=r;p<i;p++){var f=u.toY(n.execute(p));t.moveTo(h,f),t.arc(l,f,c,0,d),l+=a,h+=a}t.stroke(),t.restore()}}]),e}();e.IndicatorPlotter=P;var T=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,L),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getDataProvider(this.getAreaName()+".secondary"),o=e.getTheme(this.getFrameName());t.font=o.getFont(D.Theme.Font.Default),t.textAlign="left",t.textBaseline="top",t.fillStyle=o.getColor(D.Theme.Color.Text4);var a,s={x:n.getLeft()+4,y:n.getTop()+2,w:n.getWidth()-8,h:20},u=i.getIndicator();switch(u.getParameterCount()){case 0:a=u.getName();break;case 1:a=u.getName()+"("+u.getParameterAt(0).getValue()+")";break;case 2:a=u.getName()+"("+u.getParameterAt(0).getValue()+","+u.getParameterAt(1).getValue()+")";break;case 3:a=u.getName()+"("+u.getParameterAt(0).getValue()+","+u.getParameterAt(1).getValue()+","+u.getParameterAt(2).getValue()+")";break;case 4:a=u.getName()+"("+u.getParameterAt(0).getValue()+","+u.getParameterAt(1).getValue()+","+u.getParameterAt(2).getValue()+","+u.getParameterAt(3).getValue()+")";break;default:return}if(L.drawString(t,a,s)){var c=r.getSelectedIndex();if(!(c<0)){var l,h,d,p,f,g=u.getOutputCount();for(f=0;f<g;f++)if(h=(l=u.getOutputAt(f)).execute(c),!isNaN(h)&&(d="  "+l.getName()+": "+h.toFixed(2),void 0===(p=l.getColor())&&(p=D.Theme.Color.Indicator0+f),t.fillStyle=o.getColor(p),!L.drawString(t,d,s)))return}}}}]),e}();e.IndicatorInfoPlotter=T;var I=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,o.NamedObject),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getDataSource(this.getDataSourceName());if(!(n.getDataCount()<1)){var r=e.getTimeline(this.getDataSourceName());if(!(r.getInnerWidth()<r.getColumnWidth())){var i=e.getRange(this.getAreaName());if(0!==i.getRange()){var o=e.getDataProvider(this.getAreaName()+".main"),a=r.getFirstIndex(),s=a+r.getLastIndex()>>1,u=e.getTheme(this.getFrameName());t.font=u.getFont(D.Theme.Font.Default),t.textBaseline="middle",t.fillStyle=u.getColor(D.Theme.Color.Text4),t.strokeStyle=u.getColor(D.Theme.Color.Text4);var c=n.getDecimalDigits();this.drawMark(t,o.getMinValue(),c,i.toY(o.getMinValue()),a,s,o.getMinValueIndex(),r),this.drawMark(t,o.getMaxValue(),c,i.toY(o.getMaxValue()),a,s,o.getMaxValueIndex(),r)}}}}},{key:"drawMark",value:function(t,e,n,r,i,o,a,s){var u,c,l,h;o<a?(t.textAlign="right",l=(u=s.toItemCenter(a)-4)-3,h=(c=u-7)-4):(t.textAlign="left",l=(u=s.toItemCenter(a)+4)+3,h=(c=u+7)+4),L.drawLine(t,u,r,c,r),L.drawLine(t,u,r,l,r+2),L.drawLine(t,u,r,l,r-2),t.fillText(N.Util.fromFloat(e,n),h,r)}}]),e}();e.MinMaxPlotter=I;var O=function(t){function P(t){return c(this,P),d(this,p(P).call(this,t))}return f(P,L),h(P,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName());if(n.isChanged()||r.isUpdated()){var i=e.getDataSource(this.getDataSourceName());if(!(i.getDataCount()<2)){var o,a=i.getDataAt(1).date-i.getDataAt(0).date,s=P.TIME_INTERVAL.length;for(o=0;o<s&&!(a<P.TIME_INTERVAL[o]);o++);for(;o<s&&!(P.TIME_INTERVAL[o]%a==0&&60<P.TIME_INTERVAL[o]/a*r.getColumnWidth());o++);var u=r.getFirstIndex(),c=r.getLastIndex(),l=60*(new Date).getTimezoneOffset()*1e3,h=e.getTheme(this.getFrameName());t.font=h.getFont(D.Theme.Font.Default),t.textAlign="center",t.textBaseline="middle";for(var d=e.getLanguage(),p=[],f=n.getTop(),g=n.getMiddle(),_=u;_<c;_++){var v=i.getDataAt(_).date,m=v-l,y=new Date(v),b=y.getFullYear(),w=y.getMonth()+1,C=y.getDate(),E=y.getHours(),x=y.getMinutes(),k="";if(o<s){if(m%Math.max(P.TP_DAY,P.TIME_INTERVAL[o])==0)"zh-cn"===d?k=w.toString()+"月"+C.toString()+"日":"zh-tw"===d?k=w.toString()+"月"+C.toString()+"日":"en-us"===d&&(k=P.MonthConvert[w]+" "+C.toString()),t.fillStyle=h.getColor(D.Theme.Color.Text4);else if(m%P.TIME_INTERVAL[o]==0){var S=x.toString();x<10&&(S="0"+S),k=E.toString()+":"+S,t.fillStyle=h.getColor(D.Theme.Color.Text2)}}else 1===C&&E<a/P.TP_HOUR&&(1===w?(k=b.toString(),"zh-cn"===d?k+="年":"zh-tw"===d&&(k+="年")):"zh-cn"===d?k=w.toString()+"月":"zh-tw"===d?k=w.toString()+"月":"en-us"===d&&(k=P.MonthConvert[w]),t.fillStyle=h.getColor(D.Theme.Color.Text4));if(0<k.length){var A=r.toItemCenter(_);p.push({x:A,y:f,w:1,h:4}),t.fillText(k,A,g)}}0<p.length&&(t.fillStyle=h.getColor(D.Theme.Color.Grid1),L.createRectangles(t,p),t.fill())}}}}]),P}();(e.TimelinePlotter=O).TP_MINUTE=6e4,O.TP_HOUR=60*O.TP_MINUTE,O.TP_DAY=24*O.TP_HOUR,O.TIME_INTERVAL=[5*O.TP_MINUTE,10*O.TP_MINUTE,15*O.TP_MINUTE,30*O.TP_MINUTE,O.TP_HOUR,2*O.TP_HOUR,3*O.TP_HOUR,6*O.TP_HOUR,12*O.TP_HOUR,O.TP_DAY,2*O.TP_DAY],O.MonthConvert={1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."};var j=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,o.NamedObject),h(e,[{key:"getRequiredWidth",value:function(t,e){var n=R.ChartManager.instance.getTheme(this.getFrameName());return t.font=n.getFont(D.Theme.Font.Default),t.measureText((Math.floor(e)+.88).toString()).width+16}},{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=this.getAreaName(),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),o=e.getRange(i);if(0!==o.getRange()){if("main"===o.getNameObject().getCompAt(2));else if(!r.isChanged()&&!o.isUpdated())return;var a=o.getGradations();if(0!==a.length){var s=r.getLeft(),u=r.getRight(),c=r.getCenter(),l=e.getTheme(this.getFrameName());t.font=l.getFont(D.Theme.Font.Default),t.textAlign="center",t.textBaseline="middle",t.fillStyle=l.getColor(D.Theme.Color.Text2);var h=[];for(var d in a){var p=o.toY(a[d]);h.push({x:s,y:p,w:6,h:1}),h.push({x:u-6,y:p,w:6,h:1}),t.fillText(N.Util.fromFloat(a[d],2),c,p)}0<h.length&&(t.fillStyle=l.getColor(D.Theme.Color.Grid1),L.createRectangles(t,h),t.fill())}}}}]),e}();e.RangePlotter=j;var F=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,o.NamedObject),h(e,[{key:"Draw",value:function(t){return this._Draw_(t)}},{key:"_Draw_",value:function(t){if(!1!==this.Update()&&!1!==this.updateData()){this.m_top=this.m_pArea.getTop(),this.m_bottom=this.m_pArea.getBottom(),this.m_left=this.m_pArea.getLeft(),this.m_right=this.m_pArea.getRight(),t.save(),t.rect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top),t.clip();var e=R.ChartManager.instance.getChart()._depthData;this.x_offset=0,this.y_offset=0;var n={},r={};n.x=this.m_left+e.array[this.m_ask_si].amounts*this.m_Step,n.y=this.m_pRange.toY(e.array[this.m_ask_si].rate),r.x=this.m_left+e.array[this.m_bid_si].amounts*this.m_Step,r.y=this.m_pRange.toY(e.array[this.m_bid_si].rate),Math.abs(n.y-r.y)<1&&(this.y_offset=1),this.x_offset=1,this.DrawBackground(t),this.UpdatePoints(),this.FillBlack(t),this.DrawGradations(t),this.DrawLine(t),t.restore()}}},{key:"DrawBackground",value:function(t){t.fillStyle=this.m_pTheme.getColor(D.Theme.Color.Background),t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top);var e=R.ChartManager.instance.getChart()._depthData;if(0===this.m_mode){var n=this.m_pRange.toY(e.array[this.m_ask_si].rate)-this.y_offset,r=this.m_pRange.toY(e.array[this.m_bid_si].rate)+this.y_offset,i=t.createLinearGradient(this.m_left,0,this.m_right,0);i.addColorStop(0,this.m_pTheme.getColor(D.Theme.Color.Background)),i.addColorStop(1,this.m_pTheme.getColor(D.Theme.Color.PositiveDark)),t.fillStyle=i,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,n-this.m_top);var o=t.createLinearGradient(this.m_left,0,this.m_right,0);o.addColorStop(0,this.m_pTheme.getColor(D.Theme.Color.Background)),o.addColorStop(1,this.m_pTheme.getColor(D.Theme.Color.NegativeDark)),t.fillStyle=o,t.fillRect(this.m_left,r,this.m_right-this.m_left,this.m_bottom-r)}else if(1===this.m_mode){var a=t.createLinearGradient(this.m_left,0,this.m_right,0);a.addColorStop(0,this.m_pTheme.getColor(D.Theme.Color.Background)),a.addColorStop(1,this.m_pTheme.getColor(D.Theme.Color.PositiveDark)),t.fillStyle=a,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}else if(2===this.m_mode){var s=t.createLinearGradient(this.m_left,0,this.m_right,0);s.addColorStop(0,this.m_pTheme.getColor(D.Theme.Color.Background)),s.addColorStop(1,this.m_pTheme.getColor(D.Theme.Color.NegativeDark)),t.fillStyle=s,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}}},{key:"DrawLine",value:function(t){if(0===this.m_mode||1===this.m_mode){t.strokeStyle=this.m_pTheme.getColor(D.Theme.Color.Positive),t.beginPath(),t.moveTo(Math.floor(this.m_ask_points[0].x)+.5,Math.floor(this.m_ask_points[0].y)+.5);for(var e=1;e<this.m_ask_points.length;e++)t.lineTo(Math.floor(this.m_ask_points[e].x)+.5,Math.floor(this.m_ask_points[e].y)+.5);t.stroke()}if(0===this.m_mode||2===this.m_mode){t.strokeStyle=this.m_pTheme.getColor(D.Theme.Color.Negative),t.beginPath(),t.moveTo(this.m_bid_points[0].x+.5,this.m_bid_points[0].y+.5);for(var n=1;n<this.m_bid_points.length;n++)t.lineTo(this.m_bid_points[n].x+.5,this.m_bid_points[n].y+.5);t.stroke()}}},{key:"UpdatePoints",value:function(){var t=R.ChartManager.instance.getChart()._depthData;this.m_ask_points=[];var e={};e.x=Math.floor(this.m_left),e.y=Math.floor(this.m_pRange.toY(t.array[this.m_ask_si].rate)-this.y_offset),this.m_ask_points.push(e);for(var n=0,r=this.m_ask_si;r>=this.m_ask_ei;r--){var i={},o={};r===this.m_ask_si?(i.x=Math.floor(this.m_left+t.array[r].amounts*this.m_Step+this.x_offset),i.y=Math.floor(this.m_pRange.toY(t.array[r].rate)-this.y_offset),this.m_ask_points.push(i),n=1):(i.x=Math.floor(this.m_left+t.array[r].amounts*this.m_Step+this.x_offset),i.y=Math.floor(this.m_ask_points[n].y),o.x=Math.floor(i.x),o.y=Math.floor(this.m_pRange.toY(t.array[r].rate)-this.y_offset),this.m_ask_points.push(i),n++,this.m_ask_points.push(o),n++)}this.m_bid_points=[];var a={};a.x=Math.floor(this.m_left),a.y=Math.ceil(this.m_pRange.toY(t.array[this.m_bid_si].rate)+this.y_offset),this.m_bid_points.push(a);for(var s=0,u=this.m_bid_si;u<=this.m_bid_ei;u++){var c={},l={};u===this.m_bid_si?(c.x=Math.floor(this.m_left+t.array[u].amounts*this.m_Step+this.x_offset),c.y=Math.ceil(this.m_pRange.toY(t.array[u].rate)+this.y_offset),this.m_bid_points.push(c),s=1):(c.x=Math.floor(this.m_left+t.array[u].amounts*this.m_Step+this.x_offset),c.y=Math.ceil(this.m_bid_points[s].y),l.x=Math.floor(c.x),l.y=Math.ceil(this.m_pRange.toY(t.array[u].rate)+this.x_offset),this.m_bid_points.push(c),s++,this.m_bid_points.push(l),s++)}}},{key:"updateData",value:function(){var t=R.ChartManager.instance.getChart()._depthData;if(null===t.array)return!1;if(t.array.length<=50)return!1;var e=this.m_pRange.getOuterMinValue(),n=this.m_pRange.getOuterMaxValue();this.m_ask_si=t.asks_si,this.m_ask_ei=t.asks_si;for(var r=t.asks_si;r>=t.asks_ei&&t.array[r].rate<n;r--)this.m_ask_ei=r;this.m_bid_si=t.bids_si,this.m_bid_ei=t.bids_si;for(var i=t.bids_si;i<=t.bids_ei&&t.array[i].rate>e;i++)this.m_bid_ei=i;return this.m_ask_ei===this.m_ask_si?this.m_mode=2:this.m_bid_ei===this.m_bid_si?this.m_mode=1:this.m_mode=0,this.m_Step=this.m_pArea.getWidth(),0===this.m_mode?this.m_ask_ei===t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=Math.min(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts):this.m_ask_ei!==t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=t.array[this.m_bid_ei].amounts:this.m_ask_ei===t.asks_ei&&this.m_bid_ei!==t.bids_ei?this.m_Step/=t.array[this.m_ask_ei].amounts:this.m_ask_ei!==t.asks_ei&&this.m_bid_ei!==t.bids_ei&&(this.m_Step/=Math.max(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts)):1===this.m_mode?this.m_Step/=t.array[this.m_ask_ei].amounts:2===this.m_mode&&(this.m_Step/=t.array[this.m_bid_ei].amounts),!0}},{key:"Update",value:function(){this.m_pMgr=R.ChartManager.instance;var t=this.getAreaName();if(this.m_pArea=this.m_pMgr.getArea(t),null===this.m_pArea)return!1;var e=t.substring(0,t.lastIndexOf("Range"));return this.m_pRange=this.m_pMgr.getRange(e),null!==this.m_pRange&&0!==this.m_pRange.getRange()&&(this.m_pTheme=this.m_pMgr.getTheme(this.getFrameName()),null!==this.m_pTheme)}},{key:"DrawGradations",value:function(t){var e=R.ChartManager.instance,n=this.getAreaName(),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),o=e.getRange(i);if(0!==o.getRange()){var a=o.getGradations();if(0!==a.length){var s=r.getLeft(),u=r.getRight(),c=[];for(var l in a){var h=o.toY(a[l]);c.push({x:s,y:h,w:6,h:1}),c.push({x:u-6,y:h,w:6,h:1})}if(0<c.length){var d=e.getTheme(this.getFrameName());t.fillStyle=d.getColor(D.Theme.Color.Grid1),L.createRectangles(t,c),t.fill()}}}}},{key:"FillBlack",value:function(t){var e=this.m_ask_points,n=this.m_bid_points,r={},i={};r.x=this.m_right,r.y=e[0].y,i.x=this.m_right,i.y=e[e.length-1].y;var o={},a={};o.x=this.m_right,o.y=n[0].y-1,a.x=this.m_right,a.y=n[n.length-1].y,e.unshift(r),e.push(i),n.unshift(o),n.push(a),t.fillStyle=this.m_pTheme.getColor(D.Theme.Color.Background),t.beginPath(),t.moveTo(Math.floor(e[0].x)+.5,Math.floor(e[0].y)+.5);for(var s=1;s<e.length;s++)t.lineTo(Math.floor(e[s].x)+.5,Math.floor(e[s].y)+.5);t.fill(),t.beginPath(),t.moveTo(Math.floor(n[0].x)+.5,Math.floor(n[0].y)+.5);for(var u=1;u<n.length;u++)t.lineTo(Math.floor(n[u].x)+.5,Math.floor(n[u].y)+.5);t.fill(),e.shift(),e.pop(),n.shift(),n.pop()}},{key:"DrawTickerGraph",value:function(t){var e=R.ChartManager.instance.getDataSource(this.getDataSourceName()),n=e._dataItems[e._dataItems.length-1].close;this.m_left,this.m_pRange.toY(n);t.fillStyle=this.m_pTheme.getColor(D.Theme.Color.Mark),t.strokeStyle=this.m_pTheme.getColor(D.Theme.Color.Mark)}}]),e}();e.COrderGraphPlotter=F;var U=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,L),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=(e.getTimeline(this.getDataSourceName()),this.getAreaName()),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),o=e.getRange(i);if(0!==o.getRange()){var a=e.getDataSource(this.getDataSourceName());if(!(a.getDataCount()<1)){var s=e.getTheme(this.getFrameName());t.font=s.getFont(D.Theme.Font.Default),t.textAlign="left",t.textBaseline="middle",t.fillStyle=s.getColor(D.Theme.Color.RangeMark),t.strokeStyle=s.getColor(D.Theme.Color.RangeMark);var u=a.getDataAt(a.getDataCount()-1).volume,c=o.toY(u),l=r.getLeft()+1;L.drawLine(t,l,c,l+7,c),L.drawLine(t,l,c,l+3,c+2),L.drawLine(t,l,c,l+3,c-2),t.fillText(N.Util.fromFloat(u,2),l+10,c)}}}}]),e}();e.LastVolumePlotter=U;var V=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,L),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=(e.getTimeline(this.getDataSourceName()),this.getAreaName()),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),o=e.getRange(i);if(0!==o.getRange()){var a=e.getDataSource(this.getDataSourceName());if(!(a.getDataCount()<1)){var s=a._dataItems[a._dataItems.length-1].close;if(!(s<=o.getMinValue()||s>=o.getMaxValue())){var u=e.getTheme(this.getFrameName());t.font=u.getFont(D.Theme.Font.Default),t.textAlign="left",t.textBaseline="middle",t.strokeStyle=u.getColor(D.Theme.Color.RangeMark);var c=o.toY(s),l=r.getLeft()+1;t.save(),t.beginPath(),t.fillStyle="#909399",t.fillRect(0,c,l,1),t.closePath(),t.fillStyle=u.getColor(D.Theme.Color.RangeMark),L.drawLine(t,l,c,l+7,c),L.drawLine(t,l,c,l+3,c+2),L.drawLine(t,l,c,l+3,c-2),t.fillText(N.Util.fromFloat(s,a.getDecimalDigits()),l+20,c)}}}}}]),e}();e.LastClosePlotter=V;var W=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,L),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance;if(e._drawingTool===R.ChartManager.DrawingTool.CrossCursor){var n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName());if(!(r.getSelectedIndex()<0)){var i=e.getRange(this.getAreaName()),o=e.getTheme(this.getFrameName());t.strokeStyle=o.getColor(D.Theme.Color.Cursor);var a=r.toItemCenter(r.getSelectedIndex());L.drawLine(t,a,n.getTop()-1,a,n.getBottom());var s=i.getSelectedPosition();0<=s&&L.drawLine(t,n.getLeft(),s,n.getRight(),s)}}}}]),e}();e.SelectionPlotter=W;var B=function(t){function b(t){return c(this,b),d(this,p(b).call(this,t))}return f(b,L),h(b,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName());if(!(r.getSelectedIndex()<0)){var i=e.getDataSource(this.getDataSourceName());if(N.Util.isInstance(i,M.MainDataSource)){var o=e.getTheme(this.getFrameName()),a=e.getLanguage(),s=r.toItemCenter(r.getSelectedIndex());t.fillStyle=o.getColor(D.Theme.Color.Background),t.fillRect(s-52.5,n.getTop()+2.5,106,18),t.strokeStyle=o.getColor(D.Theme.Color.Grid3),t.strokeRect(s-52.5,n.getTop()+2.5,106,18),t.font=o.getFont(D.Theme.Font.Default),t.textAlign="center",t.textBaseline="middle",t.fillStyle=o.getColor(D.Theme.Color.Text4);var u=new Date(i.getDataAt(r.getSelectedIndex()).date),c=u.getMonth()+1,l=u.getDate(),h=u.getHours(),d=u.getMinutes(),p=u.getSeconds(),f=c.toString(),g=l.toString(),_=h.toString(),v=d.toString(),m=p.toString();d<10&&(v="0"+v),p<10&&(m="0"+m);var y="";"zh-cn"===a?y=f+"月"+g+"日  "+_+":"+v:"zh-tw"===a?y=f+"月"+g+"日  "+_+":"+v:"en-us"===a&&(y=b.MonthConvert[c]+" "+g+"  "+_+":"+v),w.default.instance.range<6e4&&(y+=":"+m),t.fillText(y,s,n.getMiddle())}}}}]),b}();(e.TimelineSelectionPlotter=B).MonthConvert={1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."};var G=function(t){function e(t){return c(this,e),d(this,p(e).call(this,t))}return f(e,o.NamedObject),h(e,[{key:"Draw",value:function(t){var e=R.ChartManager.instance,n=this.getAreaName(),r=e.getArea(n);if(!(e.getTimeline(this.getDataSourceName()).getSelectedIndex()<0)){var i=n.substring(0,n.lastIndexOf("Range")),o=e.getRange(i);if(!(0===o.getRange()||o.getSelectedPosition()<0)){var a=o.getSelectedValue();if(a!==-Number.MAX_VALUE){var s=o.getSelectedPosition();L.createPolygon(t,[{x:r.getLeft(),y:s},{x:r.getLeft()+5,y:s+10},{x:r.getRight()-3,y:s+10},{x:r.getRight()-3,y:s-10},{x:r.getLeft()+5,y:s-10}]);var u=e.getTheme(this.getFrameName());t.fillStyle=u.getColor(D.Theme.Color.Background),t.fill(),t.strokeStyle=u.getColor(D.Theme.Color.Grid4),t.stroke(),t.font=u.getFont(D.Theme.Font.Default),t.textAlign="center",t.textBaseline="middle",t.fillStyle=u.getColor(D.Theme.Color.Text3);var c=2;"main"===o.getNameObject().getCompAt(2)&&(c=e.getDataSource(this.getDataSourceName()).getDecimalDigits()),t.fillText(N.Util.fromFloat(a,c),r.getCenter(),s)}}}}}]),e}();e.RangeSelectionPlotter=G;var H=function(t){function i(t,e){var n;c(this,i),(n=d(this,p(i).call(this,t))).toolObject=e;var r=R.ChartManager.instance.getArea("frame0.k0.main");return null===r?(n.areaPos={left:0,top:0,right:0,bottom:0},d(n)):(n.areaPos={left:r.getLeft(),top:r.getTop(),right:r.getRight(),bottom:r.getBottom()},n.crossPt={},n.normalSize=4,n.selectedSize=6,n.cursorLen=4,n.cursorGapLen=3,n.theme=R.ChartManager.instance.getTheme(n.getFrameName()),n)}return f(i,o.NamedObject),h(i,[{key:"drawCursor",value:function(t){this.drawCrossCursor(t)}},{key:"drawCrossCursor",value:function(t){t.strokeStyle=this.theme.getColor(D.Theme.Color.LineColorNormal),t.fillStyle=this.theme.getColor(D.Theme.Color.LineColorNormal);var e=this.toolObject.getPoint(0).getPosXY();if(null!==e){var n=e.x,r=e.y,i=this.cursorLen,o=this.cursorGapLen;t.fillRect(n,r,1,1),L.drawLine(t,n-i-o,r,n-o,r),L.drawLine(t,n+i+o,r,n+o,r),L.drawLine(t,n,r-i-o,n,r-o),L.drawLine(t,n,r+i+o,n,r+o)}}},{key:"drawCircle",value:function(t,e,n){var r=e.x,i=e.y;t.beginPath(),t.arc(r,i,n,0,2*Math.PI,!1),t.fillStyle=this.theme.getColor(D.Theme.Color.CircleColorFill),t.fill(),t.stroke()}},{key:"drawCtrlPt",value:function(t){t.strokeStyle=this.theme.getColor(D.Theme.Color.CircleColorStroke);for(var e=0;e<this.ctrlPtsNum;e++)this.drawCircle(t,this.ctrlPts[1][e],this.normalSize)}},{key:"highlightCtrlPt",value:function(t){t.strokeStyle=this.theme.getColor(D.Theme.Color.CircleColorStroke);for(var e=0;e<this.ctrlPtsNum;e++)this.toolObject.getPoint(e).getState()===a.CPoint.state.Highlight&&this.drawCircle(t,this.ctrlPts[1][e],this.selectedSize)}},{key:"drawFibRayLines",value:function(t,e,n){for(var r=0;r<this.fiboFansSequence.length;r++){var i=e.y+(100-this.fiboFansSequence[r])/100*(n.y-e.y),o={x:e.x,y:e.y},a={x:n.x,y:i};this.drawRayLines(t,o,a)}}},{key:"drawRayLines",value:function(t,e,n){this.getAreaPos();var r,i={x:e.x,y:e.y},o={x:n.x,y:n.y},a=this.getRectCrossPt(this.areaPos,i,o);r=n.x===e.x?n.y===e.y?n:n.y>e.y?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y}:n.x>e.x?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y},L.drawLine(t,e.x,e.y,r.x,r.y)}},{key:"lenBetweenPts",value:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"getCtrlPts",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[0][t]=this.toolObject.getPoint(t)}},{key:"updateCtrlPtPos",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[1][t]=this.ctrlPts[0][t].getPosXY()}},{key:"getAreaPos",value:function(){var t=R.ChartManager.instance.getArea("frame0.k0.main");this.areaPos=null!==t?{left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())}:{left:0,top:0,right:0,bottom:0}}},{key:"updateDraw",value:function(t){t.strokeStyle=this.theme.getColor(D.Theme.Color.LineColorNormal),this.draw(t),this.drawCtrlPt(t)}},{key:"finishDraw",value:function(t){t.strokeStyle=this.theme.getColor(D.Theme.Color.LineColorNormal),this.draw(t)}},{key:"highlight",value:function(t){t.strokeStyle=this.theme.getColor(D.Theme.Color.LineColorSelected),this.draw(t),this.drawCtrlPt(t),this.highlightCtrlPt(t)}}]),i}();e.CToolPlotter=H;var Y=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t,e))).toolObject=e,n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,H),h(r,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?L.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y):(this.crossPt=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),L.drawLine(t,this.crossPt[0].x,this.crossPt[0].y,this.crossPt[1].x,this.crossPt[1].y))}}]),r}();e.DrawStraightLinesPlotter=Y;var z=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t,e))).toolObject=e,n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,H),h(r,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),L.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y)}}]),r}();e.DrawSegLinesPlotter=z;var q=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t))).toolObject=e,n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,H),h(r,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawRayLines(t,this.startPoint,this.endPoint)}}]),r}();e.DrawRayLinesPlotter=q;var X=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t,e))).toolObject=e,n.arrowSizeRatio=.03,n.arrowSize=4,n.crossPt={x:-1,y:-1},n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,H),h(r,[{key:"drawArrow",value:function(t,e,n){var r=this.lenBetweenPts(e,n),i=[n.x-e.x,n.y-e.y];this.crossPt.x=e.x+(1-this.arrowSize/r)*i[0],this.crossPt.y=e.y+(1-this.arrowSize/r)*i[1];var o=[-i[1],i[0]],a={x:o[0],y:o[1]},s={x:0,y:0};o[0]=this.arrowSize*a.x/this.lenBetweenPts(a,s),o[1]=this.arrowSize*a.y/this.lenBetweenPts(a,s);var u=[this.crossPt.x+o[0],this.crossPt.y+o[1]];L.drawLine(t,n.x,n.y,u[0],u[1]),u=[this.crossPt.x-o[0],this.crossPt.y-o[1]],L.drawLine(t,n.x,n.y,u[0],u[1])}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),L.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y),this.drawArrow(t,this.startPoint,this.endPoint)}}]),r}();e.DrawArrowLinesPlotter=X;var Q=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t))).toolObject=e,n.ctrlPtsNum=1,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,H),h(r,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],L.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y)}}]),r}();e.DrawHoriStraightLinesPlotter=Q;var Z=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t))).toolObject=e,n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,H),h(r,[{key:"draw",value:function(t){if(this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x)L.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y);else{var e={x:this.endPoint.x,y:this.startPoint.y};this.drawRayLines(t,this.startPoint,e)}}}]),r}();e.DrawHoriRayLinesPlotter=Z;var K=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t,e))).toolObject=e,n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,H),h(r,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.endPoint.y=this.startPoint.y,this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?L.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x+1,this.startPoint.y):L.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.startPoint.y)}}]),r}();e.DrawHoriSegLinesPlotter=K;var J=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t))).toolObject=e,n.ctrlPtsNum=1,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,H),h(r,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],L.drawLine(t,this.startPoint.x,this.areaPos.top,this.startPoint.x,this.areaPos.bottom)}}]),r}();e.DrawVertiStraightLinesPlotter=J;var $=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t))).toolObject=e,n.ctrlPtsNum=1,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,H),h(r,[{key:"draw",value:function(t){t.font="12px Tahoma",t.textAlign="left",t.fillStyle=this.theme.getColor(D.Theme.Color.LineColorNormal),this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0];var e=this.ctrlPts[0][0].getPosIV().v;L.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y),t.fillText(e.toFixed(2),this.startPoint.x+2,this.startPoint.y-15)}}]),r}();e.DrawPriceLinesPlotter=$;var tt=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t))).toolObject=e,n}return f(r,H),h(r,[{key:"getParaPt",value:function(){var t=[];t[0]=this.endPoint.x-this.startPoint.x,t[1]=this.endPoint.y-this.startPoint.y;var e=[];e[0]=this.paraStartPoint.x-this.startPoint.x,e[1]=this.paraStartPoint.y-this.startPoint.y,this.paraEndPoint={x:-1,y:-1},this.paraEndPoint.x=t[0]+e[0]+this.startPoint.x,this.paraEndPoint.y=t[1]+e[1]+this.startPoint.y}}]),r}();e.ParallelLinesPlotter=tt;var et=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t,e))).toolObject=e,n.ctrlPtsNum=3,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,tt),h(r,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.getParaPt(),this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),L.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.paraEndPoint),L.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y)}}]),r}();e.DrawBiParallelLinesPlotter=et;var nt=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t,e))).toolObject=e,n.ctrlPtsNum=3,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,tt),h(r,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.getParaPt(),this.drawRayLines(t,this.startPoint,this.endPoint),this.drawRayLines(t,this.paraStartPoint,this.paraEndPoint)}}]),r}();e.DrawBiParallelRayLinesPlotter=nt;var rt=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t,e))).toolObject=e,n.ctrlPtsNum=3,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,tt),h(r,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2];var e=[];e[0]=this.endPoint.x-this.startPoint.x,e[1]=this.endPoint.y-this.startPoint.y;var n=[];n[0]=this.paraStartPoint.x-this.startPoint.x,n[1]=this.paraStartPoint.y-this.startPoint.y,this.para1EndPoint={x:-1,y:-1},this.para2EndPoint={x:-1,y:-1},this.para2StartPoint={x:-1,y:-1},this.para1EndPoint.x=e[0]+n[0]+this.startPoint.x,this.para1EndPoint.y=e[1]+n[1]+this.startPoint.y,this.para2StartPoint.x=this.startPoint.x-n[0],this.para2StartPoint.y=this.startPoint.y-n[1],this.para2EndPoint.x=this.endPoint.x-n[0],this.para2EndPoint.y=this.endPoint.y-n[1],this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),L.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.para1EndPoint),L.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y),this.crossPt2=this.getRectCrossPt(this.areaPos,this.para2StartPoint,this.para2EndPoint),L.drawLine(t,this.crossPt2[0].x,this.crossPt2[0].y,this.crossPt2[1].x,this.crossPt2[1].y)}}]),r}();e.DrawTriParallelLinesPlotter=rt;var it=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t))).toolObject=e,n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,H),h(r,[{key:"drawLinesAndInfo",value:function(t,e,n){var r;t.font="12px Tahoma",t.textAlign="left",t.fillStyle=this.theme.getColor(D.Theme.Color.LineColorNormal),this.toolObject.state===s.CToolObject.state.Draw&&(this.startPtValue=this.toolObject.getPoint(0).getPosIV().v,this.endPtValue=this.toolObject.getPoint(1).getPosIV().v),this.getAreaPos();for(var i=0;i<this.fiboSequence.length;i++){var o=e.y+(100-this.fiboSequence[i])/100*(n.y-e.y);if(!(o>this.areaPos.bottom)){var a=this.startPtValue+(100-this.fiboSequence[i])/100*(this.endPtValue-this.startPtValue);L.drawLine(t,this.areaPos.left,o,this.areaPos.right,o),r=this.fiboSequence[i].toFixed(1)+"% "+a.toFixed(1),t.fillText(r,this.areaPos.left+2,o-15)}}}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),r}();e.BandLinesPlotter=it;var ot=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t,e))).toolObject=e,n.fiboSequence=[100,78.6,61.8,50,38.2,23.6,0],n}return f(r,it),r}();e.DrawFibRetracePlotter=ot;var at=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t,e))).toolObject=e,n.fiboSequence=[0,12.5,25,37.5,50,62.5,75,87.5,100],n}return f(r,it),r}();e.DrawBandLinesPlotter=at;var st=function(t){function r(t,e){var n;return c(this,r),(n=d(this,p(r).call(this,t))).toolObject=e,n.fiboFansSequence=[0,38.2,50,61.8],n.ctrlPtsNum=2,n.ctrlPts=[new Array(n.ctrlPtsNum),new Array(2)],n.getCtrlPts(),n}return f(r,H),h(r,[{key:"drawLinesAndInfo",value:function(t,e,n){this.drawFibRayLines(t,e,n)}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),r}();e.DrawFibFansPlotter=st;var ut=function(t){function n(t){var e;return c(this,n),(e=d(this,p(n).call(this,t))).flag=!0,e.context=R.ChartManager.instance._overlayContext,e}return f(n,o.NamedObject),h(n,[{key:"getAreaPos",value:function(){var t=R.ChartManager.instance.getArea("frame0.k0.main");this.areaPos=null!==t?{left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())}:{left:0,top:0,right:0,bottom:0}}},{key:"Draw",value:function(t){this.getAreaPos();var e=R.ChartManager.instance.getDataSource(this.getDataSourceName());if(null!==e&&N.Util.isInstance(e,M.MainDataSource)){this.context.save(),this.context.rect(this.areaPos.left,this.areaPos.top,this.areaPos.right-this.areaPos.left,this.areaPos.bottom-this.areaPos.top),this.context.clip();for(var n=e.getToolObjectCount(),r=0;r<n;r++){var i=e.getToolObject(r);switch(i.getState()){case s.CToolObject.state.BeforeDraw:i.getPlotter().theme=R.ChartManager.instance.getTheme(this.getFrameName()),i.getPlotter().drawCursor(this.context);break;case s.CToolObject.state.Draw:i.getPlotter().theme=R.ChartManager.instance.getTheme(this.getFrameName()),i.getPlotter().updateDraw(this.context);break;case s.CToolObject.state.AfterDraw:i.getPlotter().theme=R.ChartManager.instance.getTheme(this.getFrameName()),i.getPlotter().finishDraw(this.context)}}var o=e.getSelectToolObjcet();null!==o&&o!==s.CToolObject.state.Draw&&o.getPlotter().highlight(this.context),this.context.restore()}}}]),n}();e.CDynamicLinePlotter=ut},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndicatorDataProvider=e.MainDataProvider=e.DataProvider=void 0;var r=n(1),i=n(0),o=n(5),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}}(n(2));function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){function n(t){var e;return u(this,n),(e=h(this,d(n).call(this,t)))._minValue=0,e._maxValue=0,e._minValueIndex=-1,e._maxValueIndex=-1,e}return p(n,r.NamedObject),l(n,[{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getMinValueIndex",value:function(){return this._minValueIndex}},{key:"getMaxValueIndex",value:function(){return this._maxValueIndex}},{key:"getMinMaxAt",value:function(t,e){return!0}},{key:"calcRange",value:function(t,e,n,r){for(var i=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=-1,s=-1,u={},c=e-1,l=t.length-1;0<=l;l--){var h=t[l];if(c<h)n[l]={min:i,max:o};else{for(;h<=c;c--)!1!==this.getMinMaxAt(c,u)&&(u.min<i&&(i=u.min,a=c),o<u.max&&(o=u.max,s=c));n[l]={min:i,max:o}}null!=r&&(r[l]={minIndex:a,maxIndex:s})}}},{key:"updateRange",value:function(){var t=i.ChartManager.instance.getTimeline(this.getDataSourceName()),e=[t.getFirstIndex()],n=[{}],r=[{}];this.calcRange(e,t.getLastIndex(),n,r),this._minValue=n[0].min,this._maxValue=n[0].max,this._minValueIndex=r[0].minIndex,this._maxValueIndex=r[0].maxIndex}}]),n}();e.DataProvider=g;var _=function(t){function n(t){var e;return u(this,n),(e=h(this,d(n).call(this,t)))._candlestickDS=null,e}return p(n,g),l(n,[{key:"updateData",value:function(){var t=i.ChartManager.instance.getDataSource(this.getDataSourceName());o.Util.isInstance(t,a.MainDataSource)&&(this._candlestickDS=t)}},{key:"getMinMaxAt",value:function(t,e){var n=this._candlestickDS.getDataAt(t);return e.min=n.low,e.max=n.high,!0}}]),n}();e.MainDataProvider=_;var v=function(t){function e(){return u(this,e),h(this,d(e).apply(this,arguments))}return p(e,g),l(e,[{key:"getIndicator",value:function(){return this._indicator}},{key:"setIndicator",value:function(t){this._indicator=t,this.refresh()}},{key:"refresh",value:function(){var t=i.ChartManager.instance.getDataSource(this.getDataSourceName());if(!(t.getDataCount()<1)){var e,n=this._indicator,r=t.getDataCount();for(n.clear(),n.reserve(r),e=0;e<r;e++)n.execute(t,e)}}},{key:"updateData",value:function(){var t=i.ChartManager.instance.getDataSource(this.getDataSourceName());if(!(t.getDataCount()<1)){var e=this._indicator;switch(t.getUpdateMode()){case a.DataSource.UpdateMode.Refresh:this.refresh();break;case a.DataSource.UpdateMode.Append:e.reserve(t.getAppendedCount());break;case a.DataSource.UpdateMode.Update:var n,r=t.getDataCount();for(n=r-(t.getUpdatedCount()+t.getAppendedCount());n<r;n++)e.execute(t,n)}}}},{key:"getMinMaxAt",value:function(t,e){e.min=Number.MAX_VALUE,e.max=-Number.MAX_VALUE;var n,r,i=!1,o=this._indicator.getOutputCount();for(r=0;r<o;r++)n=this._indicator.getOutputAt(r).execute(t),!1===isNaN(n)&&(i=!0,e.min>n&&(e.min=n),e.max<n&&(e.max=n));return i}}]),e}();e.IndicatorDataProvider=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartAreaGroup=e.TimelineArea=e.IndicatorRangeArea=e.MainRangeArea=e.IndicatorArea=e.MainArea=e.ChartArea=void 0;var r=n(1),i=n(0),o=n(21);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){function n(t){var e;return u(this,n),(e=h(this,d(n).call(this,t)))._left=0,e._top=0,e._right=0,e._bottom=0,e._changed=!1,e._highlighted=!1,e._pressed=!1,e._selected=!1,e.Measuring=new o.MEvent,e}return p(n,r.NamedObject),l(n,[{key:"getDockStyle",value:function(){return this._dockStyle}},{key:"setDockStyle",value:function(t){this._dockStyle=t}},{key:"getLeft",value:function(){return this._left}},{key:"getTop",value:function(){return this._top}},{key:"setTop",value:function(t){this._top!==t&&(this._top=t,this._changed=!0)}},{key:"getRight",value:function(){return this._right}},{key:"getBottom",value:function(){return this._bottom}},{key:"setBottom",value:function(t){this._bottom!==t&&(this._bottom=t,this._changed=!0)}},{key:"getCenter",value:function(){return this._left+this._right>>1}},{key:"getMiddle",value:function(){return this._top+this._bottom>>1}},{key:"getWidth",value:function(){return this._right-this._left}},{key:"getHeight",value:function(){return this._bottom-this._top}},{key:"getRect",value:function(){return{X:this._left,Y:this._top,Width:this._right-this._left,Height:this._bottom-this._top}}},{key:"contains",value:function(t,e){return t>=this._left&&t<this._right&&e>=this._top&&e<this._bottom?[this]:null}},{key:"getMeasuredWidth",value:function(){return this._measuredWidth}},{key:"getMeasuredHeight",value:function(){return this._measuredHeight}},{key:"setMeasuredDimension",value:function(t,e){this._measuredWidth=t,this._measuredHeight=e}},{key:"measure",value:function(t,e,n){this._measuredWidth=0,this._measuredHeight=0,this.Measuring.raise(this,{Width:e,Height:n}),0===this._measuredWidth&&0===this._measuredHeight&&this.setMeasuredDimension(e,n)}},{key:"layout",value:function(t,e,n,r,i){t<<=0,this._left!==t&&(this._left=t,this._changed=!0),e<<=0,this._top!==e&&(this._top=e,this._changed=!0),n<<=0,this._right!==n&&(this._right=n,this._changed=!0),r<<=0,this._bottom!==r&&(this._bottom=r,this._changed=!0),i&&(this._changed=!0)}},{key:"isChanged",value:function(){return this._changed}},{key:"setChanged",value:function(t){this._changed=t}},{key:"isHighlighted",value:function(){return this._highlighted}},{key:"getHighlightedArea",value:function(){return this._highlighted?this:null}},{key:"highlight",value:function(t){return this._highlighted=this===t,this._highlighted?this:null}},{key:"isPressed",value:function(){return this._pressed}},{key:"setPressed",value:function(t){this._pressed=t}},{key:"isSelected",value:function(){return this._selected}},{key:"getSelectedArea",value:function(){return this._selected?this:null}},{key:"select",value:function(t){return this._selected=this===t,this._selected?this:null}},{key:"onMouseMove",value:function(t,e){return null}},{key:"onMouseLeave",value:function(t,e){}},{key:"onMouseDown",value:function(t,e){return null}},{key:"onMouseUp",value:function(t,e){return null}}]),n}();(e.ChartArea=g).DockStyle={Left:0,Top:1,Right:2,Bottom:3,Fill:4};var _=function(t){function n(t){var e;return u(this,n),(e=h(this,d(n).call(this,t)))._dragStarted=!1,e._oldX=0,e._oldY=0,e._passMoveEventToToolManager=!0,e}return p(n,g),l(n,[{key:"onMouseMove",value:function(t,e){var n=i.ChartManager.instance;if(n._capturingMouseArea===this&&!1===this._dragStarted&&(1<Math.abs(this._oldX-t)||1<Math.abs(this._oldY-e))&&(this._dragStarted=!0),this._dragStarted)return n.hideCursor(),n.onToolMouseDrag(this.getFrameName(),t,e)||n.getTimeline(this.getDataSourceName()).move(t-this._oldX),this;if(this._passMoveEventToToolManager&&n.onToolMouseMove(this.getFrameName(),t,e))return n.hideCursor(),this;switch(n._drawingTool){case i.ChartManager.DrawingTool.Cursor:n.showCursor();break;case i.ChartManager.DrawingTool.CrossCursor:n.showCrossCursor(this,t,e)?n.hideCursor():n.showCursor();break;default:n.hideCursor()}return this}},{key:"onMouseLeave",value:function(t,e){this._dragStarted=!1,this._passMoveEventToToolManager=!0}},{key:"onMouseDown",value:function(t,e){var n=i.ChartManager.instance;return n.getTimeline(this.getDataSourceName()).startMove(),this._oldX=t,this._oldY=e,this._dragStarted=!1,n.onToolMouseDown(this.getFrameName(),t,e)&&(this._passMoveEventToToolManager=!1),this}},{key:"onMouseUp",value:function(t,e){var n=i.ChartManager.instance,r=null;return this._dragStarted&&(this._dragStarted=!1,r=this),n.onToolMouseUp(this.getFrameName(),t,e)&&(r=this),this._passMoveEventToToolManager=!0,r}}]),n}();e.MainArea=_;var v=function(t){function n(t){var e;return u(this,n),(e=h(this,d(n).call(this,t)))._dragStarted=!1,e._oldX=0,e._oldY=0,e}return p(n,g),l(n,[{key:"onMouseMove",value:function(t,e){var n=i.ChartManager.instance;if(n._capturingMouseArea===this&&!1===this._dragStarted&&(this._oldX===t&&this._oldY===e||(this._dragStarted=!0)),this._dragStarted)return n.hideCursor(),n.getTimeline(this.getDataSourceName()).move(t-this._oldX),this;switch(n._drawingTool){case i.ChartManager.DrawingTool.CrossCursor:n.showCrossCursor(this,t,e)?n.hideCursor():n.showCursor();break;default:n.showCursor()}return this}},{key:"onMouseLeave",value:function(t,e){this._dragStarted=!1}},{key:"onMouseDown",value:function(t,e){return i.ChartManager.instance.getTimeline(this.getDataSourceName()).startMove(),this._oldX=t,this._oldY=e,this._dragStarted=!1,this}},{key:"onMouseUp",value:function(t,e){return this._dragStarted?(this._dragStarted=!1,this):null}}]),n}();e.IndicatorArea=v;var m=function(t){function e(t){return u(this,e),h(this,d(e).call(this,t))}return p(e,g),l(e,[{key:"onMouseMove",value:function(t,e){return i.ChartManager.instance.showCursor(),this}}]),e}();e.MainRangeArea=m;var y=function(t){function e(t){return u(this,e),h(this,d(e).call(this,t))}return p(e,g),l(e,[{key:"onMouseMove",value:function(t,e){return i.ChartManager.instance.showCursor(),this}}]),e}();e.IndicatorRangeArea=y;var b=function(t){function e(t){return u(this,e),h(this,d(e).call(this,t))}return p(e,g),l(e,[{key:"onMouseMove",value:function(t,e){return i.ChartManager.instance.showCursor(),this}}]),e}();e.TimelineArea=b;var w=function(t){function o(t){var e;return u(this,o),(e=h(this,d(o).call(this,t)))._areas=[],e._highlightedArea=null,e._selectedArea=null,e}return p(o,g),l(o,[{key:"contains",value:function(t,e){var n,r,i=this._areas.length;for(r=0;r<i;r++)if(null!==(n=this._areas[r].contains(t,e)))return n.push(this),n;return s(d(o.prototype),"contains",this).call(this,t,e)}},{key:"getAreaCount",value:function(){return this._areas.length}},{key:"getAreaAt",value:function(t){return t<0||t>=this._areas.length?null:this._areas[t]}},{key:"addArea",value:function(t){this._areas.push(t)}},{key:"removeArea",value:function(t){var e,n=this._areas.length;for(e=0;e<n;e++)if(t===this._areas[e]){this._areas.splice(e),this.setChanged(!0);break}}},{key:"getGridColor",value:function(){return this._gridColor}},{key:"setGridColor",value:function(t){this._gridColor=t}},{key:"getHighlightedArea",value:function(){return null!==this._highlightedArea?this._highlightedArea.getHighlightedArea():null}},{key:"highlight",value:function(t){this._highlightedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)if(null!==(e=this._areas[n].highlight(t)))return this._highlightedArea=e,this;return null}},{key:"getSelectedArea",value:function(){return null!==this._selectedArea?this._selectedArea.getSelectedArea():null}},{key:"select",value:function(t){this._selectedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)if(null!==(e=this._areas[n].select(t)))return this._selectedArea=e,this;return null}},{key:"onMouseLeave",value:function(t,e){var n,r=this._areas.length;for(n=0;n<r;n++)this._areas[n].onMouseLeave(t,e)}},{key:"onMouseUp",value:function(t,e){var n,r,i=this._areas.length;for(r=0;r<i;r++)if(null!==(n=this._areas[r].onMouseUp(t,e)))return n;return null}}]),o}();e.ChartAreaGroup=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},a=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(d=64)),r.push(n[l],n[h],n[d],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!=s){var l=a<<4&240|s>>2;if(r.push(l),64!=u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}return t.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},t}(),d=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},p="FirebaseError",f=Error.captureStackTrace;var g=function(t,e){if(this.code=t,this.message=e,f)f(this,_.prototype.create);else{var n=Error.apply(this,arguments);this.name=p,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}};g.prototype=Object.create(Error.prototype),(g.prototype.constructor=g).prototype.name=p;var _=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,r){void 0===r&&(r={});var e,n=this.errors[t],i=this.service+"/"+t;e=void 0===n?"Error":n.replace(this.pattern,function(t,e){var n=r[e];return void 0!==n?n.toString():"<"+e+"?>"}),e=this.serviceName+": "+e+" ("+i+").";var o=new g(i,e);for(var a in r)r.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=r[a]);return o},t}();function v(t){return JSON.parse(t)}var m=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=v(c(o[0])||""),n=v(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},y=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},b=function(n,t){return y(t,function(t,e){n[t]=e}),n},w=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},C=function(n){function t(){var t=n.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var e=1;e<t.blockSize;++e)t.pad_[e]=0;return t.reset(),t}return r.__extends(t,n),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(function(){this.blockSize=-1});var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=x),void 0===r.error&&(r.error=x),void 0===r.complete&&(r.complete=x);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function x(){}function k(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.assert=a,e.assertionError=o,e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.CONSTANTS=i,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.patchProperty=function(t,e,n){t[e]=n},e.Deferred=h,e.getUA=d,e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.ErrorFactory=_,e.FirebaseError=g,e.patchCapture=function(t){var e=f;return f=t,e},e.jsonEval=v,e.stringify=function(t){return JSON.stringify(t)},e.decode=m,e.isAdmin=function(t){var e=m(t).claims;return"object"==typeof e&&!0===e.admin},e.issuedAtTime=function(t){var e=m(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.isValidFormat=function(t){var e=m(t),n=e.claims;return!!e.signature&&!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,r=m(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&e<=i&&i<=n},e.clone=function(t){return b({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=b,e.findKey=w,e.findValue=function(t,e,n){var r=w(t,e,n);return r&&t[r]},e.forEach=y,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.querystring=function(t){var n=[];return y(t,function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),n.length?"&"+n.join("&"):""},e.querystringDecode=function(t){var n={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var e=t.split("=");n[e[0]]=e[1]}}),n},e.Sha1=C,e.async=function(n,r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve(!0).then(function(){n.apply(void 0,t)}).catch(function(t){r&&r(t)})}},e.createSubscribe=function(t,e){var n=new E(t,e);return n.subscribe.bind(n)},e.errorPrefix=k,e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(k(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(k(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(k(t,e,r)+"must be a valid firebase namespace.")},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;a(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n.d(e,"__assign",function(){return i}),e.__rest=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n},e.__decorate=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a},e.__param=function(n,r){return function(t,e){r(t,e,n)}},e.__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},e.__awaiter=function(o,a,s,u){return new(s||(s=Promise))(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function r(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(n,r)}i((u=u.apply(o,a||[])).next())})},e.__generator=function(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},e.__exportStar=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},e.__values=o,e.__read=a,e.__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},e.__await=h,e.__asyncGenerator=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),a=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<a.push([r,n,t,e])||s(r,n)})})}function s(t,e){try{(n=o[t](e)).value instanceof h?Promise.resolve(n.value.v).then(u,c):l(a[0][2],n)}catch(t){l(a[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),a.shift(),a.length&&s(a[0][0],a[0][1])}},e.__asyncDelegator=function(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){r[e]&&(t[e]=function(t){return(i=!i)?{value:h(r[e](t)),done:"return"===e}:n?n(t):t})}},e.__asyncValues=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):o(t)},e.__makeTemplateObject=function(t,e){Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e;return t},e.__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__importDefault=function(t){return t&&t.__esModule?t:{default:t}};var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};var i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(t){return this instanceof h?(this.v=t,this):new h(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KlineTrade=void 0;var s=n(0);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.browerState=0,this.tradeDate=new Date,this.tradesLimit=20,this.lastDepth=null,this.depthShowSize=15,this.priceDecimalDigits=6,this.amountDecimalDigits=4,this.symbol=null,this.curPrice=null,this.title="",Object.assign(this,t),e.created||(e.instance=this,e.created=!0),e.instance}var t,n,r;return t=e,(n=[{key:"reset",value:function(t){this.symbol=t,this.lastDepth=null,this.curPrice=null,this.klineTradeInit=!1,$("#trades .trades_list").empty(),$("#gasks .table").empty(),$("#gbids .table").empty(),$("#asks .table").empty(),$("#bids .table").empty()}},{key:"pushTrades",value:function(n){for(var t=$("#trades .trades_list"),e="",r=0;r<n.length;r++){var i=n[r];if(r>=n.length-this.tradesLimit){this.tradeDate.setTime(i.time);var o=this.dateFormatTf(this.tradeDate.getHours())+":"+this.dateFormatTf(this.tradeDate.getMinutes())+":"+this.dateFormatTf(this.tradeDate.getSeconds()),a=(i.amount.toFixed(4)+"").split("."),s=i.price;1<s&&(s=s.toFixed(2)),s<1&&1e-5<s&&(s=s.toFixed(4)),s<1e-5&&(s=s.toFixed(6)),e=this.klineTradeInit?"<ul class='newul'><li class='tm'>"+o+"</li><li class='pr-"+("buy"===i.type?"green":"red")+"'>"+s+"</li><li class='vl'>"+a[0]+"<g>"+(1<a.length?"."+a[1]:"")+"</g></li></ul>"+e:"<ul><li class='tm'>"+o+"</li><li class='pr-"+("buy"===i.type?"green":"red")+"'>"+s+"</li><li class='vl'>"+a[0]+"<g>"+(1<a.length?"."+a[1]:"")+"</g></li></ul>"+e}}var u=0,c=this;if(this.klineTradeInit){clearInterval(l);var l=setInterval(function(){var t=n[u],e=Number(t.price);1<e&&(e=e.toFixed(2)),e<1&&1e-4<e&&(e=e.toFixed(4)),e<1e-4&&(e=e.toFixed(6)),c.curPrice=e,$("div#price").attr("class","buy"===t.type?"green":"red").text(e),++u>=n.length&&clearInterval(l)},100)}else if(0<n.length){var h=Number(n[n.length-1].price);1<h&&(h=h.toFixed(2)),h<1&&1e-4<h&&(h=h.toFixed(4)),h<1e-4&&(h=h.toFixed(6)),c.curPrice=h,$("div#price").attr("class","buy"===n[n.length-1].type?"green":"red").text(h)}this.klineTradeInit?t.prepend(e):t.append(e),e=null,t.find("ul.newul").slideDown(1e3,function(){$(this).removeClass("newul")}),t.find("ul:gt("+(this.tradesLimit-1)+")").remove()}},{key:"updateDepth",value:function(t){if(s.ChartManager.instance.getChart().updateDepth(t),t)if($("#gasks .table").html(this.getgview(this.getgasks(t.asks))),$("#gbids .table").html(this.getgview(this.getgbids(t.bids))),null===this.lastDepth)this.lastDepth={},this.lastDepth.asks=this.getAsks(t.asks,this.depthShowSize),this.depthInit(this.lastDepth.asks,$("#asks .table")),this.lastDepth.bids=this.getBids(t.bids,this.depthShowSize),this.depthInit(this.lastDepth.bids,$("#bids .table"));else{var e=$("#asks .table");e.find("div.remove").remove(),e.find("div.add").removeClass("add");var n=this.getAsks(t.asks,this.depthShowSize),r=this.lastDepth.asks;this.lastDepth.asks=n,this.asksAndBids(n.slice(0),r,e);var i=$("#bids .table");i.find("div.remove").remove(),i.find("div.add").removeClass("add");var o=this.getBids(t.bids,this.depthShowSize),a=this.lastDepth.bids;this.lastDepth.bids=o,this.asksAndBids(o.slice(0),a,$("#bids .table"))}}},{key:"depthInit",value:function(t,e){if(e.empty(),t&&0<t.length){for(var n,r="",i=0;i<t.length;i++){var o=(t[i][0]+"").split("."),a=this.getPrice(o,n);n=o[0],o=(t[i][1]+"").split(".");var s=this.getAmount(o);r+="<div class='row'><span class='price'>"+a[0]+"<g>"+a[1]+"</g></span> <span class='amount'>"+s[0]+"<g>"+s[1]+"</g></span></div>"}e.append(r),r=null}}},{key:"asksAndBids",value:function(t,e,n){for(var r=0;r<e.length;r++){for(var i=!1,o=0;o<t.length;o++)if(e[r][0]===t[o][0]){if(i=!0,e[r][1]!==t[o][1]){var a=n.find("div:eq("+r+") .amount");a.addClass(e[r][1]>t[o][1]?"red":"green");var s=this.getAmount((t[o][1]+"").split("."));setTimeout(function(t,e){return function(){t.html(e[0]+"<g>"+e[1]+"</g>"),t.removeClass("red").removeClass("green"),e=t=null}}(a,s),500)}t.splice(o,1);break}i||(n.find("div:eq("+r+")").addClass("remove"),e[r][2]=-1)}for(var u=0;u<e.length;u++)for(var c=0;c<t.length;c++)if(t[c][0]>e[u][0]){var l=(t[c][1]+"").split("."),h=this.getAmount(l);n.find("div:eq("+u+")").before("<div class='row add'><span class='price'></span> <span class='amount'>"+h[0]+"<g>"+h[1]+"</g></span></div>"),e.splice(u,0,t[c]),t.splice(c,1);break}for(var d,p,f,g="",_=0;_<t.length;_++){e.push(t[_]);var v=(t[_][1]+"").split("."),m=this.getAmount(v);g+="<div class='row add'><span class='price'></span> <span class='amount'>"+m[0]+"<g>"+m[1]+"</g></span></div>"}0<g.length&&n.append(g),g=null;for(var y=0;y<e.length;y++){var b=n.find("div:eq("+y+")");if(!(3<=e[y].length&&-1===e[y][2])){var w=(e[y][0]+"").split("."),C=this.getPrice(w,d);d=w[0],b.find(".price").html(C[0]+"<g>"+C[1]+"</g>")}}e=t=null,n.find("div.add").slideDown(800),setTimeout((p=n.find("div.remove"),f=n.find("div.add"),function(){p.slideUp(500,function(){$(this).remove()}),f.removeClass("add")}),1e3)}},{key:"getAsks",value:function(t,e){return t.length>e&&t.splice(0,t.length-e),t}},{key:"getBids",value:function(t,e){return t.length>e&&t.splice(e,t.length-1),t}},{key:"getgview",value:function(t){for(var e,n="",r=0;r<t.length;r++){var i=t[r][0].split(".");1===i.length||i[0]!==e?(n+="<div class='row'><span class='price'>"+t[r][0]+"</span> <span class='amount'>"+t[r][1]+"</span></div>",e=i[0]):n+="<div class='row'><span class='price'><h>"+i[0]+".</h>"+i[1]+"</span> <span class='amount'>"+t[r][1]+"</span></div>"}return n}},{key:"getgasks",value:function(t){if(t.length<2)return[];var e=t[t.length-1][0],n=t[0][0],r=n-e,i=this.getBlock(r,100),o=Math.abs(Number(Math.log(i)/Math.log(10))).toFixed(0);r/i<2&&(i/=2,o++),1<=i&&(o=0),e=parseInt(e/i)*i,n=parseInt(n/i)*i;for(var a=[],s=0,u=t.length-1;0<=u;u--){if(t[u][0]>e){var c=parseInt(s,10);if(0<c&&a.unshift([Number(e).toFixed(o),c]),n<=e)break;e+=i}s+=t[u][1]}return a}},{key:"getgbids",value:function(t){if(t.length<2)return[];var e=t[t.length-1][0],n=t[0][0],r=n-e,i=this.getBlock(r,100),o=Math.abs(Number(Math.log(i)/Math.log(10))).toFixed(0);r/i<2&&(i/=2,o++),1<=i&&(o=0),e=parseInt(e/i)*i,n=parseInt(n/i)*i;for(var a=[],s=0,u=0;u<t.length;u++){if(t[u][0]<n){var c=parseInt(s,10);if(0<c&&a.push([Number(n).toFixed(o),c]),n<=e)break;n-=i}s+=t[u][1]}return a}},{key:"getBlock",value:function(t,e){return e<t||t<=0?e:(e/=10,this.getBlock(t,e))}},{key:"getZeros",value:function(t){for(var e="";0<t;)t--,e+="0";return e}},{key:"getPrice",value:function(t,e){var n=t[0];e===n?n="<h>"+n+".</h>":n+=".";var r="";return 1===t.length?(n+="0",r=this.getZeros(this.priceDecimalDigits-1)):(n+=t[1],r=this.getZeros(this.priceDecimalDigits-t[1].length)),[n,r]}},{key:"getAmount",value:function(t){var e=t[0],n="",r=this.amountDecimalDigits-e.length+1;return 0<r&&(n=".",1===t.length?n+=this.getZeros(r):r>t[1].length?n+=t[1]+this.getZeros(r-t[1].length):r===t[1].length?n+=t[1]:n+=t[1].substring(0,r)),[e,n]}},{key:"dateFormatTf",value:function(t){return(t<10?"0":"")+t}}])&&i(t.prototype,n),r&&i(t,r),e}();(e.KlineTrade=r).created=!1,r.instance=null},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.CName=void 0;var i=function(){function i(t){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this._names=[],this._comps=[],t instanceof i)this._names=t._names,this._comps=t._comps;else{var e=t.split("."),n=e.length-1;if(0<n){this._comps=e,this._names.push(e[0]);for(var r=1;r<=n;r++)this._names.push(this._names[r-1]+"."+e[r])}else this._comps.push(t),this._names.push(t)}}var t,e,n;return t=i,(e=[{key:"getCompAt",value:function(t){return 0<=t&&t<this._comps.length?this._comps[t]:""}},{key:"getName",value:function(t){if(t<0){if(0<this._names.length)return this._names[this._names.length-1]}else if(t<this._names.length)return this._names[t];return""}}])&&r(t.prototype,e),n&&r(t,n),i}();e.CName=i},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}Object.defineProperty(e,"__esModule",{value:!0}),e.SarExpr=e.SmaExpr=e.ExpmemaExpr=e.EmaExpr=e.MaExpr=e.StdExpr=e.SumExpr=e.CountExpr=e.LlvExpr=e.HhvExpr=e.RangeExpr=e.RangeOutputExpr=e.OutputExpr=e.AssignExpr=e.IfExpr=e.OrExpr=e.AndExpr=e.RefExpr=e.AbsExpr=e.MaxExpr=e.EqExpr=e.LeExpr=e.LtExpr=e.GeExpr=e.GtExpr=e.DivExpr=e.MulExpr=e.SubExpr=e.AddExpr=e.NegExpr=e.OpABCDExpr=e.OpABCExpr=e.OpABExpr=e.OpAExpr=e.ParameterExpr=e.ConstExpr=e.VolumeExpr=e.CloseExpr=e.LowExpr=e.HighExpr=e.OpenExpr=e.Expr=e.ExprEnv=void 0;var d=function(){function t(){l(this,t),this._ds=null,this._firstIndex=null}return h(t,[{key:"getDataSource",value:function(){return this._ds}},{key:"setDataSource",value:function(t){return this._ds=t}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"setFirstIndex",value:function(t){return this._firstIndex=t}}],[{key:"get",value:function(){return this.inst}},{key:"set",value:function(t){this.inst=t}}]),t}();(e.ExprEnv=d).inst=null;var p=function(){function t(){l(this,t),this._rid=0}return h(t,[{key:"execute",value:function(t){}},{key:"reserve",value:function(t,e){}},{key:"clear",value:function(){}}]),t}();e.Expr=p;var f=function(t){function e(){return l(this,e),s(this,u(e).apply(this,arguments))}return c(e,p),h(e,[{key:"execute",value:function(t){return d.get()._ds.getDataAt(t).open}}]),e}();e.OpenExpr=f;var g=function(t){function e(){return l(this,e),s(this,u(e).apply(this,arguments))}return c(e,p),h(e,[{key:"execute",value:function(t){return d.get()._ds.getDataAt(t).high}}]),e}();e.HighExpr=g;var _=function(t){function e(){return l(this,e),s(this,u(e).apply(this,arguments))}return c(e,p),h(e,[{key:"execute",value:function(t){return d.get()._ds.getDataAt(t).low}}]),e}();e.LowExpr=_;var v=function(t){function e(){return l(this,e),s(this,u(e).apply(this,arguments))}return c(e,p),h(e,[{key:"execute",value:function(t){return d.get()._ds.getDataAt(t).close}}]),e}();e.CloseExpr=v;var m=function(t){function e(){return l(this,e),s(this,u(e).apply(this,arguments))}return c(e,p),h(e,[{key:"execute",value:function(t){return d.get()._ds.getDataAt(t).volume}}]),e}();e.VolumeExpr=m;var y=function(t){function n(t){var e;return l(this,n),(e=s(this,u(n).call(this)))._value=t,e}return c(n,p),h(n,[{key:"execute",value:function(t){return this._value}}]),n}();e.ConstExpr=y;var b=function(t){function o(t,e,n,r){var i;return l(this,o),(i=s(this,u(o).call(this)))._name=t,i._minValue=e,i._maxValue=n,i._value=i._defaultValue=r,i}return c(o,p),h(o,[{key:"execute",value:function(t){return this._value}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getDefaultValue",value:function(){return this._defaultValue}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(t){0===t?this._value=0:t<this._minValue?this._value=this._minValue:t>this._maxValue?this._value=this._maxValue:this._value=t}}]),o}();e.ParameterExpr=b;var w=function(t){function n(t){var e;return l(this,n),(e=s(this,u(n).call(this)))._exprA=t,e}return c(n,p),h(n,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear()}}]),n}();e.OpAExpr=w;var C=function(t){function r(t,e){var n;return l(this,r),(n=s(this,u(r).call(this)))._exprA=t,n._exprB=e,n}return c(r,p),h(r,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear()}}]),r}();e.OpABExpr=C;var E=function(t){function i(t,e,n){var r;return l(this,i),(r=s(this,u(i).call(this)))._exprA=t,r._exprB=e,r._exprC=n,r}return c(i,p),h(i,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear()}}]),i}();e.OpABCExpr=E;var x=function(t){function o(t,e,n,r){var i;return l(this,o),(i=s(this,u(o).call(this)))._exprA=t,i._exprB=e,i._exprC=n,i._exprD=r,i}return c(o,p),h(o,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e),this._exprD.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear(),this._exprD.clear()}}]),o}();e.OpABCDExpr=x;var k=function(t){function e(t){return l(this,e),s(this,u(e).call(this,t))}return c(e,w),h(e,[{key:"execute",value:function(t){return-this._exprA.execute(t)}}]),e}();e.NegExpr=k;var S=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){return this._exprA.execute(t)+this._exprB.execute(t)}}]),n}();e.AddExpr=S;var A=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){return this._exprA.execute(t)-this._exprB.execute(t)}}]),n}();e.SubExpr=A;var P=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){return this._exprA.execute(t)*this._exprB.execute(t)}}]),n}();e.MulExpr=P;var T=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){var e=this._exprA.execute(t),n=this._exprB.execute(t);return 0===e?e:0===n?0<e?1e6:-1e6:e/n}}]),n}();e.DivExpr=T;var I=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){return this._exprA.execute(t)>this._exprB.execute(t)?1:0}}]),n}();e.GtExpr=I;var O=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){return this._exprA.execute(t)>=this._exprB.execute(t)?1:0}}]),n}();e.GeExpr=O;var R=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){return this._exprA.execute(t)<this._exprB.execute(t)?1:0}}]),n}();e.LtExpr=R;var N=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){return this._exprA.execute(t)<=this._exprB.execute(t)?1:0}}]),n}();e.LeExpr=N;var D=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){return this._exprA.execute(t)===this._exprB.execute(t)?1:0}}]),n}();e.EqExpr=D;var M=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){return Math.max(this._exprA.execute(t),this._exprB.execute(t))}}]),n}();e.MaxExpr=M;var L=function(t){function e(t){return l(this,e),s(this,u(e).call(this,t))}return c(e,w),h(e,[{key:"execute",value:function(t){return Math.abs(this._exprA.execute(t))}}]),e}();e.AbsExpr=L;var j=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){if((void 0===this._offset||this._offset<0)&&(this._offset=this._exprB.execute(t),this._offset<0))throw"offset < 0";if((t-=this._offset)<0)throw"index < 0";var e=this._exprA.execute(t);if(isNaN(e))throw"NaN";return e}}]),n}();e.RefExpr=j;var F=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)&&0!==this._exprB.execute(t)?1:0}}]),n}();e.AndExpr=F;var U=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,C),h(n,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)||0!==this._exprB.execute(t)?1:0}}]),n}();e.OrExpr=U;var V=function(t){function r(t,e,n){return l(this,r),s(this,u(r).call(this,t,e,n))}return c(r,E),h(r,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)?this._exprB.execute(t):this._exprC.execute(t)}}]),r}();e.IfExpr=V;var W=function(t){function r(t,e){var n;return l(this,r),(n=s(this,u(r).call(this,e)))._name=t,n._buf=[],n}return c(r,w),h(r,[{key:"getName",value:function(){return this._name}},{key:"execute",value:function(t){return this._buf[t]}},{key:"assign",value:function(t){if(this._buf[t]=this._exprA.execute(t),0<=d.get()._firstIndex&&isNaN(this._buf[t])&&!isNaN(this._buf[t-1]))throw this._name+".assign("+t+"): NaN"}},{key:"reserve",value:function(t,e){if(this._rid<t)for(var n=e;0<n;n--)this._buf.push(NaN);a(u(r.prototype),"reserve",this).call(this,t,e)}},{key:"clear",value:function(){a(u(r.prototype),"clear",this).call(this),this._buf=[]}}]),r}();e.AssignExpr=W;var B=function(t){function o(t,e,n,r){var i;return l(this,o),(i=s(this,u(o).call(this,t,e)))._style=void 0===n?o.outputStyle.Line:n,i._color=r,i}return c(o,W),h(o,[{key:"getStyle",value:function(){return this._style}},{key:"getColor",value:function(){return this._color}}]),o}();(e.OutputExpr=B).outputStyle={None:0,Line:1,VolumeStick:2,MACDStick:3,SARPoint:4};var G=function(t){function i(t,e,n,r){return l(this,i),s(this,u(i).call(this,t,e,n,r))}return c(i,B),h(i,[{key:"getName",value:function(){return this._name+this._exprA.getRange()}}]),i}();e.RangeOutputExpr=G;var H=function(t){function r(t,e){var n;return l(this,r),(n=s(this,u(r).call(this,t,e)))._range=-1,n._buf=[],n}return c(r,C),h(r,[{key:"getRange",value:function(){return this._range}},{key:"initRange",value:function(){this._range=this._exprB.execute(0)}},{key:"execute",value:function(t){this._range<0&&this.initRange();var e=this._buf[t].resultA=this._exprA.execute(t);return this._buf[t].result=this.calcResult(t,e)}},{key:"reserve",value:function(t,e){if(this._rid<t)for(var n=e;0<n;n--)this._buf.push({resultA:NaN,result:NaN});a(u(r.prototype),"reserve",this).call(this,t,e)}},{key:"clear",value:function(){a(u(r.prototype),"clear",this).call(this),this._range=-1,this._buf=[]}}]),r}();e.RangeExpr=H;var Y=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,H),h(n,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return e;if(n<t){for(var r=e,i=t-this._range+1,o=Math.max(n,i);o<t;o++){var a=this._buf[o];r<a.resultA&&(r=a.resultA)}return r}return e}}]),n}();e.HhvExpr=Y;var z=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,H),h(n,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return e;if(n<t){for(var r=e,i=t-this._range+1,o=Math.max(n,i);o<t;o++){var a=this._buf[o];r>a.resultA&&(r=a.resultA)}return r}return e}}]),n}();e.LlvExpr=z;var q=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,H),h(n,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return 0;if(n<=t){var r=this._range-1;t-n<r&&(r=t-n);for(var i=0;0<=r;r--)0!==this._buf[t-r].resultA&&i++;return i}return 0}}]),n}();e.CountExpr=q;var X=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,H),h(n,[{key:"calcResult",value:function(t,e){var n=d.get()._firstIndex;if(n<0)return e;if(n<t){var r=this._range;return 0===r||t+1-n<=r?this._buf[t-1].result+e:this._buf[t-1].result+e-this._buf[t-r].resultA}return e}}]),n}();e.SumExpr=X;var Q=function(t){function r(t,e){return l(this,r),s(this,u(r).call(this,t,e))}return c(r,H),h(r,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=this._stdBuf[t],r=d.get()._firstIndex;if(r<0)return n.resultMA=e,0;if(r<t){var i=this._range;t+1-r<=i?(i=t+1-r,n.resultMA=this._stdBuf[t-1].resultMA*(1-1/i)+e/i):n.resultMA=this._stdBuf[t-1].resultMA+(e-this._buf[t-i].resultA)/i;for(var o=0,a=t-i+1;a<=t;a++)o+=Math.pow(this._buf[a].resultA-n.resultMA,2);return Math.sqrt(o/i)}return n.resultMA=e,0}},{key:"reserve",value:function(t,e){if(this._rid<t)for(var n=e;0<n;n--)this._stdBuf.push({resultMA:NaN});a(u(r.prototype),"reserve",this).call(this,t,e)}},{key:"clear",value:function(){a(u(r.prototype),"clear",this).call(this),this._stdBuf=[]}}]),r}();e.StdExpr=Q;var Z=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,H),h(n,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return e;if(n<t){var r=this._range;return t+1-n<=r?(r=t+1-n,this._buf[t-1].result*(1-1/r)+e/r):this._buf[t-1].result+(e-this._buf[t-r].resultA)/r}return e}}]),n}();e.MaExpr=Z;var K=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,H),h(n,[{key:"initRange",value:function(){a(u(n.prototype),"initRange",this).call(this),this._alpha=2/(this._range+1)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return e;if(n<t){var r=this._buf[t-1];return this._alpha*(e-r.result)+r.result}return e}}]),n}();e.EmaExpr=K;var J=function(t){function n(t,e){return l(this,n),s(this,u(n).call(this,t,e))}return c(n,K),h(n,[{key:"calcResult",value:function(t,e){var n=d.get()._firstIndex;if(n<0)return e;if(n<t){var r=this._range,i=this._buf[t-1];return t+1-n<=r?(r=t+1-n,i.result*(1-1/r)+e/r):this._alpha*(e-i.result)+i.result}return e}}]),n}();e.ExpmemaExpr=J;var $=function(t){function i(t,e,n){var r;return l(this,i),(r=s(this,u(i).call(this,t,e)))._exprC=n,r._mul=null,r}return c(i,H),h(i,[{key:"initRange",value:function(){a(u(i.prototype),"initRange",this).call(this),this._mul=this._exprC.execute(0)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return e;if(n<t){var r=this._range;return t+1-n<r&&(r=t+1-n),((r-1)*this._buf[t-1].result+e*this._mul)/r}return e}}]),i}();e.SmaExpr=$;var tt=function(t){function o(t,e,n,r){var i;return l(this,o),(i=s(this,u(o).call(this,t,e,n,r)))._buf=[],i._range=-1,i._min=null,i._step=null,i._max=null,i}return c(o,x),h(o,[{key:"execute",value:function(t){this._range<0&&(this._range=this._exprA.execute(0),this._min=this._exprB.execute(0)/100,this._step=this._exprC.execute(0)/100,this._max=this._exprD.execute(0)/100);var e=this._buf[t],n=d.get(),r=n._firstIndex;if(r<0)e.longPos=!0,e.sar=n._ds.getDataAt(t).low,e.ep=n._ds.getDataAt(t).high,e.af=.02;else{var i=n._ds.getDataAt(t).high,o=n._ds.getDataAt(t).low,a=this._buf[t-1];if(e.sar=a.sar+a.af*(a.ep-a.sar),a.longPos){if(e.longPos=!0,i>a.ep?(e.ep=i,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar>o){e.longPos=!1;var s=t-this._range+1;for(s=Math.max(s,r);s<t;s++){var u=n._ds.getDataAt(s).high;i<u&&(i=u)}e.sar=i,e.ep=o,e.af=.02}}else if(e.longPos=!1,o<a.ep?(e.ep=o,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar<i){e.longPos=!0;var c=t-this._range+1;for(c=Math.max(c,r);c<t;c++){var l=n._ds.getDataAt(c).low;l<o&&(o=l)}e.sar=o,e.ep=i,e.af=.02}}return e.sar}},{key:"reserve",value:function(t,e){if(this._rid<t)for(var n=e;0<n;n--)this._buf.push({longPos:!0,sar:NaN,ep:NaN,af:NaN});a(u(o.prototype),"reserve",this).call(this,t,e)}},{key:"clear",value:function(){a(u(o.prototype),"clear",this).call(this),this._range=-1}}]),o}();e.SarExpr=tt},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.MEvent=void 0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handlers=[]}var e,n,r;return e=t,(n=[{key:"addHandler",value:function(t,e){this.indexOf(t,e)<0&&this._handlers.push({obj:t,func:e})}},{key:"removeHandler",value:function(t,e){var n=this.indexOf(t,e);0<=n&&this._handlers.splice(n,1)}},{key:"raise",value:function(t,e){var n,r=this._handlers,i=r.length;for(n=0;n<i;n++)r[n].func(t,e)}},{key:"indexOf",value:function(t,e){var n,r,i=this._handlers,o=i.length;for(r=0;r<o;r++)if(t===(n=i[r]).obj&&e===n.func)return r;return-1}}])&&i(e.prototype,n),r&&i(e,r),t}();e.MEvent=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PercentageRange=e.ZeroCenteredRange=e.MainRange=e.ZeroBasedPositiveRange=e.PositiveRange=e.Range=void 0;var r=n(1),h=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function n(t){var e;return o(this,n),(e=u(this,c(n).call(this,t)))._updated=!0,e._minValue=Number.MAX_VALUE,e._maxValue=-Number.MAX_VALUE,e._outerMinValue=Number.MAX_VALUE,e._outerMaxValue=-Number.MAX_VALUE,e._ratio=0,e._top=0,e._bottom=0,e._paddingTop=0,e._paddingBottom=0,e._minInterval=36,e._selectedPosition=-1,e._selectedValue=-Number.MAX_VALUE,e._gradations=[],e}return l(n,r.NamedObject),s(n,[{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getRange",value:function(){return this._maxValue-this._minValue}},{key:"getOuterMinValue",value:function(){return this._outerMinValue}},{key:"getOuterMaxValue",value:function(){return this._outerMaxValue}},{key:"getOuterRange",value:function(){return this._outerMaxValue-this._outerMinValue}},{key:"getHeight",value:function(){return Math.max(0,this._bottom-this._top)}},{key:"getGradations",value:function(){return this._gradations}},{key:"getMinInterval",value:function(){return this._minInterval}},{key:"setMinInterval",value:function(t){this._minInterval=t}},{key:"getSelectedPosition",value:function(){return 0<=this._selectedPosition?this._selectedPosition:this._selectedValue>-Number.MAX_VALUE?this.toY(this._selectedValue):-1}},{key:"getSelectedValue",value:function(){if(this._selectedValue>-Number.MAX_VALUE)return this._selectedValue;var t=h.ChartManager.instance.getArea(this.getAreaName());return null===t?-Number.MAX_VALUE:this._selectedPosition<t.getTop()+12||this._selectedPosition>=t.getBottom()-4?-Number.MAX_VALUE:this.toValue(this._selectedPosition)}},{key:"setPaddingTop",value:function(t){this._paddingTop=t}},{key:"setPaddingBottom",value:function(t){this._paddingBottom=t}},{key:"toValue",value:function(t){return this._maxValue-(t-this._top)/this._ratio}},{key:"toY",value:function(t){return 0<this._ratio?this._top+Math.floor((this._maxValue-t)*this._ratio+.5):this._top}},{key:"toHeight",value:function(t){return t==1/0||0==this._ratio?1.5:Math.floor(t*this._ratio+1.5)}},{key:"update",value:function(){for(var t,e=Number.MAX_VALUE,n=-Number.MAX_VALUE,r=h.ChartManager.instance,i=[".main",".secondary"],o=0;o<i.length;o++)null!=(t=r.getDataProvider(this.getName()+i[o]))&&(e=Math.min(e,t.getMinValue()),n=Math.max(n,t.getMaxValue()));var a={min:e,max:n};this.preSetRange(a),this.setRange(a.min,a.max)}},{key:"select",value:function(t){this._selectedValue=t,this._selectedPosition=-1}},{key:"selectAt",value:function(t){this._selectedPosition=t,this._selectedValue=-Number.MAX_VALUE}},{key:"unselect",value:function(){this._selectedPosition=-1,this._selectedValue=-Number.MAX_VALUE}},{key:"preSetRange",value:function(t){t.min===t.max&&(t.min=-1,t.max=1)}},{key:"setRange",value:function(t,e){var n=h.ChartManager.instance.getArea(this.getAreaName());if(this._minValue!==t||this._maxValue!==e||n.isChanged()){this._updated=!0,this._minValue=t,this._maxValue=e,this._gradations=[];var r=n.getTop()+this._paddingTop,i=n.getBottom()-(this._paddingBottom+1);i<=r?this._minValue=this._maxValue:(this._top=r,this._bottom=i,this._maxValue>this._minValue?this._ratio=(i-r)/(this._maxValue-this._minValue):this._ratio=1,this._outerMinValue=this.toValue(n.getBottom()),this._outerMaxValue=this.toValue(n.getTop()),this.updateGradations())}}},{key:"calcInterval",value:function(){var t=this.getHeight(),e=this.getMinInterval();t/e<=1&&(e=t>>1);for(var n,r,i=this.getRange(),o=0;-2<o&&Math.floor(i)<i;)i*=10,o--;for(;(n=r=Math.pow(10,o),!(this.toHeight(n)>e))&&(n=2*r,!(this.toHeight(n)>e))&&(n=5*r,!(this.toHeight(n)>e));o++);return n}},{key:"updateGradations",value:function(){this._gradations=[];var t=this.calcInterval();if(!(t<=0))for(var e=Math.floor(this.getMaxValue()/t)*t;this._gradations.push(e),(e-=t)>this.getMinValue(););}}]),n}();e.Range=p;var f=function(t){function e(t){return o(this,e),u(this,c(e).call(this,t))}return l(e,p),s(e,[{key:"preSetRange",value:function(t){t.min<0&&(t.min=0),t.max<0&&(t.max=0)}}]),e}();e.PositiveRange=f;var g=function(t){function e(t){return o(this,e),u(this,c(e).call(this,t))}return l(e,p),s(e,[{key:"preSetRange",value:function(t){t.min=0,t.max<0&&(t.max=0)}}]),e}();e.ZeroBasedPositiveRange=g;var _=function(t){function e(t){return o(this,e),u(this,c(e).call(this,t))}return l(e,p),s(e,[{key:"preSetRange",value:function(t){var e=h.ChartManager.instance,n=e.getTimeline(this.getDataSourceName()),r=n.getMaxIndex()-n.getLastIndex();if(r<25){var i=e.getDataSource(this.getDataSourceName()),o=i.getDataAt(i.getDataCount()-1),a=(t.max-t.min)/4*(1-r/25);t.min=Math.min(t.min,Math.max(o.low-a,0)),t.max=Math.max(t.max,o.high+a)}if(0<t.min){var s=t.max/t.min;if(s<.6){var u=(t.max+t.min)/2,c=1.5*(s-1);t.max=u*(1+c),t.min=u*(1-c)}else if(s<.4){var l=(t.max+t.min)/2;t.max=1.024*l,t.min=.976*l}}t.min<0&&(t.min=0),t.max<0&&(t.max=0)}}]),e}();e.MainRange=_;var v=function(t){function e(t){return o(this,e),u(this,c(e).call(this,t))}return l(e,p),s(e,[{key:"calcInterval",value:function(t){var e=this.getMinInterval();if(t.getHeight()/e<2)return 0;var n,r=this.getRange();for(n=3;!(this.toHeight(r/n)<=e);n+=2);return r/(n-=2)}},{key:"updateGradations",value:function(){this._gradations=[];var t=h.ChartManager.instance.getArea(this.getAreaName()),e=this.calcInterval(t);if(!(e<=0))for(var n=e/2;this._gradations.push(n),this._gradations.push(-n),(n+=e)<=this.getMaxValue(););}},{key:"preSetRange",value:function(t){var e=Math.max(Math.abs(t.min),Math.abs(t.max));t.min=-e,t.max=e}}]),e}();e.ZeroCenteredRange=v;var m=function(t){function e(t){return o(this,e),u(this,c(e).call(this,t))}return l(e,p),s(e,[{key:"updateGradations",value:function(){this._gradations=[];var t=h.ChartManager.instance.getArea(this.getAreaName()),e=Math.floor(this.toHeight(10));if(!(e<<2>t.getHeight())){var n=10*Math.ceil(this.getMinValue()/10);if(0===n&&(n=0),e<<2<24){if(e<<1<8)return;for(;20!==n&&80!==n||this._gradations.push(n),(n+=10)<this.getMaxValue(););}else for(;e<8?20!==n&&50!==n&&80!==n||this._gradations.push(n):0!==n&&20!==n&&50!==n&&80!==n&&100!==n||this._gradations.push(n),(n+=10)<this.getMaxValue(););}}}]),e}();e.PercentageRange=m},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_23__},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=s(d);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||l||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(3))&&r.__esModule?r:{default:r};window.Kline=i.default;var o=i.default;e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chart=void 0;var r,u=n(0),i=n(10),o=(r=n(3))&&r.__esModule?r:{default:r},a=n(8);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._data=null,this._charStyle="CandleStick",this._depthData={array:null,asks_count:0,bids_count:0,asks_si:0,asks_ei:0,bids_si:0,bids_ei:0},this.strIsLine=!1,this._range=o.default.instance.range,this._symbol=o.default.instance.symbol}var t,e,r;return t=n,(e=[{key:"setTitle",value:function(){var t=u.ChartManager.instance.getLanguage(),e=o.default.instance.symbolName;e+=" ",e+=this.strIsLine?n.strPeriod[t].line:n.strPeriod[t][this._range],e+=(this._contract_unit+"/"+this._money_type).toUpperCase(),u.ChartManager.instance.setTitle("frame0.k0",e)}},{key:"setSymbol",value:function(t){this._symbol=t,this.updateDataAndDisplay()}},{key:"updateDataAndDisplay",value:function(){o.default.instance.symbol=this._symbol,o.default.instance.range=this._range,u.ChartManager.instance.setCurrentDataSource("frame0.k0",this._symbol+"."+this._range),u.ChartManager.instance.setNormalMode();var t=o.default.instance.chartMgr.getDataSource("frame0.k0").getLastDate();$(".symbol-title>a").text(o.default.instance.symbolName),-1===t?(o.default.instance.requestParam=i.Control.setHttpRequestParam(o.default.instance.symbol,o.default.instance.range,o.default.instance.limit,null),i.Control.requestData(!0)):(o.default.instance.requestParam=i.Control.setHttpRequestParam(o.default.instance.symbol,o.default.instance.range,null,t.toString()),i.Control.requestData()),u.ChartManager.instance.redraw("All",!1)}},{key:"setCurrentContractUnit",value:function(t){this._contract_unit=t,this.updateDataAndDisplay()}},{key:"setCurrentMoneyType",value:function(t){this._money_type=t,this.updateDataAndDisplay()}},{key:"setCurrentPeriod",value:function(t){this._range=o.default.instance.periodMap[t],"stomp"===o.default.instance.type&&1===o.default.instance.stompClient.ws.readyState&&(o.default.instance.subscribed.unsubscribe(),o.default.instance.subscribed=o.default.instance.stompClient.subscribe(o.default.instance.subscribePath+"/"+o.default.instance.symbol+"/"+this._range,i.Control.subscribeCallback)),this.updateDataAndDisplay(),o.default.instance.onRangeChange(this._range)}},{key:"updateDataSource",value:function(t){this._data=t,u.ChartManager.instance.updateData("frame0.k0",this._data)}},{key:"updateDepth",value:function(t){if(null===t)return this._depthData.array=[],void u.ChartManager.instance.redraw("All",!1);if(t.asks&&t.bids&&""!==t.asks&&""!==t.bids){var e=this._depthData;e.array=[];for(var n=0;n<t.asks.length;n++){var r={};r.rate=t.asks[n][0],r.amount=t.asks[n][1],e.array.push(r)}for(var i=0;i<t.bids.length;i++){var o={};o.rate=t.bids[i][0],o.amount=t.bids[i][1],e.array.push(o)}e.asks_count=t.asks.length,e.bids_count=t.bids.length,e.asks_si=e.asks_count-1,e.asks_ei=0,e.bids_si=e.asks_count-1,e.bids_ei=e.asks_count+e.bids_count-2;for(var a=e.asks_si;a>=e.asks_ei;a--)a===e.asks_si&&void 0!==e.array[a]?e.array[a].amounts=e.array[a].amount:void 0!==e.array[a+1]&&(e.array[a].amounts=e.array[a+1].amounts+e.array[a].amount);for(var s=e.bids_si;s<=e.bids_ei;s++)s===e.bids_si&&void 0!==e.array[s]?e.array[s].amounts=e.array[s].amount:void 0!==e.array[s-1]&&(e.array[s].amounts=e.array[s-1].amounts+e.array[s].amount);u.ChartManager.instance.redraw("All",!1)}}},{key:"setMainIndicator",value:function(t){"NONE"===(this._mainIndicator=t)?u.ChartManager.instance.removeMainIndicator("frame0.k0"):u.ChartManager.instance.setMainIndicator("frame0.k0",t),u.ChartManager.instance.redraw("All",!0)}},{key:"setIndicator",value:function(t,e){if("NONE"===e){var n=2;!1===a.Template.displayVolume&&(n=1);var r=u.ChartManager.instance.getIndicatorAreaName("frame0.k0",n);""!==r&&u.ChartManager.instance.removeIndicator(r)}else{var i=2;!1===a.Template.displayVolume&&(i=1);var o=u.ChartManager.instance.getIndicatorAreaName("frame0.k0",i);""===o?a.Template.createIndicatorChartComps("frame0.k0",e):u.ChartManager.instance.setIndicator(o,e)}u.ChartManager.instance.redraw("All",!0)}},{key:"addIndicator",value:function(t){u.ChartManager.instance.addIndicator(t),u.ChartManager.instance.redraw("All",!0)}},{key:"removeIndicator",value:function(t){var e=u.ChartManager.instance.getIndicatorAreaName(2);u.ChartManager.instance.removeIndicator(e),u.ChartManager.instance.redraw("All",!0)}}])&&s(t.prototype,e),r&&s(t,r),n}();(e.Chart=c).strPeriod={"zh-cn":{line:"(分时)","1min":"(1分钟)","5min":"(5分钟)","15min":"(15分钟)","30min":"(30分钟)","1hour":"(1小时)","1day":"(日线)","1week":"(周线)","3min":"(3分钟)","2hour":"(2小时)","4hour":"(4小时)","6hour":"(6小时)","12hour":"(12小时)","3day":"(3天)"},"en-us":{line:"(Line)","1min":"(1m)","5min":"(5m)","15min":"(15m)","30min":"(30m)","1hour":"(1h)","1day":"(1d)","1week":"(1w)","3min":"(3m)","2hour":"(2h)","4hour":"(4h)","6hour":"(6h)","12hour":"(12h)","3day":"(3d)"},"zh-tw":{line:"(分時)","1min":"(1分鐘)","5min":"(5分鐘)","15min":"(15分鐘)","30min":"(30分鐘)","1hour":"(1小時)","1day":"(日線)","1week":"(周線)","3min":"(3分鐘)","2hour":"(2小時)","4hour":"(4小時)","6hour":"(6小時)","12hour":"(12小時)","3day":"(3天)"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CToolManager=void 0;var o=n(1),a=n(11),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}}(n(12));function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i=function(t){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=c(this,l(n).call(this,t))).selectedObject=-1,e.toolObjects=[],e}var e,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(n,o.NamedObject),e=n,(r=[{key:"getToolObjectCount",value:function(){return this.toolObjects.length}},{key:"addToolObject",value:function(t){this.toolObjects.push(t)}},{key:"getToolObject",value:function(t){return t<this.toolObjects.length&&0<=t?this.toolObjects[t]:null}},{key:"getCurrentObject",value:function(){return this.getToolObject(this.getToolObjectCount()-1)}},{key:"getSelectedObject",value:function(){return this.getToolObject(this.selectedObject)}},{key:"delCurrentObject",value:function(){this.toolObjects.splice(this.getToolObjectCount()-1,1)}},{key:"delSelectedObject",value:function(){this.toolObjects.splice(this.selectedObject,1),this.selectedObject=-1}},{key:"acceptMouseMoveEvent",value:function(t,e){if(-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];if(null!=n&&n.getState()!==s.CToolObject.state.AfterDraw)return n.acceptMouseMoveEvent(t,e)}else{var r=this.toolObjects[this.selectedObject];if(r.getState()===s.CToolObject.state.Draw)return r.acceptMouseMoveEvent(t,e);r.unselect(),this.selectedObject=-1}for(var i in this.toolObjects)if(this.toolObjects[i].isSelected(t,e))return this.selectedObject=i,!1;return!1}},{key:"acceptMouseDownEvent",value:function(t,e){if(this.mouseDownMove=!1,-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];if(null!=n&&n.getState()!==s.CToolObject.state.AfterDraw)return n.acceptMouseDownEvent(t,e)}else{var r=this.toolObjects[this.selectedObject];if(r.getState()!==s.CToolObject.state.BeforeDraw)return r.acceptMouseDownEvent(t,e)}return!1}},{key:"acceptMouseDownMoveEvent",value:function(t,e){if(this.mouseDownMove=!0,-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];return null!=n&&n.getState()===s.CToolObject.state.Draw&&n.acceptMouseDownMoveEvent(t,e)}var r=this.toolObjects[this.selectedObject];if(r.getState()!==s.CToolObject.state.BeforeDraw){if(!0===r.acceptMouseDownMoveEvent(t,e))for(var i=this.toolObjects[this.selectedObject].points,o=0;o<i.length;o++)if(i[o].state===a.CPoint.state.Highlight||i[o].state===a.CPoint.state.Show)return!0;return!0}}},{key:"acceptMouseUpEvent",value:function(t,e){if(!0===this.mouseDownMove){if(-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];return null==n||n.getState()!==s.CToolObject.state.Draw||n.acceptMouseUpEvent(t,e)}var r=this.toolObjects[this.selectedObject];if(r.getState()!==s.CToolObject.state.BeforeDraw)return r.acceptMouseUpEvent(t,e)}if(-1!==this.selectedObject)return!0;var i=this.toolObjects[this.getToolObjectCount()-1];if(null!=i){if(i.getState()===s.CToolObject.state.Draw)return!0;if(!i.isValidMouseXY(t,e))return!1;if(i.isSelected(t,e))return!0}return!1}}])&&u(e.prototype,r),i&&u(e,i),n}();e.CToolManager=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Timeline=void 0;var o=n(1),a=n(0),s=n(2);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i=function(t){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=c(this,l(n).call(this,t)))._updated=!1,e._innerLeft=0,e._innerWidth=0,e._firstColumnLeft=0,e._scale=SCALE,e._lastScale=-1,e._maxItemCount=0,e._maxIndex=0,e._firstIndex=-1,e._selectedIndex=-1,e._savedFirstIndex=-1,e}var e,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(n,o.NamedObject),e=n,(r=[{key:"isLatestShown",value:function(){return this.getLastIndex()===this._maxIndex}},{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getItemWidth",value:function(){return n.itemWidth[this._scale]}},{key:"getSpaceWidth",value:function(){return n.spaceWidth[this._scale]}},{key:"getColumnWidth",value:function(){return this.getSpaceWidth()+this.getItemWidth()}},{key:"getInnerWidth",value:function(){return this._innerWidth}},{key:"getItemLeftOffset",value:function(){return this.getSpaceWidth()}},{key:"getItemCenterOffset",value:function(){return this.getSpaceWidth()+(this.getItemWidth()>>1)}},{key:"getFirstColumnLeft",value:function(){return this._firstColumnLeft}},{key:"getMaxItemCount",value:function(){return this._maxItemCount}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"getLastIndex",value:function(){return Math.min(this._firstIndex+this._maxItemCount,this._maxIndex)}},{key:"getSelectedIndex",value:function(){return this._selectedIndex}},{key:"getMaxIndex",value:function(){return this._maxIndex}},{key:"calcColumnCount",value:function(t){return Math.floor(t/this.getColumnWidth())<<0}},{key:"calcFirstColumnLeft",value:function(t){return this._innerLeft+this._innerWidth-this.getColumnWidth()*t}},{key:"calcFirstIndexAlignRight",value:function(t,e,n){return Math.max(0,t+Math.max(e,1)-Math.max(n,1))}},{key:"calcFirstIndex",value:function(t){return this.validateFirstIndex(this.calcFirstIndexAlignRight(this._firstIndex,this._maxItemCount,t),t)}},{key:"updateMaxItemCount",value:function(){var t,e=this.calcColumnCount(this._innerWidth);if(this._maxItemCount<1)t=this.calcFirstIndex(e);else if(this._lastScale===this._scale)t=this.validateFirstIndex(this._firstIndex-(e-this._maxItemCount));else{var n=0<=this._selectedIndex?this._selectedIndex:this.getLastIndex()-1;t=this.validateFirstIndex(n-Math.round((n-this._firstIndex)*e/this._maxItemCount))}this._lastScale=this._scale,this._firstIndex!==t&&(this._selectedIndex===this._firstIndex&&(this._selectedIndex=t),this._firstIndex=t,this._updated=!0),this._maxItemCount!==e&&(this._maxItemCount=e,this._updated=!0),this._firstColumnLeft=this.calcFirstColumnLeft(e)}},{key:"validateFirstIndex",value:function(t,e){if(this._maxIndex<1)return-1;if(t<0)return 0;var n=Math.max(0,this._maxIndex-1);return n<t?n:t}},{key:"validateSelectedIndex",value:function(){this._selectedIndex<this._firstIndex?this._selectedIndex=-1:this._selectedIndex>=this.getLastIndex()&&(this._selectedIndex=-1)}},{key:"onLayout",value:function(){var t=a.ChartManager.instance.getArea(this.getDataSourceName()+".main");if(null!==t){this._innerLeft=t.getLeft()+n.PADDING_LEFT;var e=Math.max(0,t.getWidth()-(n.PADDING_LEFT+n.PADDING_RIGHT));this._innerWidth!==e&&(this._innerWidth=e,this.updateMaxItemCount())}}},{key:"toIndex",value:function(t){return this._firstIndex+this.calcColumnCount(t-this._firstColumnLeft)}},{key:"toColumnLeft",value:function(t){return this._firstColumnLeft+this.getColumnWidth()*(t-this._firstIndex)}},{key:"toItemLeft",value:function(t){return this.toColumnLeft(t)+this.getItemLeftOffset()}},{key:"toItemCenter",value:function(t){return this.toColumnLeft(t)+this.getItemCenterOffset()}},{key:"selectAt",value:function(t){return this._selectedIndex=this.toIndex(t),this.validateSelectedIndex(),0<=this._selectedIndex}},{key:"unselect",value:function(){this._selectedIndex=-1}},{key:"update",value:function(){var t=a.ChartManager.instance.getDataSource(this.getDataSourceName()),e=this._maxIndex;switch(this._maxIndex=t.getDataCount(),t.getUpdateMode()){case s.DataSource.UpdateMode.Refresh:this._maxIndex<1?this._firstIndex=-1:this._firstIndex=Math.max(this._maxIndex-this._maxItemCount,0),this._selectedIndex=-1,this._updated=!0;break;case s.DataSource.UpdateMode.Append:var n=this.getLastIndex(),r=t.getErasedCount();n<e?0<r&&(this._firstIndex=Math.max(this._firstIndex-r,0),0<=this._selectedIndex&&(this._selectedIndex-=r,this.validateSelectedIndex()),this._updated=!0):n===e&&(this._firstIndex+=this._maxIndex-e,0<=this._selectedIndex&&(this._selectedIndex-=r,this.validateSelectedIndex()),this._updated=!0)}}},{key:"move",value:function(t){this.isLatestShown()&&a.ChartManager.instance.getArea(this.getDataSourceName()+".mainRange").setChanged(!0),this._firstIndex=this.validateFirstIndex(this._savedFirstIndex-this.calcColumnCount(t),this._maxItemCount),this._updated=!0,0<=this._selectedIndex&&this.validateSelectedIndex()}},{key:"startMove",value:function(){this._savedFirstIndex=this._firstIndex}},{key:"scale",value:function(t){this._scale+=t,this._scale<0?this._scale=0:this._scale>=n.itemWidth.length&&(this._scale=n.itemWidth.length-1),this.updateMaxItemCount(),0<=this._selectedIndex&&this.validateSelectedIndex()}}])&&u(e.prototype,r),i&&u(e,i),n}();(e.Timeline=i).itemWidth=[1,3,3,5,5,7,9,11,13,15,17,19,21,23,25,27,29],i.spaceWidth=[1,1,2,2,3,3,3,3,3,3,5,5,5,5,7,7,7],i.PADDING_LEFT=4,i.PADDING_RIGHT=8},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DockableLayout=e.TableLayout=void 0;var l=r(n(15)),I=n(0),o=r(n(6)),a=n(4);function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function p(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function h(t){var e;return s(this,h),(e=p(this,g(h).call(this,t)))._nextRowId=0,e._focusedRowIndex=-1,e}return _(h,l.ChartAreaGroup),d(h,[{key:"getNextRowId",value:function(){return this._nextRowId++}},{key:"measure",value:function(t,e,n){this.setMeasuredDimension(e,n);var r,i,o,a,s=0,u=0,c=[],l=this._areas.length;for(a=0;a<l;a+=2){if(0===(r=this._areas[a].getHeight())){if(0===a){var h=n/(2*(o=l+1>>1)+5)*2<<0;for(i=n,a=o-1;0<a;a--)c.unshift(h),i-=h;c.unshift(i);break}r=2===a?s/3:s}u+=r,s=r,c.push(r)}if(0<u){var d=n/u;for(i=n,a=(o=l+1>>1)-1;0<a;a--)c[a]*=d,i-=c[a];c[0]=i}var p=Math.min(240,e>>1),f=76,g=I.ChartManager.instance,_=g.getTimeline(this.getDataSourceName());if(0<=_.getFirstIndex()){var v=[];for(f=76;f<p;f+=8)v.push(_.calcFirstIndex(_.calcColumnCount(e-f)));var m,y,b=_.getLastIndex(),w=[".main",".secondary"],C=new Array(v.length);for(y=m=0,f=76;m<this._areas.length&&y<v.length;m+=2){var E=this._areas[m],x=g.getPlotter(E.getName()+"Range.main");for(var k in w){var S=g.getDataProvider(E.getName()+w[k]);if(void 0!==S)for(S.calcRange(v,b,C,null);y<v.length;){var A=x.getRequiredWidth(t,C[y].min),P=x.getRequiredWidth(t,C[y].max);if(Math.max(A,P)<f)break;y++,f+=8}}}}for(a=1;a<this._areas.length;a+=2)this._areas[a].measure(t,f,c[a>>1]);var T=e-f;for(a=0;a<this._areas.length;a+=2)this._areas[a].measure(t,T,c[a>>1])}},{key:"layout",value:function(t,e,n,r,i){if(f(g(h.prototype),"layout",this).call(this,t,e,n,r,i),!(this._areas.length<1)){var o,a,s=t+this._areas[0].getMeasuredWidth(),u=e;i||(i=this.isChanged());var c,l=this._areas.length;for(c=0;c<l;c++)a=u+(o=this._areas[c]).getMeasuredHeight(),o.layout(t,u,s,a,i),c++,(o=this._areas[c]).layout(s,u,this.getRight(),a,i),u=a;this.setChanged(!1)}}},{key:"drawGrid",value:function(t){if(!(this._areas.length<1)){var e=I.ChartManager.instance,n=e.getTheme(this.getFrameName());t.fillStyle=n.getColor(o.Theme.Color.Grid1),t.fillRect(this._areas[0].getRight(),this.getTop(),1,this.getHeight());var r,i=this._areas.length-2;for(r=0;r<i;r+=2)t.fillRect(this.getLeft(),this._areas[r].getBottom(),this.getWidth(),1);if(!e.getCaptureMouseWheelDirectly())for(r=0,i+=2;r<i;r+=2)if(this._areas[r].isSelected()){t.strokeStyle=n.getColor(o.Theme.Color.Indicator1),t.strokeRect(this.getLeft()+.5,this.getTop()+.5,this.getWidth()-1,this.getHeight()-1);break}}}},{key:"highlight",value:function(t){this._highlightedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).highlight(e),this._highlightedArea=e,n++,(e=this._areas[n]).highlight(null),e.highlight(e)):e.highlight(null);return null!==this._highlightedArea?this:null}},{key:"select",value:function(t){this._selectedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).select(e),this._selectedArea=e,n++,(e=this._areas[n]).select(e)):e.select(null);return null!==this._selectedArea?this:null}},{key:"onMouseMove",value:function(t,e){if(0<=this._focusedRowIndex){var n=this._areas[this._focusedRowIndex],r=this._areas[this._focusedRowIndex+2],i=e-this._oldY;if(0===i)return this;var o=this._oldUpperBottom+i,a=this._oldLowerTop+i;return 60<=o-n.getTop()&&60<=r.getBottom()-a&&(n.setBottom(o),r.setTop(a)),this}var s,u=this._areas.length-2;for(s=0;s<u;s+=2){var c=this._areas[s].getBottom();if(c-4<=e&&e<c+4)return I.ChartManager.instance.showCursor("n-resize"),this}return null}},{key:"onMouseLeave",value:function(t,e){this._focusedRowIndex=-1}},{key:"onMouseDown",value:function(t,e){var n,r=this._areas.length-2;for(n=0;n<r;n+=2){var i=this._areas[n].getBottom();if(i-4<=e&&e<i+4)return this._focusedRowIndex=n,this._oldY=e,this._oldUpperBottom=i,this._oldLowerTop=this._areas[n+2].getTop(),this}return null}},{key:"onMouseUp",value:function(t,e){if(0<=this._focusedRowIndex){this._focusedRowIndex=-1;var n,r=this._areas.length,i=[];for(n=0;n<r;n+=2)i.push(this._areas[n].getHeight());a.ChartSettings.get().charts.areaHeight=i,a.ChartSettings.save()}return this}}]),h}();e.TableLayout=h;var v=function(t){function c(t){return s(this,c),p(this,g(c).call(this,t))}return _(c,l.ChartAreaGroup),d(c,[{key:"measure",value:function(t,e,n){for(var r in f(g(c.prototype),"measure",this).call(this,t,e,n),e=this.getMeasuredWidth(),n=this.getMeasuredHeight(),this._areas){var i=this._areas[r];switch(i.measure(t,e,n),i.getDockStyle()){case l.ChartArea.DockStyle.left:case l.ChartArea.DockStyle.Right:e-=i.getMeasuredWidth();break;case l.ChartArea.DockStyle.Top:case l.ChartArea.DockStyle.Bottom:n-=i.getMeasuredHeight();break;case l.ChartArea.DockStyle.Fill:n=e=0}}}},{key:"layout",value:function(t,e,n,r,i){var o,a;for(var s in f(g(c.prototype),"layout",this).call(this,t,e,n,r,i),t=this.getLeft(),e=this.getTop(),n=this.getRight(),r=this.getBottom(),i||(i=this.isChanged()),this._areas){var u=this._areas[s];switch(u.getDockStyle()){case l.ChartArea.DockStyle.left:o=u.getMeasuredWidth(),u.layout(t,e,t+o,r,i),t+=o;break;case l.ChartArea.DockStyle.Top:a=u.getMeasuredHeight(),u.layout(t,e,n,e+a,i),e+=a;break;case l.ChartArea.DockStyle.Right:o=u.getMeasuredWidth(),u.layout(n-o,e,n,r,i),n-=o;break;case l.ChartArea.DockStyle.Bottom:a=u.getMeasuredHeight(),u.layout(t,r-a,n,r,i),r-=a;break;case l.ChartArea.DockStyle.Fill:u.layout(t,e,n,r,i),t=n,e=r}}this.setChanged(!1)}},{key:"drawGrid",value:function(t){var e=I.ChartManager.instance.getTheme(this.getFrameName()),n=this.getLeft(),r=this.getTop(),i=this.getRight(),o=this.getBottom();for(var a in t.fillStyle=e.getColor(this._gridColor),this._areas){var s=this._areas[a];switch(s.getDockStyle()){case l.ChartArea.DockStyle.Left:t.fillRect(s.getRight(),r,1,o-r),n+=s.getWidth();break;case l.ChartArea.DockStyle.Top:t.fillRect(n,s.getBottom(),i-n,1),r+=s.getHeight();break;case l.ChartArea.DockStyle.Right:t.fillRect(s.getLeft(),r,1,o-r),i-=s.getWidth();break;case l.ChartArea.DockStyle.Bottom:t.fillRect(n,s.getTop(),i-n,1),o-=s.getHeight()}}}}]),c}();e.DockableLayout=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STOCHRSIIndicator=e.PSYIndicator=e.BOLLIndicator=e.MTMIndicator=e.ROCIndicator=e.KDJIndicator=e.SARIndicator=e.WRIndicator=e.RSIIndicator=e.EMVIndicator=e.OBVIndicator=e.VRIndicator=e.BRARIndicator=e.TRIXIndicator=e.DMAIndicator=e.DMIIndicator=e.MACDIndicator=e.VOLUMEIndicator=e.EMAIndicator=e.MAIndicator=e.HLCIndicator=e.Indicator=void 0;var p=r(n(20)),o=r(n(6));function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}var v=function(){function t(){_(this,t),this._exprEnv=new p.ExprEnv,this._rid=0,this._params=[],this._assigns=[],this._outputs=[]}return h(t,[{key:"addParameter",value:function(t){this._params.push(t)}},{key:"addAssign",value:function(t){this._assigns.push(t)}},{key:"addOutput",value:function(t){this._outputs.push(t)}},{key:"getParameterCount",value:function(){return this._params.length}},{key:"getParameterAt",value:function(t){return this._params[t]}},{key:"getOutputCount",value:function(){return this._outputs.length}},{key:"getOutputAt",value:function(t){return this._outputs[t]}},{key:"clear",value:function(){var t,e;for(this._exprEnv.setFirstIndex(-1),e=this._assigns.length,t=0;t<e;t++)this._assigns[t].clear();for(e=this._outputs.length,t=0;t<e;t++)this._outputs[t].clear()}},{key:"reserve",value:function(t){var e,n;for(this._rid++,n=this._assigns.length,e=0;e<n;e++)this._assigns[e].reserve(this._rid,t);for(n=this._outputs.length,e=0;e<n;e++)this._outputs[e].reserve(this._rid,t)}},{key:"execute",value:function(t,e){if(!(e<0)){this._exprEnv.setDataSource(t),p.ExprEnv.set(this._exprEnv);try{var n,r;for(r=this._assigns.length,n=0;n<r;n++)this._assigns[n].assign(e);for(r=this._outputs.length,n=0;n<r;n++)this._outputs[n].assign(e);this._exprEnv.getFirstIndex()<0&&this._exprEnv.setFirstIndex(e)}catch(t){if(0<=this._exprEnv.getFirstIndex())throw alert(t),t}}}},{key:"getParameters",value:function(){var t,e=[],n=this._params.length;for(t=0;t<n;t++)e.push(this._params[t].getValue());return e}},{key:"setParameters",value:function(t){if(t instanceof Array&&t.length===this._params.length)for(var e in this._params)this._params[e].setValue(t[e])}}]),t}();e.Indicator=v;var c=function(t){function n(){var t;_(this,n),t=f(this,g(n).call(this));var e=new p.ParameterExpr("M1",2,1e3,60);return t.addParameter(e),t.addOutput(new p.OutputExpr("HIGH",new p.HighExpr,p.OutputExpr.outputStyle.None)),t.addOutput(new p.OutputExpr("LOW",new p.LowExpr,p.OutputExpr.outputStyle.None)),t.addOutput(new p.OutputExpr("CLOSE",new p.CloseExpr,p.OutputExpr.outputStyle.Line,o.Theme.Color.Indicator0)),t.addOutput(new p.RangeOutputExpr("MA",new p.MaExpr(new p.CloseExpr,e),p.OutputExpr.outputStyle.Line,o.Theme.Color.Indicator1)),t}return u(n,v),h(n,[{key:"getName",value:function(){return"CLOSE"}}]),n}();e.HLCIndicator=c;var l=function(t){function s(){var t;_(this,s),t=f(this,g(s).call(this));var e=new p.ParameterExpr("M1",2,1e3,7),n=new p.ParameterExpr("M2",2,1e3,30),r=new p.ParameterExpr("M3",2,1e3,0),i=new p.ParameterExpr("M4",2,1e3,0),o=new p.ParameterExpr("M5",2,1e3,0),a=new p.ParameterExpr("M6",2,1e3,0);return t.addParameter(e),t.addParameter(n),t.addParameter(r),t.addParameter(i),t.addParameter(o),t.addParameter(a),t.addOutput(new p.RangeOutputExpr("MA",new p.MaExpr(new p.CloseExpr,e))),t.addOutput(new p.RangeOutputExpr("MA",new p.MaExpr(new p.CloseExpr,n))),t.addOutput(new p.RangeOutputExpr("MA",new p.MaExpr(new p.CloseExpr,r))),t.addOutput(new p.RangeOutputExpr("MA",new p.MaExpr(new p.CloseExpr,i))),t.addOutput(new p.RangeOutputExpr("MA",new p.MaExpr(new p.CloseExpr,o))),t.addOutput(new p.RangeOutputExpr("MA",new p.MaExpr(new p.CloseExpr,a))),t}return u(s,v),h(s,[{key:"getName",value:function(){return"MA"}}]),s}();e.MAIndicator=l;var d=function(t){function s(){var t;_(this,s),t=f(this,g(s).call(this));var e=new p.ParameterExpr("M1",2,1e3,7),n=new p.ParameterExpr("M2",2,1e3,30),r=new p.ParameterExpr("M3",2,1e3,0),i=new p.ParameterExpr("M4",2,1e3,0),o=new p.ParameterExpr("M5",2,1e3,0),a=new p.ParameterExpr("M6",2,1e3,0);return t.addParameter(e),t.addParameter(n),t.addParameter(r),t.addParameter(i),t.addParameter(o),t.addParameter(a),t.addOutput(new p.RangeOutputExpr("EMA",new p.EmaExpr(new p.CloseExpr,e))),t.addOutput(new p.RangeOutputExpr("EMA",new p.EmaExpr(new p.CloseExpr,n))),t.addOutput(new p.RangeOutputExpr("EMA",new p.EmaExpr(new p.CloseExpr,r))),t.addOutput(new p.RangeOutputExpr("EMA",new p.EmaExpr(new p.CloseExpr,i))),t.addOutput(new p.RangeOutputExpr("EMA",new p.EmaExpr(new p.CloseExpr,o))),t.addOutput(new p.RangeOutputExpr("EMA",new p.EmaExpr(new p.CloseExpr,a))),t}return u(s,v),h(s,[{key:"getName",value:function(){return"EMA"}}]),s}();e.EMAIndicator=d;var m=function(t){function i(){var t;_(this,i),t=f(this,g(i).call(this));var e=new p.ParameterExpr("M1",2,500,5),n=new p.ParameterExpr("M2",2,500,10);t.addParameter(e),t.addParameter(n);var r=new p.OutputExpr("VOLUME",new p.VolumeExpr,p.OutputExpr.outputStyle.VolumeStick,o.Theme.Color.Text4);return t.addOutput(r),t.addOutput(new p.RangeOutputExpr("MA",new p.MaExpr(r,e),p.OutputExpr.outputStyle.Line,o.Theme.Color.Indicator0)),t.addOutput(new p.RangeOutputExpr("MA",new p.MaExpr(r,n),p.OutputExpr.outputStyle.Line,o.Theme.Color.Indicator1)),t}return u(i,v),h(i,[{key:"getName",value:function(){return"VOLUME"}}]),i}();e.VOLUMEIndicator=m;var y=function(t){function s(){var t;_(this,s),t=f(this,g(s).call(this));var e=new p.ParameterExpr("SHORT",2,200,12),n=new p.ParameterExpr("LONG",2,200,26),r=new p.ParameterExpr("MID",2,200,9);t.addParameter(e),t.addParameter(n),t.addParameter(r);var i=new p.OutputExpr("DIF",new p.SubExpr(new p.EmaExpr(new p.CloseExpr,e),new p.EmaExpr(new p.CloseExpr,n)));t.addOutput(i);var o=new p.OutputExpr("DEA",new p.EmaExpr(i,r));t.addOutput(o);var a=new p.OutputExpr("MACD",new p.MulExpr(new p.SubExpr(i,o),new p.ConstExpr(2)),p.OutputExpr.outputStyle.MACDStick);return t.addOutput(a),t}return u(s,v),h(s,[{key:"getName",value:function(){return"MACD"}}]),s}();e.MACDIndicator=y;var b=function(t){function d(){var t;_(this,d),t=f(this,g(d).call(this));var e=new p.ParameterExpr("N",2,90,14),n=new p.ParameterExpr("MM",2,60,6);t.addParameter(e),t.addParameter(n);var r=new p.AssignExpr("MTR",new p.ExpmemaExpr(new p.MaxExpr(new p.MaxExpr(new p.SubExpr(new p.HighExpr,new p.LowExpr),new p.AbsExpr(new p.SubExpr(new p.HighExpr,new p.RefExpr(new p.CloseExpr,new p.ConstExpr(1))))),new p.AbsExpr(new p.SubExpr(new p.RefExpr(new p.CloseExpr,new p.ConstExpr(1)),new p.LowExpr))),e));t.addAssign(r);var i=new p.AssignExpr("HD",new p.SubExpr(new p.HighExpr,new p.RefExpr(new p.HighExpr,new p.ConstExpr(1))));t.addAssign(i);var o=new p.AssignExpr("LD",new p.SubExpr(new p.RefExpr(new p.LowExpr,new p.ConstExpr(1)),new p.LowExpr));t.addAssign(o);var a=new p.AssignExpr("DMP",new p.ExpmemaExpr(new p.IfExpr(new p.AndExpr(new p.GtExpr(i,new p.ConstExpr(0)),new p.GtExpr(i,o)),i,new p.ConstExpr(0)),e));t.addAssign(a);var s=new p.AssignExpr("DMM",new p.ExpmemaExpr(new p.IfExpr(new p.AndExpr(new p.GtExpr(o,new p.ConstExpr(0)),new p.GtExpr(o,i)),o,new p.ConstExpr(0)),e));t.addAssign(s);var u=new p.OutputExpr("PDI",new p.MulExpr(new p.DivExpr(a,r),new p.ConstExpr(100)));t.addOutput(u);var c=new p.OutputExpr("MDI",new p.MulExpr(new p.DivExpr(s,r),new p.ConstExpr(100)));t.addOutput(c);var l=new p.OutputExpr("ADX",new p.ExpmemaExpr(new p.MulExpr(new p.DivExpr(new p.AbsExpr(new p.SubExpr(c,u)),new p.AddExpr(c,u)),new p.ConstExpr(100)),n));t.addOutput(l);var h=new p.OutputExpr("ADXR",new p.ExpmemaExpr(l,n));return t.addOutput(h),t}return u(d,v),h(d,[{key:"getName",value:function(){return"DMI"}}]),d}();e.DMIIndicator=b;var w=function(t){function a(){var t;_(this,a),t=f(this,g(a).call(this));var e=new p.ParameterExpr("N1",2,60,10),n=new p.ParameterExpr("N2",2,250,50),r=new p.ParameterExpr("M",2,100,10);t.addParameter(e),t.addParameter(n),t.addParameter(r);var i=new p.OutputExpr("DIF",new p.SubExpr(new p.MaExpr(new p.CloseExpr,e),new p.MaExpr(new p.CloseExpr,n)));t.addOutput(i);var o=new p.OutputExpr("DIFMA",new p.MaExpr(i,r));return t.addOutput(o),t}return u(a,v),h(a,[{key:"getName",value:function(){return"DMA"}}]),a}();e.DMAIndicator=w;var C=function(t){function a(){var t;_(this,a),t=f(this,g(a).call(this));var e=new p.ParameterExpr("N",2,100,12),n=new p.ParameterExpr("M",2,100,9);t.addParameter(e),t.addParameter(n);var r=new p.AssignExpr("MTR",new p.EmaExpr(new p.EmaExpr(new p.EmaExpr(new p.CloseExpr,e),e),e));t.addAssign(r);var i=new p.OutputExpr("TRIX",new p.MulExpr(new p.DivExpr(new p.SubExpr(r,new p.RefExpr(r,new p.ConstExpr(1))),new p.RefExpr(r,new p.ConstExpr(1))),new p.ConstExpr(100)));t.addOutput(i);var o=new p.OutputExpr("MATRIX",new p.MaExpr(i,n));return t.addOutput(o),t}return u(a,v),h(a,[{key:"getName",value:function(){return"TRIX"}}]),a}();e.TRIXIndicator=C;var E=function(t){function o(){var t;_(this,o),t=f(this,g(o).call(this));var e=new p.ParameterExpr("N",2,120,26);t.addParameter(e);var n=new p.AssignExpr("REF_CLOSE_1",new p.RefExpr(new p.CloseExpr,new p.ConstExpr(1)));t.addAssign(n);var r=new p.OutputExpr("BR",new p.MulExpr(new p.DivExpr(new p.SumExpr(new p.MaxExpr(new p.ConstExpr(0),new p.SubExpr(new p.HighExpr,n)),e),new p.SumExpr(new p.MaxExpr(new p.ConstExpr(0),new p.SubExpr(n,new p.LowExpr)),e)),new p.ConstExpr(100)));t.addOutput(r);var i=new p.OutputExpr("AR",new p.MulExpr(new p.DivExpr(new p.SumExpr(new p.SubExpr(new p.HighExpr,new p.OpenExpr),e),new p.SumExpr(new p.SubExpr(new p.OpenExpr,new p.LowExpr),e)),new p.ConstExpr(100)));return t.addOutput(i),t}return u(o,v),h(o,[{key:"getName",value:function(){return"BRAR"}}]),o}();e.BRARIndicator=E;var x=function(t){function c(){var t;_(this,c),t=f(this,g(c).call(this));var e=new p.ParameterExpr("N",2,100,26),n=new p.ParameterExpr("M",2,100,6);t.addParameter(e),t.addParameter(n);var r=new p.AssignExpr("REF_CLOSE_1",new p.RefExpr(new p.CloseExpr,new p.ConstExpr(1)));t.addAssign(r);var i=new p.AssignExpr("TH",new p.SumExpr(new p.IfExpr(new p.GtExpr(new p.CloseExpr,r),new p.VolumeExpr,new p.ConstExpr(0)),e));t.addAssign(i);var o=new p.AssignExpr("TL",new p.SumExpr(new p.IfExpr(new p.LtExpr(new p.CloseExpr,r),new p.VolumeExpr,new p.ConstExpr(0)),e));t.addAssign(o);var a=new p.AssignExpr("TQ",new p.SumExpr(new p.IfExpr(new p.EqExpr(new p.CloseExpr,r),new p.VolumeExpr,new p.ConstExpr(0)),e));t.addAssign(a);var s=new p.OutputExpr("VR",new p.MulExpr(new p.DivExpr(new p.AddExpr(new p.MulExpr(i,new p.ConstExpr(2)),a),new p.AddExpr(new p.MulExpr(o,new p.ConstExpr(2)),a)),new p.ConstExpr(100)));t.addOutput(s);var u=new p.OutputExpr("MAVR",new p.MaExpr(s,n));return t.addOutput(u),t}return u(c,v),h(c,[{key:"getName",value:function(){return"VR"}}]),c}();e.VRIndicator=x;var k=function(t){function a(){var t;_(this,a),t=f(this,g(a).call(this));var e=new p.ParameterExpr("M",2,100,30);t.addParameter(e);var n=new p.AssignExpr("REF_CLOSE_1",new p.RefExpr(new p.CloseExpr,new p.ConstExpr(1)));t.addAssign(n);var r=new p.AssignExpr("VA",new p.IfExpr(new p.GtExpr(new p.CloseExpr,n),new p.VolumeExpr,new p.NegExpr(new p.VolumeExpr)));t.addAssign(r);var i=new p.OutputExpr("OBV",new p.SumExpr(new p.IfExpr(new p.EqExpr(new p.CloseExpr,n),new p.ConstExpr(0),r),new p.ConstExpr(0)));t.addOutput(i);var o=new p.OutputExpr("MAOBV",new p.MaExpr(i,e));return t.addOutput(o),t}return u(a,v),h(a,[{key:"getName",value:function(){return"OBV"}}]),a}();e.OBVIndicator=k;var S=function(t){function s(){var t;_(this,s),t=f(this,g(s).call(this));var e=new p.ParameterExpr("N",2,90,14),n=new p.ParameterExpr("M",2,60,9);t.addParameter(e),t.addParameter(n);var r=new p.AssignExpr("VOLUME",new p.DivExpr(new p.MaExpr(new p.VolumeExpr,e),new p.VolumeExpr));t.addAssign(r);var i=new p.AssignExpr("MID",new p.MulExpr(new p.DivExpr(new p.SubExpr(new p.AddExpr(new p.HighExpr,new p.LowExpr),new p.RefExpr(new p.AddExpr(new p.HighExpr,new p.LowExpr),new p.ConstExpr(1))),new p.AddExpr(new p.HighExpr,new p.LowExpr)),new p.ConstExpr(100)));t.addAssign(i);var o=new p.OutputExpr("EMV",new p.MaExpr(new p.DivExpr(new p.MulExpr(i,new p.MulExpr(r,new p.SubExpr(new p.HighExpr,new p.LowExpr))),new p.MaExpr(new p.SubExpr(new p.HighExpr,new p.LowExpr),e)),e));t.addOutput(o);var a=new p.OutputExpr("MAEMV",new p.MaExpr(o,n));return t.addOutput(a),t}return u(s,v),h(s,[{key:"getName",value:function(){return"EMV"}}]),s}();e.EMVIndicator=S;var A=function(t){function a(){var t;_(this,a),t=f(this,g(a).call(this));var e=new p.ParameterExpr("N1",2,120,6),n=new p.ParameterExpr("N2",2,250,12),r=new p.ParameterExpr("N3",2,500,24);t.addParameter(e),t.addParameter(n),t.addParameter(r);var i=new p.AssignExpr("LC",new p.RefExpr(new p.CloseExpr,new p.ConstExpr(1)));t.addAssign(i);var o=new p.AssignExpr("CLOSE_LC",new p.SubExpr(new p.CloseExpr,i));return t.addAssign(o),t.addOutput(new p.OutputExpr("RSI1",new p.MulExpr(new p.DivExpr(new p.SmaExpr(new p.MaxExpr(o,new p.ConstExpr(0)),e,new p.ConstExpr(1)),new p.SmaExpr(new p.AbsExpr(o),e,new p.ConstExpr(1))),new p.ConstExpr(100)))),t.addOutput(new p.OutputExpr("RSI2",new p.MulExpr(new p.DivExpr(new p.SmaExpr(new p.MaxExpr(o,new p.ConstExpr(0)),n,new p.ConstExpr(1)),new p.SmaExpr(new p.AbsExpr(o),n,new p.ConstExpr(1))),new p.ConstExpr(100)))),t.addOutput(new p.OutputExpr("RSI3",new p.MulExpr(new p.DivExpr(new p.SmaExpr(new p.MaxExpr(o,new p.ConstExpr(0)),r,new p.ConstExpr(1)),new p.SmaExpr(new p.AbsExpr(o),r,new p.ConstExpr(1))),new p.ConstExpr(100)))),t}return u(a,v),h(a,[{key:"getName",value:function(){return"RSI"}}]),a}();e.RSIIndicator=A;var P=function(t){function c(){var t;_(this,c),t=f(this,g(c).call(this));var e=new p.ParameterExpr("N",2,100,10),n=new p.ParameterExpr("N1",2,100,6);t.addParameter(e),t.addParameter(n);var r=new p.AssignExpr("HHV",new p.HhvExpr(new p.HighExpr,e));t.addAssign(r);var i=new p.AssignExpr("HHV1",new p.HhvExpr(new p.HighExpr,n));t.addAssign(i);var o=new p.AssignExpr("LLV",new p.LlvExpr(new p.LowExpr,e));t.addAssign(o);var a=new p.AssignExpr("LLV1",new p.LlvExpr(new p.LowExpr,n));t.addAssign(a);var s=new p.OutputExpr("WR1",new p.MulExpr(new p.DivExpr(new p.SubExpr(r,new p.CloseExpr),new p.SubExpr(r,o)),new p.ConstExpr(100)));t.addOutput(s);var u=new p.OutputExpr("WR2",new p.MulExpr(new p.DivExpr(new p.SubExpr(i,new p.CloseExpr),new p.SubExpr(i,a)),new p.ConstExpr(100)));return t.addOutput(u),t}return u(c,v),h(c,[{key:"getName",value:function(){return"WR"}}]),c}();e.WRIndicator=P;var T=function(t){function o(){var t;_(this,o),t=f(this,g(o).call(this));var e=new p.ConstExpr(4),n=new p.ConstExpr(2),r=new p.ConstExpr(2),i=new p.ConstExpr(20);return t.addOutput(new p.OutputExpr("SAR",new p.SarExpr(e,n,r,i),p.OutputExpr.outputStyle.SARPoint)),t}return u(o,v),h(o,[{key:"getName",value:function(){return"SAR"}}]),o}();e.SARIndicator=T;var I=function(t){function l(){var t;_(this,l),t=f(this,g(l).call(this));var e=new p.ParameterExpr("N",2,90,9),n=new p.ParameterExpr("M1",2,30,3),r=new p.ParameterExpr("M2",2,30,3);t.addParameter(e),t.addParameter(n),t.addParameter(r);var i=new p.AssignExpr("HHV",new p.HhvExpr(new p.HighExpr,e));t.addAssign(i);var o=new p.AssignExpr("LLV",new p.LlvExpr(new p.LowExpr,e));t.addAssign(o);var a=new p.AssignExpr("RSV",new p.MulExpr(new p.DivExpr(new p.SubExpr(new p.CloseExpr,o),new p.SubExpr(i,o)),new p.ConstExpr(100)));t.addAssign(a);var s=new p.OutputExpr("K",new p.SmaExpr(a,n,new p.ConstExpr(1)));t.addOutput(s);var u=new p.OutputExpr("D",new p.SmaExpr(s,r,new p.ConstExpr(1)));t.addOutput(u);var c=new p.OutputExpr("J",new p.SubExpr(new p.MulExpr(s,new p.ConstExpr(3)),new p.MulExpr(u,new p.ConstExpr(2))));return t.addOutput(c),t}return u(l,v),h(l,[{key:"getName",value:function(){return"KDJ"}}]),l}();e.KDJIndicator=I;var O=function(t){function a(){var t;_(this,a),t=f(this,g(a).call(this));var e=new p.ParameterExpr("N",2,120,12),n=new p.ParameterExpr("M",2,60,6);t.addParameter(e),t.addParameter(n);var r=new p.AssignExpr("REF_CLOSE_N",new p.RefExpr(new p.CloseExpr,e));t.addAssign(r);var i=new p.OutputExpr("ROC",new p.MulExpr(new p.DivExpr(new p.SubExpr(new p.CloseExpr,r),r),new p.ConstExpr(100)));t.addOutput(i);var o=new p.OutputExpr("MAROC",new p.MaExpr(i,n));return t.addOutput(o),t}return u(a,v),h(a,[{key:"getName",value:function(){return"ROC"}}]),a}();e.ROCIndicator=O;var R=function(t){function o(){var t;_(this,o),t=f(this,g(o).call(this));var e=new p.ParameterExpr("N",2,120,12),n=new p.ParameterExpr("M",2,60,6);t.addParameter(e),t.addParameter(n);var r=new p.OutputExpr("MTM",new p.SubExpr(new p.CloseExpr,new p.RefExpr(new p.CloseExpr,e)));t.addOutput(r);var i=new p.OutputExpr("MTMMA",new p.MaExpr(r,n));return t.addOutput(i),t}return u(o,v),h(o,[{key:"getName",value:function(){return"MTM"}}]),o}();e.MTMIndicator=R;var N=function(t){function a(){var t;_(this,a),t=f(this,g(a).call(this));var e=new p.ParameterExpr("N",2,120,20);t.addParameter(e);var n=new p.AssignExpr("STD_CLOSE_N",new p.StdExpr(new p.CloseExpr,e));t.addAssign(n);var r=new p.OutputExpr("BOLL",new p.MaExpr(new p.CloseExpr,e));t.addOutput(r);var i=new p.OutputExpr("UB",new p.AddExpr(r,new p.MulExpr(new p.ConstExpr(2),n)));t.addOutput(i);var o=new p.OutputExpr("LB",new p.SubExpr(r,new p.MulExpr(new p.ConstExpr(2),n)));return t.addOutput(o),t}return u(a,v),h(a,[{key:"getName",value:function(){return"BOLL"}}]),a}();e.BOLLIndicator=N;var D=function(t){function o(){var t;_(this,o),t=f(this,g(o).call(this));var e=new p.ParameterExpr("N",2,100,12),n=new p.ParameterExpr("M",2,100,6);t.addParameter(e),t.addParameter(n);var r=new p.OutputExpr("PSY",new p.MulExpr(new p.DivExpr(new p.CountExpr(new p.GtExpr(new p.CloseExpr,new p.RefExpr(new p.CloseExpr,new p.ConstExpr(1))),e),e),new p.ConstExpr(100)));t.addOutput(r);var i=new p.OutputExpr("PSYMA",new p.MaExpr(r,n));return t.addOutput(i),t}return u(o,v),h(o,[{key:"getName",value:function(){return"PSY"}}]),o}();e.PSYIndicator=D;var M=function(t){function c(){var t;_(this,c),(t=f(this,g(c).call(this))).getName=function(){return"StochRSI"};var e=new p.ParameterExpr("N",3,100,14),n=new p.ParameterExpr("M",3,100,14),r=new p.ParameterExpr("P1",2,50,3),i=new p.ParameterExpr("P2",2,50,3);t.addParameter(e),t.addParameter(n),t.addParameter(r),t.addParameter(i);var o=new p.AssignExpr("LC",new p.RefExpr(new p.CloseExpr,new p.ConstExpr(1)));t.addAssign(o);var a=new p.AssignExpr("CLOSE_LC",new p.SubExpr(new p.CloseExpr,o));t.addAssign(a);var s=new p.AssignExpr("RSI",new p.MulExpr(new p.DivExpr(new p.SmaExpr(new p.MaxExpr(a,new p.ConstExpr(0)),e,new p.ConstExpr(1)),new p.SmaExpr(new p.AbsExpr(a),e,new p.ConstExpr(1))),new p.ConstExpr(100)));t.addAssign(s);var u=new p.OutputExpr("STOCHRSI",new p.MulExpr(new p.DivExpr(new p.MaExpr(new p.SubExpr(s,new p.LlvExpr(s,n)),r),new p.MaExpr(new p.SubExpr(new p.HhvExpr(s,n),new p.LlvExpr(s,n)),r)),new p.ConstExpr(100)));return t.addOutput(u),t.addOutput(new p.RangeOutputExpr("MA",new p.MaExpr(u,i))),t}return u(c,v),c}();e.STOCHRSIIndicator=M},function(t,e,n){var r=n(32);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0};n(45)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(33);(t.exports=n(34)(!1)).push([t.i,"html,\nbody {\n    min-height: 100%;\n    margin: 0;\n    min-width: 100%\n}\n\n.chart_container {\n    cursor: default;\n    font-family: arial, sans, serif;\n    font-size: 12px;\n    height: 100%;\n    position: relative;\n    width: 100%\n}\n\n.chart_container div,\n.chart_container ul,\n.chart_container form {\n    margin: 0;\n    padding: 0\n}\n\n.chart_container a:hover {\n    text-decoration: none\n}\n\n.chart_container ul {\n    list-style: none;\n    border: 0;\n    margin: 0;\n    padding: 0\n}\n\n.chart_container button {\n    cursor: pointer\n}\n\n#chart_dom_elem_cache {\n    *font-weight: bold;\n    position: absolute;\n    visibility: hidden;\n    z-index: -1\n}\n\n#chart_toolbar {\n    border-bottom: 1px solid;\n    *font-weight: bold;\n    height: 29px;\n    position: absolute;\n    z-index: 3\n}\n\n.chart_container.dark #chart_toolbar {\n    background-color: #1a1f30;\n    border-bottom-color: #404040\n}\n\n.chart_container.light #chart_toolbar {\n    background-color: #f5f5f5;\n    border-bottom-color: #afb1b3\n}\n\n.chart_container .chart_toolbar_sep {\n    float: left;\n    height: 100%;\n    width: 16px\n}\n\n.chart_container .chart_toolbar_minisep {\n    float: left;\n    height: 100%;\n    width: 4px\n}\n\n.chart_container .chart_dropdown {\n    display: inline-block;\n    float: left;\n    position: relative;\n    z-index: 100\n}\n\n.chart_container .chart_dropdown_t {\n    background-origin: content-box;\n    background-repeat: no-repeat;\n    border: 1px solid;\n    border-bottom-width: 0;\n    margin-top: 3px;\n    padding-right: 10px;\n    z-index: 101;\n    position: relative\n}\n\n.chart_container .chart_dropdown_t a {\n    display: inline-block;\n    padding: 3px 12px 5px 10px\n}\n\n.chart_container .chart_dropdown_data {\n    border: 1px solid;\n    display: none;\n    position: absolute;\n    padding: 6px 8px 6px 8px;\n    margin-top: -1px;\n    z-index: 100\n}\n\n.chart_container .chart_dropdown_data table {\n    border-collapse: collapse;\n    font-weight: normal;\n    white-space: nowrap\n}\n\n.chart_container .chart_dropdown_data td {\n    border-bottom: 1px solid;\n    padding: 8px 6px;\n    vertical-align: top\n}\n\n.market_chooser .chart_dropdown_data {\n    width: 370px\n}\n\n.market_chooser .chart_dropdown_data td {\n    border-bottom: 1px solid;\n    padding: 1px 6px !important;\n    vertical-align: top;\n    line-height: 24px\n}\n\n.market_chooser li {\n    float: left;\n    width: 80px;\n    height: 24px;\n    line-height: 24px\n}\n\n.chart_container .chart_dropdown_data td.marketName_ a.dark {\n    color: #fff\n}\n\n.chart_container .chart_dropdown_data td.marketName_ a.light {\n    color: #000\n}\n\n.chart_container .chart_dropdown_data table tr:last-child td {\n    border-bottom: 0\n}\n\n.chart_container .chart_dropdown_data li {\n    white-space: nowrap;\n    display: inline-block\n}\n\n.chart_container .chart_dropdown_data a {\n    text-decoration: none;\n    cursor: pointer;\n    padding: 5px 6px 5px 6px\n}\n\n.chart_container .chart_dropdown-hover.chart_dropdown_data {\n    display: block\n}\n\n#chart_dropdown_symbols .chart_dropdown_data td {\n    padding: 8px 6px 0 6px\n}\n\n#chart_dropdown_symbols .chart_dropdown_data li {\n    display: block;\n    height: 26px\n}\n\n#chart_dropdown_symbols .chart_dropdown_data a {\n    cursor: pointer\n}\n\n#chart_dropdown_themes .chart_dropdown_data td:first-child {\n    padding: 6px 1px 7px 6px\n}\n\n.chart_container.dark .chart_dropdown_t {\n    background-image: url("+r(n(35))+");\n    background-position: right 9px;\n    border-color: #0a0a0a;\n    color: #e5e5e5\n}\n\n.chart_container.dark .chart_dropdown-hover.chart_dropdown_t {\n    background-color: #0a0a0a;\n    background-image: url("+r(n(36))+");\n    background-position: right 8px;\n    border-color: #606060;\n    color: #fff\n}\n\n.chart_container.dark .chart_dropdown_data {\n    background-color: rgba(10, 10, 10, 0.8);\n    border-color: #606060\n}\n\n.chart_container.dark .chart_dropdown_data td {\n    border-bottom-color: #404040;\n    color: #e5e5e5\n}\n\n.chart_container.dark .chart_dropdown_data li a {\n    color: #1987da\n}\n\n.chart_container.dark .chart_dropdown_data li a:hover {\n    background-color: #383838\n}\n\n.chart_container.dark .chart_dropdown_data li a.selected {\n    color: #ffac00\n}\n\n.chart_container.light .chart_dropdown_t {\n    background-image: url("+r(n(37))+");\n    background-position: right 10px;\n    border-color: #fff;\n    color: #393c40\n}\n\n.chart_container.light .chart_dropdown-hover.chart_dropdown_t {\n    background-color: #fff;\n    background-image: url("+r(n(38))+");\n    background-position: right 9px;\n    border-color: #4c4f53;\n    color: #393c40\n}\n\n.chart_container.light .chart_dropdown_data {\n    background-color: #fff;\n    border-color: #4c4f53\n}\n\n.chart_container.light .chart_dropdown_data td {\n    border-bottom-color: #e4e5e6;\n    color: #393c40\n}\n\n.chart_container.light .chart_dropdown_data li a {\n    color: #1478c8\n}\n\n.chart_container.light .chart_dropdown_data a:hover {\n    background-color: #f4f4f4\n}\n\n.chart_container.light .chart_dropdown_data a.selected {\n    color: #f27935\n}\n\n.chart_container .chart_toolbar_label {\n    cursor: default;\n    display: inline-block;\n    float: left;\n    padding: 7px 4px\n}\n\n.chart_container.dark .chart_toolbar_label {\n    border-color: #232323;\n    color: #e5e5e5\n}\n\n.chart_container.light .chart_toolbar_label {\n    border-color: #fff;\n    color: #393c40\n}\n\n.chart_container .chart_toolbar_button {\n    border: 1px solid;\n    cursor: pointer;\n    float: left;\n    margin: 3px 2px;\n    padding: 3px 10px;\n    position: relative;\n    z-index: 100\n}\n\n.chart_container.dark .chart_toolbar_button {\n    border:none;\n    color: #4f5b86\n}\n\n.chart_container.dark .chart_toolbar_button:hover {\n    background-color: #383838;\n    border-color: #606060;\n    color: #fff\n}\n\n.chart_container.dark .chart_toolbar_button.selected {\n    background-color: #4c5578;\n    border:none;\n    color: #d3d3d3\n}\n\n.chart_container.dark .chart_toolbar_button.selected:hover {\n    background-color: #474747;\n    border-color: #808080;\n    color: #ffac00\n}\n\n.chart_container.light .chart_toolbar_button {\n    border:none;\n    color: #64afff\n}\n\n.chart_container.light .chart_toolbar_button:hover {\n    background-color: #f4f4f4;\n    color: #393c40\n}\n\n.chart_container.light .chart_toolbar_button.selected {\n    background-color: #64afff;\n    border-color: #f27935;\n    color: #fff\n}\n\n.chart_container .chart_toolbar_tabgroup {\n    float: left\n}\n\n.chart_container .chart_toolbar_tabgroup li {\n    display: inline-block;\n    padding: 4px 0;\n    margin: 3px 0\n}\n\n.chart_container .chart_toolbar_tabgroup li a {\n    cursor: pointer;\n    padding: 4px 4px\n}\n\n.chart_container .chart_toolbar_tabgroup li a:hover {\n    text-decoration: none\n}\n\n.chart_container.dark .chart_toolbar_tabgroup li a {\n    color: #83889E\n}\n\n.chart_container.dark .chart_toolbar_tabgroup li a:hover {\n    background-color: #383838\n}\n\n.chart_container.dark .chart_toolbar_tabgroup li a.selected {\n    color: #64afff\n}\n\n.chart_container.light .chart_toolbar_tabgroup li a {\n    color: #1478c8\n}\n\n.chart_container.light .chart_toolbar_tabgroup li a:hover {\n    background-color: #f4f4f4\n}\n\n.chart_container.light .chart_toolbar_tabgroup li a.selected {\n    color: #f27935\n}\n\n#chart_toolbar_periods_horz {\n    display: inline-block;\n    float: left;\n    position: relative;\n    z-index: 100\n}\n\n#chart_toolbar_periods_vert {\n    float: left\n}\n\n.chart_container a.chart_icon {\n    border: 1px solid;\n    height: 16px;\n    padding: 0;\n    width: 16px;\n    box-sizing:border-box;\n}\n\n.chart_container a.chart_icon:hover {\n    border-width: 2px;\n}\n\n.chart_container .chart_dropdown_data a.chart_icon {\n    display: inline-block;\n    margin: 0 6px 0 6px\n}\n\n.chart_container a.chart_icon_theme_dark,\n.chart_container .chart_dropdown_data li a.chart_icon_theme_dark:hover {\n    background-color: #000\n}\n\n.chart_container a.chart_icon_theme_light,\n.chart_container .chart_dropdown_data li a.chart_icon_theme_light:hover {\n    background-color: #fff\n}\n\n.chart_container #chart_toolbar_theme {\n    float: left;\n    padding: 0 8px;\n    display:none\n}\n\n.chart_container #chart_toolbar_theme a.chart_icon {\n    cursor: pointer;\n    float: left;\n    margin: 6px 4px\n}\n\n.chart_container #chart_select_theme td:last-child {\n    padding: 6px 6px 0 8px\n}\n\n.chart_container #chart_select_theme li {\n    padding: 0 4px 0 4px\n}\n\n.chart_container.dark a.chart_icon {\n    border-color: #aaa\n}\n\n.chart_container.dark a.chart_icon:hover {\n    border-color: #1987da\n}\n\n.chart_container.dark a.chart_icon.selected {\n    border-color: #ffac00\n}\n\n.chart_container.light a.chart_icon {\n    border-color: #aaa\n}\n\n.chart_container.light a.chart_icon.selected {\n    border-color: #f27935\n}\n\n.chart_container #chart_updated_time {\n    float: right;\n    margin: 4px 3px;\n    padding: 3px 10px\n}\n\n.chart_container.dark #chart_updated_time {\n    color: #e5e5e5\n}\n\n.chart_container.light #chart_updated_time {\n    color: #393c40\n}\n\n#chart_toolpanel {\n    border-right: 1px solid;\n    display: none;\n    position: absolute;\n    width: 32px;\n    z-index: 2\n}\n\n#chart_toolpanel .chart_toolpanel_separator {\n    position: relative;\n    height: 4px\n}\n\n#chart_toolpanel .chart_toolpanel_button {\n    position: relative;\n    z-index: 100\n}\n\n#chart_toolpanel .chart_toolpanel_icon {\n    background-origin: content-box;\n    background-repeat: no-repeat;\n    border: 1px solid;\n    cursor: pointer;\n    height: 16px;\n    margin: 1px 4px 1px 4px;\n    padding: 3px;\n    position: relative;\n    width: 16px;\n    z-index: 101\n}\n\n#chart_toolpanel .chart_toolpanel_tip {\n    border-radius: 4px;\n    border: 1px solid;\n    display: none;\n    *font-weight: bold;\n    position: absolute;\n    padding: 3px 6px 4px 6px;\n    margin-left: 36px;\n    margin-top: -25px;\n    white-space: nowrap;\n    z-index: 100\n}\n\n#chart_toolpanel .chart_toolpanel_button:hover .chart_toolpanel_tip {\n    display: block\n}\n\n.chart_container.dark #chart_toolpanel {\n    background-color: #0a0a0a;\n    border-right-color: #404040\n}\n\n.chart_container.dark .chart_toolpanel_icon {\n    background-color: #0a0a0a;\n    border-color: #0a0a0a\n}\n\n.chart_container.dark .chart_toolpanel_button:hover .chart_toolpanel_icon {\n    background-color: #404040;\n    border-color: #666\n}\n\n.chart_container.dark .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-color: #080808;\n    border-color: #666\n}\n\n.chart_container.dark .chart_toolpanel_tip {\n    background-color: #ffac00;\n    border-color: #ffac00;\n    color: #0a0a0a\n}\n\n.chart_container.light #chart_toolpanel {\n    background-color: #fff;\n    border-right-color: #afb1b3\n}\n\n.chart_container.light .chart_toolpanel_icon {\n    background-color: #fff;\n    border-color: #fff\n}\n\n.chart_container.light .chart_toolpanel_button:hover .chart_toolpanel_icon {\n    background-color: #eee;\n    border-color: #afb1b3\n}\n\n.chart_container.light .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-color: #f4f4f4;\n    border-color: #afb1b3\n}\n\n.chart_container.light .chart_toolpanel_tip {\n    background-color: #f27938;\n    border-color: #f27938;\n    color: #eee\n}\n\n.chart_container.dark #chart_toolpanel .chart_toolpanel_button .chart_toolpanel_icon {\n    background-image: url("+r(n(39))+")\n}\n\n.chart_container.dark #chart_toolpanel .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-image: url("+r(n(40))+")\n}\n\n.chart_container.dark #chart_toolbar .chart_BoxSize {\n    background: url("+r(n(41))+") no-repeat;\n}\n\n.chart_container.light #chart_toolpanel .chart_toolpanel_button .chart_toolpanel_icon {\n    background-image: url("+r(n(42))+")\n}\n\n.chart_container.light #chart_toolpanel .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-image: url("+r(n(43))+")\n}\n\n.chart_container.light #chart_toolbar .chart_BoxSize {\n    background: url("+r(n(44))+') no-repeat;\n}\n\n.chart_container #chart_toolpanel #chart_Cursor {\n    background-position: 0 0\n}\n\n.chart_container #chart_toolpanel #chart_CrossCursor {\n    background-position: 0 -20px\n}\n\n.chart_container #chart_toolpanel #chart_SegLine {\n    background-position: 0 -40px\n}\n\n.chart_container #chart_toolpanel #chart_StraightLine {\n    background-position: 0 -60px\n}\n\n.chart_container #chart_toolpanel #chart_RayLine {\n    background-position: 0 -100px\n}\n\n.chart_container #chart_toolpanel #chart_ArrowLine {\n    background-position: 0 -80px\n}\n\n.chart_container #chart_toolpanel #chart_HoriSegLine {\n    background-position: 0 -160px\n}\n\n.chart_container #chart_toolpanel #chart_HoriStraightLine {\n    background-position: 0 -120px\n}\n\n.chart_container #chart_toolpanel #chart_HoriRayLine {\n    background-position: 0 -140px\n}\n\n.chart_container #chart_toolpanel #chart_VertiStraightLine {\n    background-position: 0 -180px\n}\n\n.chart_container #chart_toolpanel #chart_PriceLine {\n    background-position: 0 -200px\n}\n\n.chart_container #chart_toolpanel #chart_TriParallelLine {\n    background-position: 0 -220px\n}\n\n.chart_container #chart_toolpanel #chart_BiParallelLine {\n    background-position: 0 -240px\n}\n\n.chart_container #chart_toolpanel #chart_BiParallelRayLine {\n    background-position: 0 -260px\n}\n\n.chart_container .chart_toolpanel_button #chart_DrawFibRetrace {\n    background-position: 0 -280px\n}\n\n.chart_container #chart_toolpanel #chart_DrawFibFans {\n    background-position: 0 -300px\n}\n\n#chart_tabbar {\n    border-top: 1px solid;\n    cursor: default;\n    display: none;\n    *font-weight: bold;\n    height: 22px;\n    overflow: hidden;\n    position: absolute;\n    z-index: 1\n}\n\n#chart_tabbar ul {\n    height: 100%;\n    list-style: none;\n    padding: 0 0 0 4px\n}\n\n#chart_tabbar li {\n    display: inline-block;\n    height: 100%;\n    margin: 0\n}\n\n#chart_tabbar a {\n    cursor: pointer;\n    display: inline-block;\n    height: 100%;\n    margin: 0;\n    padding: 3px 4px 0 4px;\n    overflow: hidden\n}\n\n#chart_tabbar a:hover {\n    text-decoration: none\n}\n\n.chart_container.dark #chart_tabbar {\n    background-color: #1a1f30;\n    border-top-color: #404040\n}\n\n.chart_container.dark #chart_tabbar a {\n    color: #e5e5e5\n}\n\n.chart_container.dark #chart_tabbar a:hover {\n    background-color: #383838;\n    color: #fff\n}\n\n.chart_container.dark #chart_tabbar a.selected {\n    color: #ffac00\n}\n\n.chart_container.light #chart_tabbar {\n    background-color: #fff;\n    border-top-color: #afb1b3\n}\n\n.chart_container.light #chart_tabbar a {\n    color: #393c40\n}\n\n.chart_container.light #chart_tabbar a:hover {\n    background-color: #f4f4f4;\n    color: #393c40\n}\n\n.chart_container.light #chart_tabbar a.selected {\n    color: #f27935\n}\n\n#chart_canvasGroup {\n    position: absolute;\n    z-index: 0\n}\n\n#chart_mainCanvas {\n    overflow: hidden;\n    position: absolute;\n    z-index: 0\n}\n\n#chart_overlayCanvas {\n    overflow: hidden;\n    position: absolute;\n    z-index: 2\n}\n\n#chart_loading {\n    border: 1px solid;\n    border-radius: 4px;\n    font-size: 18px;\n    font-weight: bold;\n    line-height: 48px;\n    overflow: hidden;\n    position: absolute;\n    text-align: center;\n    visibility: hidden;\n    width: 200px;\n    z-index: 200\n}\n\n#chart_loading.activated {\n    visibility: visible\n}\n\n.chart_container.dark #chart_loading {\n    border-color: #aaa;\n    background-color: rgba(0, 0, 0, 0.6);\n    color: #ccc\n}\n\n.chart_container.light #chart_loading {\n    border-color: #afb1b3;\n    background-color: rgba(244, 244, 244, 0.8);\n    color: #393c40\n}\n\n#chart_parameter_settings {\n    border-radius: 4px;\n    border: 1px solid;\n    width: 640px;\n    position: absolute;\n    overflow: hidden;\n    visibility: hidden;\n    z-index: 500\n}\n\n#chart_parameter_settings.clicked {\n    visibility: visible\n}\n\n#chart_parameter_settings h2 {\n    padding: 8px 12px;\n    margin: 0\n}\n\n#chart_parameter_settings table {\n    border-collapse: collapse;\n    width: 100%\n}\n\n#chart_parameter_settings tr {\n    line-height: 32px\n}\n\n#chart_parameter_settings th {\n    text-align: right;\n    padding: 0 4px 0 16px\n}\n\n#chart_parameter_settings input {\n    width: 2em;\n    margin: 0 2px 0 2px\n}\n\n#chart_parameter_settings #close_settings {\n    border-radius: 4px;\n    cursor: pointer;\n    font-weight: bold;\n    text-align: center;\n    margin: 8px auto;\n    padding: 5px 24px 5px 24px;\n    width: 84px\n}\n\n#chart_parameter_settings .chart_str_default {\n    margin-right: 24px\n}\n\n.chart_container.dark #chart_parameter_settings {\n    background-color: rgba(0, 0, 0, 0.9);\n    border-color: rgba(0, 0, 0, 0.9);\n    color: #ccc;\n}\n\n.chart_container.dark #chart_parameter_settings #close_settings {\n    background: #1887da;\n    color: #eee\n}\n\n.chart_container.light #chart_parameter_settings {\n    background-color: rgba(244, 244, 244, 0.8);\n    border-color: #afb1b3;\n    color: #393c40\n}\n\n.chart_container.light #chart_parameter_settings #close_settings {\n    background: #1478c8;\n    color: #eee\n}\n\n.chart_container input,\n.chart_container button {\n    border-radius: 4px;\n    border: 1px solid;\n    padding: 4px\n}\n\n.chart_container input[type=text] {\n    width: 12em\n}\n\n.chart_container input[type=button],\n.chart_container input[type=submit],\n.chart_container button {\n    font-family: arial, sans, serif;\n    padding: 4px 8px;\n    cursor: pointer\n}\n\n.chart_container.dark input,\n.chart_container.dark button {\n    background-color: #151515;\n    border-color: #333;\n    color: #ccc\n}\n\n.chart_container.light input,\n.chart_container.light button {\n    background-color: #ddd;\n    border-color: #ddd;\n    color: #222\n}\n\n.trade_container {\n    width: 250px;\n    height: 100%;\n    float: right;\n    z-index: 99999;\n    font-size: 12px;\n    overflow: hidden\n}\n\n.trade_container.dark {\n    background: #0a0a0a;\n    color: #f1f1f1\n}\n\n.m_righttop {\n    position: fixed;\n    top: 0;\n    height: 41px;\n    line-height: 41px;\n    width: 230px;\n    text-align: right;\n    padding-right: 20px;\n    font-size: 16px;\n    color: #f78d15;\n    font-family: Gotham, "Helvetica Neue", Helvetica, Arial, sans-serif\n}\n\n.m_righttop em {\n    width: 123px;\n    height: 28px;\n    background-position: 0 0;\n    display: block;\n    float: right;\n    margin-top: 5px\n}\n\n.dark .m_righttop em {\n    background-position: 0 0\n}\n\n.m_rightbot {\n    height: 22px;\n    line-height: 22px;\n    border-top: 1px solid #404040;\n    width: 230px;\n    text-align: right;\n    padding-right: 20px;\n    background-color: #0a0a0a;\n    border-bottom-color: #404040\n}\n\n.m_guadan {\n    margin-top: 29px;\n    overflow: hidden;\n    border-left: 1px solid #404040;\n    border-top: 1px solid #404040\n}\n\n.m_guadan a {\n    font-weight: bold;\n    color: #FFF;\n    text-decoration: none\n}\n\n.light .m_guadan {\n    margin-top: 29px;\n    overflow: hidden;\n    border-left: 1px solid #afb1b3;\n    border-top: 1px solid #afb1b3\n}\n\n#orderbook #asks,\n#orderbook #gasks,\n#orderbook #bids,\n#orderbook #gbids {\n    height: 195px;\n    position: relative;\n    display: inline-block;\n    overflow: hidden\n}\n\n.symbol-title {\n    font-size: 14px;\n    font-weight: bold;\n    text-align: center;\n    height: 16px;\n    line-height: 16px;\n    font-family: Arial, sans, serif;\n    padding: 5px\n}\n\n.symbol-title .dark {\n    color: #6BF\n}\n\n.symbol-title .infoDepth {\n    margin-left: 8px;\n    color: #f78d15\n}\n\n.symbol-title a:hover {\n    text-decoration: underline\n}\n\n#asks,\n#bids {\n    width: 150px\n}\n\n#orderbook {\n    padding-left: 3px;\n    border-bottom: 1px solid #222;\n    padding-bottom: 2px;\n    margin-left: 5px;\n    margin-bottom: 2px\n}\n\n#orderbook .table {\n    position: absolute;\n    border-collapse: collapse;\n    padding: 0;\n    margin: 0\n}\n\n#gasks .table,\n#asks .table {\n    bottom: 0\n}\n\n#orderbook .table .row {\n    padding: 0;\n    margin: 0;\n    height: 13px;\n    line-height: 13px;\n    font-family: Consolas, monospace\n}\n\n#orderbook .table .row {\n    line-height: 13px\n}\n\n#orderbook .table .g {\n    color: #666\n}\n\n#gasks,\n#gbids {\n    width: 80px\n}\n\n#gasks .amount,\n#gbids .amount {\n    float: right\n}\n\n#gasks .price,\n#gbids .price {\n    float: left;\n    text-align: right\n}\n\n.price {\n    margin-right: 10px\n}\n\n.price h {\n    visibility: hidden\n}\n\n.price g,\n.amount g {\n    color: #666\n}\n\n#price {\n    text-align: center;\n    font-size: 16px;\n    font-weight: bold;\n    height: 25px;\n    line-height: 25px\n}\n\n.trade_container .green {\n    color: #0F0\n}\n\n.trade_container .red {\n    color: #F00\n}\n\n.trade_container.dark #orderbook div.table div.remove g,\n.trade_container.dark #orderbook div.table div.remove span {\n    color: #444\n}\n\n.trade_container.light #orderbook div.table div.remove g,\n.trade_container.light #orderbook div.table div.remove span {\n    color: #ddd\n}\n\n.trade_container.dark #orderbook div.table div.add {\n    display: none;\n    background-color: rgba(238, 238, 238, 0.2)\n}\n\n.trade_container.light #orderbook div.table div.add {\n    display: none;\n    background-color: rgba(100, 100, 100, 0.2)\n}\n\n#trades {\n    overflow-y: auto;\n    text-align: left;\n    color: #666;\n    padding-top: 5px\n}\n\n.trade_container.light {\n    background: #fff;\n    border-left: 1px solid #afb1b3;\n    color: #000\n}\n\n.trade_container.light .m_righttop em {\n    background-position: 0 -32px\n}\n\n.trade_container.light .m_righttop {\n    position: fixed;\n    top: 0;\n    height: 40px;\n    line-height: 40px;\n    background: #FFF;\n    width: 230px;\n    border-bottom: 1px solid #afb1b3;\n    text-align: right;\n    padding-right: 20px\n}\n\n.trade_container.light #trades.trades table {\n    color: #333\n}\n\n.trade_container.light #trades.trades .v {\n    color: #333\n}\n\n.trade_container.light #trades.trades .v g {\n    color: #333\n}\n\n.trade_container.light .m_rightbot {\n    background: #fff;\n    border-top: 1px solid #afb1b3\n}\n\n.trade_container.light #orderbook {\n    border-bottom: 1px solid #afb1b3\n}\n\n.trades_list {\n    padding-left: 25px\n}\n\n.trades_list ul {\n    width: 200px;\n    height: 14px;\n    line-height: 14px;\n    text-align: left;\n    list-style: none;\n    clear: both;\n    zoom: 1;\n    margin: 0;\n    padding: 0\n}\n\n.trades_list ul li {\n    height: 14px;\n    line-height: 14px;\n    color: #999;\n    font-size: 12px;\n    list-style: none;\n    float: left;\n    *display: inline;\n    margin: 0;\n    padding: 0;\n    font-family: Consolas, monospace\n}\n\n.trades_list ul li.tm {\n    width: 62px;\n    color: #999\n}\n\n.trades_list ul li.pr-green {\n    width: 65px;\n    color: #6c6\n}\n\n.trades_list ul li.pr-red {\n    width: 65px;\n    color: #c66\n}\n\n.trades_list ul li.vl {\n    width: 60px;\n    color: #ccc\n}\n\n.trades_list ul li.vl g {\n    color: #666\n}\n\n.trade_container.dark .trades_list ul.newul {\n    display: none;\n    background-color: rgba(238, 238, 238, 0.2)\n}\n\n.trade_container.light .trades_list ul.newul {\n    display: none;\n    background-color: rgba(100, 100, 100, 0.2)\n}\n\n.light .trades_list ul li.tm {\n    color: #333\n}\n\n.light .trades_list ul li.pr-green {\n    color: #6c6\n}\n\n.light .trades_list ul li.pr-red {\n    color: #c66\n}\n\n.light .trades_list ul li.vl {\n    color: #333\n}\n\n.light .trades_list ul li.vl g {\n    color: #333\n}\n\n.container .nav {\n    margin: 0;\n    list-style: none;\n    padding: 0 0 0 3px;\n    height: 41px\n}\n\n.container .nav li {\n    display: inline-block;\n    margin-right: 9px\n}\n\n.container a {\n    text-decoration: none;\n    color: #6BF;\n    font-family: Arial, sans, serif\n}\n\n.container a:hover {\n    text-decoration: underline\n}\n\n.container a.active {\n    color: #FC9\n}\n\n.container span {\n    margin-left: 3px;\n    font-family: Consolas, monospace;\n    color: #ccc\n}\n\n.light .container span {\n    color: #333\n}\n\n.light .container a {\n    text-decoration: none;\n    color: #1478c8;\n    font-family: Arial, sans, serif\n}\n\n.chart_BoxSize {\n    width: 20px;\n    height: 20px\n}\n',""])},function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e){t.exports=function(n){var a=[];return a.toString=function(){return this.map(function(t){var e=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(t,n);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},a.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(n[i]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&n[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),a.push(o))}},a}},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAJn2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj42PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NTwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDY8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0xMi0wM1QxNzo1Njo1MiswODowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDozNjIzYmJlYi1iNGU2LWNhNDktOTRjZi05MTIyY2Q1Y2NiZTk8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjM2MjNiYmViLWI0ZTYtY2E0OS05NGNmLTkxMjJjZDVjY2JlOTwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDo2QzE5MkVEOTY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBODwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDo4MzE3OTEwZi1kOTE5LTY4NDAtYWVhOS0zNzI5NWE2NGI1NmU8L3N0UmVmOmluc3RhbmNlSUQ+CiAgICAgICAgICAgIDxzdFJlZjpkb2N1bWVudElEPnhtcC5kaWQ6MWYwY2U2ZjQtZTRlNS1jODQ3LWIyOTgtNGNkNjRiYzBkYzA2PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE0LTEyLTAzVDE3OjU2OjUyKzA4OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxNC0xMi0wM1QxNzo1NjoyOCswODowMDwveG1wOkNyZWF0ZURhdGU+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE0LTEyLTAzVDE3OjU2OjUyKzA4OjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgqC9xe+AAAAWUlEQVQIHWO8cOHCFgYGBm8gRgZbmRgZGXOBIj+QRH8wMTHlMenr69////9/J0wCxNbT07vHCBK4f/8+x8ePH6+B2Pz8/FqKioo/mEAcEAOoEmRkHogNEgMA0qYfb8X3frQAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA21pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0E5Qjc0ODc3QUQ0MTFFNDhCN0ZBNEVBQTM1QTBFNjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0E5Qjc0ODY3QUQ0MTFFNDhCN0ZBNEVBQTM1QTBFNjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2MjNiYmViLWI0ZTYtY2E0OS05NGNmLTkxMjJjZDVjY2JlOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QzE5MkVEOTY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvrZrC8AAABOSURBVHjaYvz//z8DCFy8eNEbSDHq6+tvAfEZQRJAQQ4g+xoDBGgBJX8wQTkVQKwIxRVgHRcuXFCEquaAKvoBxNogHZORBBmg7EkAAQYAImEV+46peUgAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3FpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkMxOTJFRDk2NTdFMTFFNEFFMDJBOUZGMjQ2MkEwQTgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkMxOTJFRDg2NTdFMTFFNEFFMDJBOUZGMjQ2MkEwQTgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjgzMTc5MTBmLWQ5MTktNjg0MC1hZWE5LTM3Mjk1YTY0YjU2ZSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5MkIK1AAAAPklEQVR42mJ0CUvewsDA4M2ACrYyAYlcIP6BJAhi54Ek7gNxJ5IEiH2PCcrpgCq4D2UzsCBpBxnJCDMWIMAAVuANgw9cJ2UAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADcWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFmMGNlNmY0LWU0ZTUtYzg0Ny1iMjk4LTRjZDY0YmMwZGMwNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2QzE5MkVEOTY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBOCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2QzE5MkVEODY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBOCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODMxNzkxMGYtZDkxOS02ODQwLWFlYTktMzcyOTVhNjRiNTZlIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFmMGNlNmY0LWU0ZTUtYzg0Ny1iMjk4LTRjZDY0YmMwZGMwNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkyQgrUAAABCSURBVBhXY3QJS2aAAh8g/g/EW0EcJhABBBxAPAmIJ0PZcIkKIFaEYhAbLKEExOUgDhSA2IogCZARYO1QAGQzTAYAPbkH1E4jJr8AAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0EwQTE5MkI4MTFEMTFFNEI4Njg4OEVFQzVGMTEyOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0EwQTE5MkE4MTFEMTFFNEI4Njg4OEVFQzVGMTEyOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjYzNEUzRUIyODExOTExRTRBNkJDQzhDODM5MEQxQTkwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjYzNEUzRUIzODExOTExRTRBNkJDQzhDODM5MEQxQTkwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+VsD84AAABMxJREFUeNrsXEloFEEU7QztBgoKkmgueogajSQRBEEQJ3jITVDUgxL1YoggHlSU6MHlKkEQ3FFREEEviogexJlTDqIxcQl60Is4oujFDVFhfN+p1kqlu7ZZMhN+w6My1f1fVXf9ev2r+6eDfD4fRMhkMpeBaXKdCalg5NYFPMpms0sDy62OWKINhtGPn8ABoC+dTud1BKmE+onAUeAOSBt8CKKtExgESafrKagb1fcB+3FKv1x68K8hYA/Qj0aafAiijUZnACRdUUVoYfQbuA8MAy+BF8BzG4LPwARgCtCLcx9wGYVXwHLgqvjd6zKMGWAZWqRunhF1a3HeC2wITtHYw/gT/UD5AMWQOG6v0Q/iNrTcI4jJvZtA+sZ1GK8AX4V773J1ZTqNLyjOi16ccD4Fp+lcmwRavYM+Zlw10XljghIQ1NFQafa3k6xr5kkH+8H48AOWtDEgGBUGuQSVYoLl5b8r6wfofqu43QcuMZJsfARYAiEZdOqBZHxINrYNMBKNjQQmYy2BjXEiga1xLIGLcVy0HhkfhPGQ7Y1FPYd2W+NCWKr4tuvcKHouhIaVCktaOQlw4etRvE95GpPHngUafVR5xFyxVST1oP+y5iPlJXVlW00cUsK7uirVRO3Vtlmx+IhL6UbBdLW1BD5qLKvyLJSnfYwjTXwHNMD4A0taBQkw7ItQbAXmWhMIo/UCLaK6L3RoeAP5ilJ30TVOpOcoPeLnMHynJeWoxrOlh1PXrZc8irhQDw4D1zhO5DiR48SaeZ5oiJvqqfQV1chjt1cmTtRNNBdZj52lJkUyx0y+EWr5I1XbmIk1kTWRCZig/ASqeyet4HTvWNKRkSDLOt0bbad56Pjkgv2ACZiACewjFJunV6MIrLRPF2AoPejgCIUJmIAJakMTVfEJZSPaCWRMrcrHO2tibA9cNVE+nv2ACaqDgPPSqjqtzHbtXPTStzRPsopZO7MncoIjE5SDALMvJ8SjMfpbEpTYurgZmHOpCzVakLOpS+xBXKtOPVBbjLsGVTSMscPjShAZCbL+omQdZOucCWLHmKdzrROY3vpp8xMtjEfnJ9omtankYdJ6UDbWkVvfXIk8akAmD6VueT1TC5OywZVzTiQPA807VhP53w3q2paguq3ADaBdt98rP1EeSufwVu2ZU4ykzT8wvWvX5h+Y3nhrc/dN+YmmiWWTn6h9F8+ayJrImlikJkbgnG3O2WZNLLUmOhrH5ycmGetmaWg7hZMEN6UTzKIfxtlqYuLOymui7VBqPZHzEz2f6vLb/zHOjCs+sc3mFanoUaYspzBOXlxn2JXZlVnSKkSAEZmB4gKwG6PxWt5ne2vbCdxWjbUxUsztblJ5XNn34qGHZDvZ650r6ueh2AfcSgqyiPgccAkXLqvUbwZWAcew72HSKGwEcorx/KDwr4nTgW1kHDsKOHAOijVAt/hNn/vaAqwUrQ7oojSasseBezjwJn43B4UPbD2h9QHqvpv8YHVQ+DbaXRhTD1YEhe/Gxa0b6LtZzfLSd6a4cPQtrE3AY9HqD7F/KorFAMWS9F+mRDAcLX1HxYrAW6BNGC0EiOgZ8JRKEH8bcQpKpugO4KMwoI+tnVS/FSc/Q4nz8W7T9/LU1bt3sitrYhD8EWAAdoU1AmCjen8AAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI0MkEyMUI4MTIwMTFFNDgxNjhGRjc0RjJGMjMwQkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI0MkEyMUE4MTIwMTFFNDgxNjhGRjc0RjJGMjMwQkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjZDNzdDQUY4NjU3RTExRTRBRTAyQTlGRjI0NjJBMEE4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjZDNzdDQUY5NjU3RTExRTRBRTAyQTlGRjI0NjJBMEE4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+s3AxtQAABPZJREFUeNrsXE1oHkUYnvkYq0IFC5ImubRI1WolSUEoFIqWHnIr6KqHStWLtaceJFhyUryG4ElKf8RaKELNYkFETyYXPYhNW3+CHtqL+NX+XdoKxQrTZ3bny7ffdv43+Wziu/BssrP7Pjs7M++z7+683zIpJVvEDDsBPNJT5kGL9S57gTMs58+xwKVlKHsC+A4kEwBPIVDLGmAK+Bok61MIOss4cA4k46kEahnUNZkCHkghUItqiwnge5BsSiHoLKp35kGyt1MgAoz+Bb4FFoDfgd+AX0MIbgDqmh8GJlkm52Ma8QKwHfhMb0/G9MIssA1nVNU8rMtewnU/FUJwqOj7TF4vtjL5A9bn9XHvGrtHOYRzyfl+TfwPsAmkf8R240nglh7e79R3+rsxkzdRi481wUfxl5DojauGIOez//s2WBEEHLcyV1eNFbJu95Od7nsfyGPvjdSN/804IElrTCCiLXIum9cgk7xA/8dBzkf07T6hDUrjD4CtqH5XZIKC6hk2ApwGxur7Ghn7CTzGboIAYztBoLGZIML4XoKu8WjoI4+oj+3iZpLJ88HjA2eTlRrImAeuJbmxCJOLkqgutyZ29WEA68utRGMlLkeAYRY7cOq+IlKkvEfWAs9qHe596IWywazDXSRJeY87N9REEdzaVkEJbO1lFpSA1vYpUqe14wRVi+pgrJTXe+ESsB5nvkKa2E9NzPkzWL8JbBSRRq9obNGl0zE1eBV4r1b2SWycqN7m7NdbCxg7W1qRUj5UeTn1eXgjdn3l/UIfcv4X/j8VpsoUJ1KcSHHi/U5QxomsWZyY86HGcWIj4zgCi5f6ojR/zJQaofYhUg2MmURyhGptA9JE0kQioGjdJ6j6Jey9Q9k+x/LColFJNhf77Bzk5rH3BfJGIiACInBoYqD2uUW1qn0BKQNuVVaT0RShEAEREMHK0MTa8WmaWDk+XhONNYjVxMrxpIlEsBIIKD+xPwR2PQjUypZX+zwiu8yTdSFaSRmSlOBIBMvhjTlvax0YXvy/qw3mMoMHtmPKXK8D2yFlwiNpw9ZtTeZTpLazDe4LXxDGxqlfe9A46BgpspzPNJP1TL4cT2Dqd1KkFU+gpgxzfhoYs+wfULf/ltW4mndi3l/kJwpHMLHVYdwhvyRsz4M9xg7y8EasBlwV8mpeWtI7NeGdoPWRO+dYg3JxUo31/l53TunK6JmdWs3ifMEwQsPzE23DO2jG25m778tP9OZkqcaaYQOOgNs5F0+qTJpImthUE43ORDnblLNNmpisicmRifl3LLYzO7xUBLuwRXBbLsFs/jIuwEtFYFjj+B1LQ02knG1G+YmMMuOW5O2+CE4bsRzXeIJiFYwDEZt7syrbgIYySVrfCHK+DvgCeDy1BgeAr9CVF9OHMmMP+h+6ljzd2N0uyvahtDnXnKtPoh0EvhQO9uPAp2i4uVr568Au4EPs+9HWC3uAds34SVb+NPFR4C1lbO6FnG/A+kVgn95Wn/t6A3hen3XePg7KT7xNFNXP5FVsb9ZnXQu8bfpeWL0Gu1n5bbRvYKxqsAOYtjx0qM9ebe7qQc4fw/ooK7+F9RpwtngqyeRtvV/V4llAxc/qV6aKYKEkMMWKjP0JjGqjpwFF9Avwc/E3k393Fal8iKhmyR8DrmmDn5j6yFom79hE1TTG98EgSOvMlxCR7EqiythdAQYAbEvqZUahHBUAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABC0lEQVQ4T7WTYVEDMRSEv1VAJYCDOmgdgAPAASigKGhx0CoACcUBEsDBVcFj9ibpvF6TDn/IzM0kL9l9t5usImIFvHA6niVtcikinoB1qg3AmyIiSnEslPle0n5CsAT8eZjsChgqwaEUtpIeJ39zsoyILXAPjJhK8Apcl40uSQLvgG9LPxJIWqUDZyQZLOmhemcC6/mqmlskU7A1RYT9mKultwDuLEvSEBE2+MOdp+ebBKXDzOBLhnrvfwiKhFvgJkl4b13xJRN3VXPH2Dmw6F3jEVw9mJLka/RTzg/pDNwiAX7yQ7LbM6ALbpCMGEvwZAwGUBP42QnTIoXJDQ8mcJxrumqjv8TZYdr8Ai/uwaXkPGIcAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI1Q0Q4QzI4MTIxMTFFNEFGNzk4NUQxNjVEMjU2RTYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI1Q0Q4QzE4MTIxMTFFNEFGNzk4NUQxNjVEMjU2RTYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwNTdERDc2N0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwNTdERDc3N0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+R+XfywAABNVJREFUeNrsXEloFEEU7QztBgoKkmgueogajSQRBFEMJnjITVDUgxL1YogXDypK9OBylSAI4r6CCOpBEdGDOAEhB9GYuIR40Is4QdGLG6LC+H6mWsua7lq6Z8aZ8Bsela7u/7q669ebX10/7WWzWS/A0uWtl4Apcp0JKe/frQN4vKylbbFnuVURS7DBMNj5AewDevoepLM6glRE/XjgMHAHpDVxCIKtHRgASbvrLagb1fcAe3FLP11a8OdCwC6gDxepi0MQbNQ7/SDpCCp8C6NfwH1gCHgJDAMvbAg+AeOASUA37r3fpRde0TMFroj9bpduTANLcEVq5klRtwb3Pc+G4Dj1PYw/0g7KhygGxXm7jX4QtuHKXYKY3LsOpG9cu/Ey8EW49w5XV6bb+IzirGjFMedbcBrOlUmg1TvoY9pVE503JigAQRV1leZ4M8m6Zpy0sR+MDT9gSUtO4Lsa5IVBLkGlGGBZ+e/S+gGa3yh+7t2fgTA+BCyCkAw4tUAyPiAb2wYYkcZGApOxlsDGOJLA1jiUwMU4LFoPjPfDeND2h0W9h2Zb49FN9W3XsZF4LPiGmQprYjE0UXK6ahTvUjGNyWNPAbV+TONgrIzYKpJ60l9ZiyPlBXVlW00cVMK7qjLVRO3TtpmxxBGXwvWC6WlrCeKosazKM1CeiGMcDOcRoAbG71kTS6iJ6PYFKLYAs61bIIzWCTSI6h6XFqwnX1HqzrvGifQepUvsDsF3GlKOajxTejl1zXrKo4gLteAgcJXjRI4TOU6smPeJhripmspYLZA8dltp4kTdQHOR9dBRalIkc8wUN0ItfqRqGzOxJrImMgETFJ9Ade+oGZxujaU1MBJkvU6/jbbD3Hd8c8F+wARMwAT2EYrN26s8Aivts32HMroYzREKEzABE1SEJqri48tGdBBIm64qn++siaEtcNVE+Xz2AyYoDwLOSyvrtDLbuXPiqW9h3mQlmTuzJ3KCIxMUgwCjLyPEozb4WxKU0LqwEZhxqfM1WpCxqYtsQdhVnVqgXjHsGZRRN4Z2j6sqB0ZEBlxPJOsgW+tMENrHPJwrhEA3nLWrftr8RAvj/PxE26Q2dd3Zj5oPysY6cusfVyIPLiCT+1KzYr1T86OywZV7jiT3Pc0aq4l8dIO6NkWobiNwA2jWHY+Vnyh3pXN4q7bMKUbS5h+Y1tq1+QemFW9t7r4pP9E0sGzyE7Vr8ayJrImsiQk1MQDnbHPONmtioTXR0Tg8PzHKWDdKfdshHCW4KZ1gJn4ZZ6uJkQdLr4m2Xal1Zc5PjDmcefX/P2fGJU9ss1kiFS1KF+UWxsjCdZpdmV2ZJa1EBOiRaSjOATvRG6/lY7Y/bduB26qxKVJVmzahOK4c9+GhhWQ7MdaaK+rnoNgD3PI17BeAi3hwvUr9JmAlcATHHkX1wgYgoxjP9XL/mjgV2ErGob2AE2ehWA10in363NdmYIW4ar8uSqMhexS4hxNvYr/ey31g6ynND1D3zeQHq7zct9Huwpha0OLlvhsXNm+g72bVy1Pf6ShOe7lvYW0EnoirfhfHJ6NYCFAsSf9lSgRDwdQ3L1YE3gJNwmg+QETPgWdUgvirPHdWM0XPAB+EAd3/sPqtOPkdSpiPd5q+l6fO3mMnu7Imet5vAQYAtaODAARZxFkAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY5QjlCQTA4MTIyMTFFNEIwQUVBMkM3NjgwODE3OTYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY5QjlCOUY4MTIyMTFFNEIwQUVBMkM3NjgwODE3OTYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwNTdERDdBN0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwNTdERDdCN0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+2tcnMAAABOxJREFUeNrsXDtoFUEU3SzjDwwoiNE0WsS/aAQ/IIiKRTpBUQvBT+MPxEKDEhs1hU0IVvEHahREUAtBRCu10UI0RtSghTbiE39NoiAqPM9NZnWzmZm9My/vaeIdOGx2svfs7Myds3d37tuoWCxGCbqbFl0AqtN1eYij/mUT8Kjn4OKFEbPEhrppwD2QNAJVIQRURgItwE2Q1IQQJKUB6ARJQygBlUm6JS3AiBACKtQXjcB9kNSFECSFRqcDJJuSCsUw+gncBrqAl8AL4DmHoBugax4DNFUffdDh04mvgKXAJb3f5DMKd4AlOCM185SuW4vrnsEhOEFjD+PPtIPtA2ye6OP2G4eHJoSr4Mw7NfF3oA6kb3yH8SLwRbv3Xm9Hwhl7sDmjW9HmfQmhs3G4EGAI7/zvfTA0CKpwK3MNVT3JumOerHTe94jc994ow/hX/EAkrXQC5WsAnSyW3ALMwipC5f0AzZ+nb/f+faCNm4EFaH6nVx+kjA+njVkELmPOrc1p7CTgGFsJuMZGAh/jAcOYMj4E4yfcG0vWk+q5xn0BMQhSN5KizwPXoNxYlGmKiqiWWRNTTjcRm/dxoDF57GmgNg40TubKO8U0yo71H1njuKvL3cs/Cvqare6uQqR8UDVRsXvbVri9XV5B4fR2niIlHeYnqFqV6SXLSR8pz7bgHVAD4w+iiRXURAz7bGy2AlOVp9F6jTm6utWnBRvIVzJ153zjRHqPslPvdsF35sQexuTuk1Mvp66ExonUgiPAZe6LKIkTJU6UOPGfJtBxYlgnpjx2V8lxYlyCcadXH9hmaV6Ulh8zhUao5Y9UuTGTCo1QRRNFE4VACHwUqZ+LJi9hTdPZtsayIjHSZHdzn1xDnmJ97wsyG4VACISAH6HYtM8pqmnt46QMOFW5dzFaIhQhEAIh+CtxIjcetAVeQZqYPt5bE40t8NXE9PGiiUIwBAgkP7FScaJND7haGedpX57IlnexjqWVkiEpCY5CUIbZiNlX0DpQm/yd0gZjnWkGFnzqXK8DC5w6lSNptbb9hCxPkQquPvg35oIydU722ll+kBgRGXC1JFkH2TpvAlMPiyINSUHJTCTnqp8zP5Fh/Ds/UTmCiQUOY3N+Yvp5MG3sImd3YjrgGrDuHJrUljw7OxdoOfmJ1jVWzuqvYhi7hrK533QOGUrvlR3UzwOuAfXecaLpstj5ic78g7z8RFeH5uYn5o0GJz/RuRYvqiyaKJqoC2bjfI7y2BCkidZnZ8nZlpzt/1gT40BjsybajF2zVHGnsE1wY5dglvwyjquJnLCmQprIHUqnK0t+YvgLCFn9L5MmVubtvuKmjdiOK3mBYhj4gfLNvRmOfSCuLJIWVeq3fRiR8dicBfZhNF6HtGAPcCNr7OXKKKNyH7oGPd04p1/IdnTQmivq6ZNoB4DrysHeDpxHx93N1G8GVgHH8L+HtlHYCBQyxtOjvp8mjgO2kbFxFHDgFGzWANv1Pn3uawuwXJ+1w+oH+hNv9Fmzdhz4Efsz9VnHAjtM3wvLtmB11PdttFswphYsA1otzw303ayZ6UffCVHfT0/b9IPoY32t3/T/qRVzAYol6VemRNDVKyiG4aKPCr0F5mujWQARPQOe0hbEX/tdQiZLfjfwSRvQx9aO4/8/bKJq8vHtMGBpnfESfJJdRVSj6JcAAwDMequ4kXXO2QAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABKElEQVQ4T7VTwU0DMRCcrYArwby9j3QQOoAOgA5CBYQKCB0kFUAJoQMe9v/o4JD8X7SWfVo5vhMfLJ1krT3jm9kdYuY9gGeYJSJPMcaDrXnvd0T0amoTgDdiZinFXCj7cwjhbAmY+QaAfrp2AK4ATJXgRwsicowxPlpgu/feH4noHkDGVIIXEXF6sEZSwSJyIqJRpc8EIYS9uXDxJxYcY3yo3lEx56tq7pG0YJWlnojIhnp6C+AupeTGcZyYeRKRD325vd8l0EvOuUHBa4bq2f8QFAm3KaVrI+G91+I1E09V84KxGyLaLrVxBlcPWpK5jWWU7SBdgHskRPRtB0ndHnTCeq1qQlVHOWNUgm5yMADUBH4uhGlrwjRoHpRA41zTlc//GGcN0+EXyGXo9iBlz1cAAAAASUVORK5CYII="},function(t,e,n){var r,i,o,u={},c=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),a=(o={},function(t){if(void 0===o[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}o[t]=e}return o[t]}),l=null,h=0,s=[],d=n(46);function p(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=u[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(y(r.parts[o],e))}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(y(r.parts[o],e));u[r.id]={id:r.id,refs:1,parts:a}}}}function f(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function g(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=s[s.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),s.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function _(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=s.indexOf(t);0<=e&&s.splice(e,1)}function v(t){var e=document.createElement("style");return t.attrs.type="text/css",m(e,t.attrs),g(t,e),e}function m(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function y(e,t){var n,r,i,o,a,s;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var u=h++;n=l||(l=v(t)),r=C.bind(null,n,u,!1),i=C.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=t,s=document.createElement("link"),a.attrs.type="text/css",a.attrs.rel="stylesheet",m(s,a.attrs),g(a,s),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=d(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n=s,t),i=function(){_(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){_(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}t.exports=function(t,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=c()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=f(t,a);return p(s,a),function(t){for(var e=[],n=0;n<s.length;n++){var r=s[n];(i=u[r.id]).refs--,e.push(i)}t&&p(f(t,a),a);for(n=0;n<e.length;n++){var i;if(0===(i=e[n]).refs){for(var o=0;o<i.parts.length;o++)i.parts[o]();delete u[i.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function C(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,o=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r)?t:(n=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e){t.exports='<div class="trade_container dark hide">\n    <div class="m_cent">\n        <div class="m_guadan">\n            <div class="symbol-title">\n                <a class="dark"></a>\n            </div>\n            <div id="orderbook">\n                <div id="asks">\n                    <div class="table"></div>\n                </div>\n                <div id="gasks">\n                    <div class="table"></div>\n                </div>\n                <div id="price" class="green"></div>\n                <div id="bids">\n                    <div class="table"></div>\n                </div>\n                <div id="gbids">\n                    <div class="table"></div>\n                </div>\n            </div>\n            <div id="trades" class="trades">\n                <div class="trades_list"></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="chart_container dark">\n    <div id="chart_dom_elem_cache"></div>\n    \x3c!-- ToolBar --\x3e\n    <div id="chart_toolbar">\n        <div class="chart_toolbar_minisep"></div>\n        \x3c!-- Periods --\x3e\n        <div class="chart_dropdown" id="chart_toolbar_periods_vert" style="display:none">\n            <div class="chart_dropdown_t"><a class="chart_str_period">周期</a></div>\n            <div class="chart_dropdown_data" style="margin-left: -58px;">\n                <table>\n                    <tbody>\n                    <tr>\n                        <td>\n                            <ul>\n                                <li id="chart_period_1w_v" style="display:none;" name="1w">\n                                    <a class="chart_str_period_1w">周线</a>\n                                </li>\n                                <li id="chart_period_3d_v" style="display:none;" name="3d">\n                                    <a class="chart_str_period_3d">3日</a>\n                                </li>\n                                <li id="chart_period_1d_v" style="display:none;" name="1d">\n                                    <a class="chart_str_period_1d">日线</a>\n                                </li>\n                                <li id="chart_period_12h_v" style="display:none;" name="12h">\n                                    <a class="chart_str_period_12h">12小时</a>\n                                </li>\n                                <li id="chart_period_6h_v" style="display:none;" name="6h">\n                                    <a class="chart_str_period_6h">6小时</a>\n                                </li>\n                                <li id="chart_period_4h_v" style="display:none;" name="4h">\n                                    <a class="chart_str_period_4h">4小时</a>\n                                </li>\n                                <li id="chart_period_2h_v" style="display:none;" name="2h">\n                                    <a class="chart_str_period_2h">2小时</a>\n                                </li>\n                                <li id="chart_period_1h_v" style="display:none;" name="1h">\n                                    <a class="chart_str_period_1h">1小时</a>\n                                </li>\n                            </ul>\n                        </td>\n\n                    </tr>\n\n                    <tr>\n                        <td>\n                            <ul>\n                                <li id="chart_period_30m_v" style="display:none;" name="30m">\n                                    <a class="chart_str_period_30m">30分钟</a>\n                                </li>\n                                <li id="chart_period_15m_v" style="display:none;" name="15m">\n                                    <a class="chart_str_period_15m">15分钟</a>\n                                </li>\n                                <li id="chart_period_5m_v" style="display:none;" name="5m">\n                                    <a class="chart_str_period_5m">5分钟</a>\n                                </li>\n                                <li id="chart_period_3m_v" style="display:none;" name="3m">\n                                    <a class="chart_str_period_3m">3分钟</a>\n                                </li>\n                                <li id="chart_period_1m_v" style="display:none;" name="1m">\n                                    <a class="chart_str_period_1m selected">1分钟</a>\n                                </li>\n                                <li id="chart_period_line_v" style="display:none;" name="line">\n                                    <a class="chart_str_period_line">分时</a>\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div id="chart_toolbar_periods_horz">\n            <ul class="chart_toolbar_tabgroup" style="padding-left:5px; padding-right:11px;">\n                <li id="chart_period_1w_h" name="1w" style="display: none;">\n                    <a class="chart_str_period_1w">周线</a>\n                </li>\n                <li id="chart_period_3d_h" name="3d" style="display: none;">\n                    <a class="chart_str_period_3d">3日</a>\n                </li>\n                <li id="chart_period_1d_h" name="1d" style="display: none;">\n                    <a class="chart_str_period_1d">日线</a>\n                </li>\n                <li id="chart_period_12h_h" name="12h" style="display: none;">\n                    <a class="chart_str_period_12h">12小时</a>\n                </li>\n                <li id="chart_period_6h_h" name="6h" style="display: none;">\n                    <a class="chart_str_period_6h">6小时</a>\n                </li>\n                <li id="chart_period_4h_h" name="4h" style="display: none;">\n                    <a class="chart_str_period_4h">4小时</a>\n                </li>\n                <li id="chart_period_2h_h" name="2h" style="display: none;">\n                    <a class="chart_str_period_2h">2小时</a>\n                </li>\n                <li id="chart_period_1h_h" name="1h" style="display: none;">\n                    <a class="chart_str_period_1h">1小时</a>\n                </li>\n                <li id="chart_period_30m_h" name="30m" style="display: none;">\n                    <a class="chart_str_period_30m">30分钟</a>\n                </li>\n                <li id="chart_period_15m_h" name="15m" style="display: none;">\n                    <a class="chart_str_period_15m">15分钟</a>\n                </li>\n                <li id="chart_period_5m_h" name="5m" style="display: none;">\n                    <a class="chart_str_period_5m">5分钟</a>\n                </li>\n                <li id="chart_period_3m_h" name="3m" style="display: none;">\n                    <a class="chart_str_period_3m">3分钟</a>\n                </li>\n                <li id="chart_period_1m_h" name="1m" style="display: none;">\n                    <a class="chart_str_period_1m selected">1分钟</a>\n                </li>\n                <li id="chart_period_line_h" name="line" style="display: none;">\n                    <a class="chart_str_period_line">分时</a>\n                </li>\n            </ul>\n        </div>\n        <div id="chart_show_indicator" class="chart_toolbar_button chart_str_indicator_cap selected">技术指标</div>\n        <div id="chart_show_tools" class="chart_toolbar_button chart_str_tools_cap">画线工具</div>\n        <div id="chart_toolbar_theme">\n            <div class="chart_toolbar_label chart_str_theme_cap">\n                主题选择\n            </div>\n            <a name="dark" class="chart_icon chart_icon_theme_dark selected"></a>\n            <a name="light" class="chart_icon chart_icon_theme_light"></a>\n        </div>\n        <div class="chart_dropdown" id="chart_dropdown_settings">\n            <div class="chart_dropdown_t"><a class="chart_str_settings">更多</a></div>\n\n            <div class="chart_dropdown_data" style="margin-left: -142px;">\n                <table>\n                    <tbody>\n                    <tr id="chart_select_main_indicator">\n                        <td class="chart_str_main_indicator">主指标</td>\n                        <td>\n                            <ul>\n                                <li><a name="MA" class="selected">MA</a></li>\n                                <li><a name="EMA" class="">EMA</a></li>\n                                <li><a name="BOLL" class="">BOLL</a></li>\n                                <li><a name="SAR" class="">SAR</a></li>\n                                <li><a name="NONE" class="">None</a></li>\n                            </ul>\n                        </td>\n                    </tr>\n\n                    <tr id="chart_select_chart_style">\n                        <td class="chart_str_chart_style">主图样式</td>\n                        <td>\n                            <ul>\n                                <li><a class="selected">CandleStick</a></li>\n                                <li><a>CandleStickHLC</a></li>\n                                <li><a class="">OHLC</a></li>\n                            </ul>\n                        </td>\n                    </tr>\n\n                    <tr id="chart_select_theme" style="display: none;">\n                        <td class="chart_str_theme">主题选择</td>\n                        <td>\n                            <ul>\n                                <li>\n                                    <a name="dark" class="chart_icon chart_icon_theme_dark selected"></a>\n                                </li>\n\n                                <li>\n                                    <a name="light" class="chart_icon chart_icon_theme_light"></a>\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                    <tr id="chart_enable_tools" style="display: none;">\n                        <td class="chart_str_tools">画线工具</td>\n                        <td>\n                            <ul>\n                                <li><a name="on" class="chart_str_on">开启</a></li>\n                                <li><a name="off" class="chart_str_off selected">关闭</a></li>\n\n                            </ul>\n\n                        </td>\n                    </tr>\n                    <tr id="chart_enable_indicator" style="display: none;">\n                        <td class="chart_str_indicator">技术指标</td>\n                        <td>\n                            <ul>\n                                <li><a name="on" class="chart_str_on selected">开启</a></li>\n                                <li><a name="off" class="chart_str_off">关闭</a></li>\n                            </ul>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td></td>\n                        <td>\n                            <ul>\n                                <li>\n                                    <a id="chart_btn_parameter_settings" class="chart_str_indicator_parameters">指标参数设置</a>\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n\n        <div class="chart_dropdown" id="chart_language_setting_div" style="padding-left: 5px;display:none">\n            <div class="chart_dropdown_t">\n                <a class="chart_language_setting">语言(LANG)</a>\n            </div>\n            <div class="chart_dropdown_data" style="padding-top: 15px; margin-left: -12px;">\n                <ul>\n                    <li style="height: 25px;">\n                        <a name="zh-cn" class="selected">简体中文(zh-CN)</a>\n                    </li>\n                    <li style="height: 25px;">\n                        <a name="en-us">English(en-US)</a>\n                    </li>\n                    <li style="height: 25px;">\n                        <a name="zh-tw">繁體中文(zh-HK)</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        <div id="chart_updated_time" style="display:none">\n            <div id="sizeIcon" class="chart_BoxSize"></div>\n\n        </div>\n    </div>\n               \x3c!-- ToolPanel --\x3e\n    <div id="chart_toolpanel">\n        <div class="chart_toolpanel_separator"></div>\n\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_Cursor" name="Cursor"></div>\n            <div class="chart_toolpanel_tip chart_str_cursor">\n                光标\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_CrossCursor" name="CrossCursor"></div>\n            <div class="chart_toolpanel_tip chart_str_cross_cursor">\n                十字光标\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_SegLine" name="SegLine"></div>\n            <div class="chart_toolpanel_tip chart_str_seg_line">\n                线段\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_StraightLine" name="StraightLine"></div>\n            <div class="chart_toolpanel_tip chart_str_straight_line">\n                直线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_RayLine" name="RayLine"></div>\n            <div class="chart_toolpanel_tip chart_str_ray_line">\n                射线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_ArrowLine" name="ArrowLine"></div>\n            <div class="chart_toolpanel_tip chart_str_arrow_line">\n                箭头\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_HoriSegLine" name="HoriSegLine"></div>\n            <div class="chart_toolpanel_tip chart_str_horz_seg_line">\n                水平线段\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_HoriStraightLine" name="HoriStraightLine"></div>\n            <div class="chart_toolpanel_tip chart_str_horz_straight_line">\n                水平直线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_HoriRayLine" name="HoriRayLine"></div>\n            <div class="chart_toolpanel_tip chart_str_horz_ray_line">\n                水平射线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_VertiStraightLine" name="VertiStraightLine"></div>\n            <div class="chart_toolpanel_tip chart_str_vert_straight_line">\n                垂直直线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_PriceLine" name="PriceLine"></div>\n            <div class="chart_toolpanel_tip chart_str_price_line">\n                价格线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_TriParallelLine" name="TriParallelLine"></div>\n            <div class="chart_toolpanel_tip chart_str_tri_parallel_line">\n                价格通道线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_BiParallelLine" name="BiParallelLine"></div>\n            <div class="chart_toolpanel_tip chart_str_bi_parallel_line">\n                平行直线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_BiParallelRayLine" name="BiParallelRayLine"></div>\n            <div class="chart_toolpanel_tip chart_str_bi_parallel_ray">\n                平行射线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_DrawFibRetrace" name="DrawFibRetrace"></div>\n            <div class="chart_toolpanel_tip chart_str_fib_retrace">\n                斐波纳契回调\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_DrawFibFans" name="DrawFibFans"></div>\n            <div class="chart_toolpanel_tip chart_str_fib_fans">\n                斐波纳契扇形\n            </div>\n        </div>\n        <div style="padding-left: 3px;padding-top: 10px;">\n            <button style="color: red;" id="clearCanvas" title="Clear All">X</button>\n        </div>\n    </div>\n    <div id="chart_canvasGroup" class="temp">\n        <canvas class="chart_canvas" id="chart_mainCanvas" style="cursor: default;"></canvas>\n        <canvas class="chart_canvas" id="chart_overlayCanvas" style="cursor: default;"></canvas>\n    </div>\n    <div id="chart_tabbar">\n        <ul>\n            <li><a name="MACD" class="">MACD</a></li>\n\n            <li><a name="KDJ" class="">KDJ</a></li>\n\n            <li><a name="StochRSI" class="">StochRSI</a></li>\n\n            <li><a name="RSI" class="">RSI</a></li>\n\n            <li><a name="DMI" class="">DMI</a></li>\n\n            <li><a name="OBV" class="">OBV</a></li>\n\n            <li><a name="BOLL" class="">BOLL</a></li>\n\n            <li><a name="SAR" class="">SAR</a></li>\n\n            <li><a name="DMA" class="">DMA</a></li>\n\n            <li><a name="TRIX" class="">TRIX</a></li>\n\n            <li><a name="BRAR" class="">BRAR</a></li>\n\n            <li><a name="VR" class="">VR</a></li>\n\n            <li><a name="EMV" class="">EMV</a></li>\n\n            <li><a name="WR" class="">WR</a></li>\n\n            <li><a name="ROC" class="">ROC</a></li>\n\n            <li><a name="MTM" class="">MTM</a></li>\n\n            <li><a name="PSY">PSY</a></li>\n\n        </ul>\n\n    </div>\n\n    <div id="chart_parameter_settings">\n        <h2 class="chart_str_indicator_parameters">指标参数设置</h2>\n        <table>\n            <tbody>\n            <tr>\n                <th>MA</th>\n                <td><input name="MA"><input name="MA"><input name="MA"><input name="MA"><br><input\n                        name="MA"><input\n                        name="MA">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>DMA</th>\n                <td><input name="DMA"><input name="DMA"><input name="DMA"></td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>EMA</th>\n                <td>\n                    <input name="EMA"><input name="EMA"><input name="EMA"><input name="EMA"><br>\n                    <input name="EMA"><input name="EMA">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>TRIX</th>\n                <td><input name="TRIX"><input name="TRIX"></td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>VOLUME</th>\n                <td><input name="VOLUME"><input name="VOLUME"></td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>BRAR</th>\n                <td><input name="BRAR"></td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>MACD</th>\n                <td>\n                    <input name="MACD"><input name="MACD"><input name="MACD">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>VR</th>\n                <td><input name="VR"><input name="VR"></td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>KDJ</th>\n                <td>\n                    <input name="KDJ"><input name="KDJ"><input name="KDJ">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>EMV</th>\n                <td>\n                    <input name="EMV"><input name="EMV">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>StochRSI</th>\n                <td>\n                    <input name="StochRSI"><input name="StochRSI"><input name="StochRSI"><input name="StochRSI">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>WR</th>\n                <td>\n                    <input name="WR"><input name="WR">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>RSI</th>\n                <td>\n                    <input name="RSI"><input name="RSI"><input name="RSI">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>ROC</th>\n                <td>\n                    <input name="ROC"><input name="ROC">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>DMI</th>\n                <td>\n                    <input name="DMI"><input name="DMI">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>MTM</th>\n                <td>\n                    <input name="MTM"><input name="MTM">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>OBV</th>\n                <td>\n                    <input name="OBV">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>PSY</th>\n                <td>\n                    <input name="PSY"><input name="PSY">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>BOLL</th>\n                <td>\n                    <input name="BOLL">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n\n        <div id="close_settings"><a class="chart_str_close">关闭</a></div>\n\n    </div>\n\n    \x3c!-- Loading --\x3e\n    <div id="chart_loading" class="chart_str_loading">正在读取数据...</div>\n</div>\n\n<div style="display: none" id="chart_language_switch_tmp">\n    <span name="chart_str_period" zh_tw="週期" zh_cn="周期" en_us="TIME"></span>\n    <span name="chart_str_period_line" zh_tw="分時" zh_cn="分时" en_us="Line"></span>\n    <span name="chart_str_period_1m" zh_tw="1分鐘" zh_cn="1分钟" en_us="1m"></span>\n    <span name="chart_str_period_3m" zh_tw="3分鐘" zh_cn="3分钟" en_us="3m"></span>\n    <span name="chart_str_period_5m" zh_tw="5分鐘" zh_cn="5分钟" en_us="5m"></span>\n    <span name="chart_str_period_15m" zh_tw="15分鐘" zh_cn="15分钟" en_us="15m"></span>\n    <span name="chart_str_period_30m" zh_tw="30分鐘" zh_cn="30分钟" en_us="30m"></span>\n    <span name="chart_str_period_1h" zh_tw="1小時" zh_cn="1小时" en_us="1h"></span>\n    <span name="chart_str_period_2h" zh_tw="2小時" zh_cn="2小时" en_us="2h"></span>\n    <span name="chart_str_period_4h" zh_tw="4小時" zh_cn="4小时" en_us="4h"></span>\n    <span name="chart_str_period_6h" zh_tw="6小時" zh_cn="6小时" en_us="6h"></span>\n    <span name="chart_str_period_12h" zh_tw="12小時" zh_cn="12小时" en_us="12h"></span>\n    <span name="chart_str_period_1d" zh_tw="日線" zh_cn="日线" en_us="1d"></span>\n    <span name="chart_str_period_3d" zh_tw="3日" zh_cn="3日" en_us="3d"></span>\n    <span name="chart_str_period_1w" zh_tw="周線" zh_cn="周线" en_us="1w"></span>\n    <span name="chart_str_settings" zh_tw="更多" zh_cn="更多" en_us="MORE"></span>\n    <span name="chart_setting_main_indicator" zh_tw="均線設置" zh_cn="均线设置" en_us="Main Indicator"></span>\n    <span name="chart_setting_main_indicator_none" zh_tw="關閉均線" zh_cn="关闭均线" en_us="None"></span>\n    <span name="chart_setting_indicator_parameters" zh_tw="指標參數設置" zh_cn="指标参数设置" en_us="Indicator Parameters"></span>\n    <span name="chart_str_chart_style" zh_tw="主圖樣式" zh_cn="主图样式" en_us="Chart Style"></span>\n    <span name="chart_str_main_indicator" zh_tw="主指標" zh_cn="主指标" en_us="Main Indicator"></span>\n    <span name="chart_str_indicator" zh_tw="技術指標" zh_cn="技术指标" en_us="Indicator"></span>\n    <span name="chart_str_indicator_cap" zh_tw="技術指標" zh_cn="技术指标" en_us="INDICATOR"></span>\n    <span name="chart_str_tools" zh_tw="畫線工具" zh_cn="画线工具" en_us="Tools"></span>\n    <span name="chart_str_tools_cap" zh_tw="畫線工具" zh_cn="画线工具" en_us="TOOLS"></span>\n    <span name="chart_str_theme" zh_tw="主題選擇" zh_cn="主题选择" en_us="Theme"></span>\n    <span name="chart_str_theme_cap" zh_tw="主題選擇" zh_cn="主题选择" en_us="THEME"></span>\n    <span name="chart_language_setting" zh_tw="語言(LANG)" zh_cn="语言(LANG)" en_us="LANGUAGE"></span>\n    <span name="chart_exchanges_setting" zh_tw="更多市場" zh_cn="更多市场" en_us="MORE MARKETS"></span>\n    <span name="chart_othercoin_setting" zh_tw="其它市場" zh_cn="其它市场" en_us="OTHER MARKETS"></span>\n\n    <span name="chart_str_none" zh_tw="關閉" zh_cn="关闭" en_us="None"></span>\n    <span name="chart_str_theme_dark" zh_tw="深色主題" zh_cn="深色主题" en_us="Dark"></span>\n    <span name="chart_str_theme_light" zh_tw="淺色主題" zh_cn="浅色主题" en_us="Light"></span>\n    <span name="chart_str_on" zh_tw="開啟" zh_cn="开启" en_us="On"></span>\n    <span name="chart_str_off" zh_tw="關閉" zh_cn="关闭" en_us="Off"></span>\n    <span name="chart_str_close" zh_tw="關閉" zh_cn="关闭" en_us="CLOSE"></span>\n    <span name="chart_str_default" zh_tw="默認值" zh_cn="默认值" en_us="default"></span>\n    <span name="chart_str_loading" zh_tw="正在讀取數據..." zh_cn="正在读取数据..." en_us="Loading..."></span>\n    <span name="chart_str_indicator_parameters" zh_tw="指標參數設置" zh_cn="指标参数设置" en_us="Indicator Parameters"></span>\n    <span name="chart_str_cursor" zh_tw="光標" zh_cn="光标" en_us="Cursor"></span>\n    <span name="chart_str_cross_cursor" zh_tw="十字光標" zh_cn="十字光标" en_us="Cross Cursor"></span>\n    <span name="chart_str_seg_line" zh_tw="線段" zh_cn="线段" en_us="Trend Line"></span>\n    <span name="chart_str_straight_line" zh_tw="直線" zh_cn="直线" en_us="Extended"></span>\n    <span name="chart_str_ray_line" zh_tw="射線" zh_cn="射线" en_us="Ray"></span>\n    <span name="chart_str_arrow_line" zh_tw="箭頭" zh_cn="箭头" en_us="Arrow"></span>\n    <span name="chart_str_horz_seg_line" zh_tw="水平線段" zh_cn="水平线段" en_us="Horizontal Line"></span>\n    <span name="chart_str_horz_straight_line" zh_tw="水平直線" zh_cn="水平直线" en_us="Horizontal Extended"></span>\n    <span name="chart_str_horz_ray_line" zh_tw="水平射線" zh_cn="水平射线" en_us="Horizontal Ray"></span>\n    <span name="chart_str_vert_straight_line" zh_tw="垂直直線" zh_cn="垂直直线" en_us="Vertical Extended"></span>\n    <span name="chart_str_price_line" zh_tw="價格線" zh_cn="价格线" en_us="Price Line"></span>\n    <span name="chart_str_tri_parallel_line" zh_tw="價格通道線" zh_cn="价格通道线" en_us="Parallel Channel"></span>\n    <span name="chart_str_bi_parallel_line" zh_tw="平行直線" zh_cn="平行直线" en_us="Parallel Lines"></span>\n    <span name="chart_str_bi_parallel_ray" zh_tw="平行射線" zh_cn="平行射线" en_us="Parallel Rays"></span>\n    <span name="chart_str_fib_retrace" zh_tw="斐波納契回調" zh_cn="斐波纳契回调" en_us="Fibonacci Retracements"></span>\n    <span name="chart_str_fib_fans" zh_tw="斐波納契扇形" zh_cn="斐波纳契扇形" en_us="Fibonacci Fans"></span>\n    <span name="chart_str_updated" zh_tw="更新於" zh_cn="更新于" en_us="Updated"></span>\n    <span name="chart_str_ago" zh_tw="前" zh_cn="前" en_us="ago"></span>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){};!function(t){{if(t&&t.__esModule)return;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}e.default=t}}(n(49))},function(t,e,n){var r=n(50);n(55),n(57),n(60),n(62),t.exports=r},function(t,e,n){n(51),t.exports=n(7).default},function(t,e,lt){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(e,t){var n=lt(54),r=(lt.n(n),setTimeout);function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function a(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(t){return void u(r.promise,t)}s(r.promise,e)}else(1===n._state?s:u)(r.promise,n._value)})):n._deferreds.push(r)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void h((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){u(e,t)}var r,i}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return a(this,new l(t,e,n)),n},o.prototype.finally=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})},o.all=function(e){return new o(function(r,i){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return r([]);var a=o.length;function s(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){s(e,t)},i)}o[e]=t,0==--a&&r(o)}catch(t){i(t)}}for(var t=0;t<o.length;t++)s(t,o[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(i){return new o(function(t,e){for(var n=0,r=i.length;n<r;n++)i[n].then(t,e)})},o._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var d=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}();function p(t,e){return t(e={exports:{}},e.exports),e.exports}d.Promise||(d.Promise=o);var g=p(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),_=p(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),f=(_.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),v=function(t){if(!f(t))throw TypeError(t+" is not an object!");return t},m=function(t){try{return!!t()}catch(t){return!0}},y=!m(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),b=g.document,w=f(b)&&f(b.createElement),C=!y&&!m(function(){return 7!=Object.defineProperty((t="div",w?b.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),E=Object.defineProperty,x={f:y?Object.defineProperty:function(t,e,n){if(v(t),e=function(t,e){if(!f(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!f(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!f(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!f(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),v(n),C)try{return E(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},k=y?function(t,e,n){return x.f(t,e,{enumerable:!((r=1)&r),configurable:!(2&r),writable:!(4&r),value:n});var r}:function(t,e,n){return t[e]=n,t},S={}.hasOwnProperty,A=function(t,e){return S.call(t,e)},P=0,T=Math.random(),I=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++P+T).toString(36))},O=p(function(t){var o=I("src"),e="toString",n=Function[e],a=(""+n).split(e);_.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(A(n,"name")||k(n,"name",e)),t[e]!==n&&(i&&(A(n,o)||k(n,o,t[e]?""+t[e]:a.join(String(e)))),t===g?t[e]=n:r?t[e]?t[e]=n:k(t,e,n):(delete t[e],k(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[o]||n.call(this)})}),R=function(r,i,t){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},N="prototype",D=function(t,e,n){var r,i,o,a,s=t&D.F,u=t&D.G,c=t&D.S,l=t&D.P,h=t&D.B,d=u?g:c?g[e]||(g[e]={}):(g[e]||{})[N],p=u?_:_[e]||(_[e]={}),f=p[N]||(p[N]={});for(r in u&&(n=e),n)o=((i=!s&&d&&void 0!==d[r])?d:n)[r],a=h&&i?R(o,g):l&&"function"==typeof o?R(Function.call,o):o,d&&O(d,r,o,t&D.U),p[r]!=o&&k(p,r,a),l&&f[r]!=o&&(f[r]=o)};g.core=_,D.F=1,D.G=2,D.S=4,D.P=8,D.B=16,D.W=32,D.U=64,D.R=128;var M=D,L={}.toString,j=function(t){return L.call(t).slice(8,-1)},F=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==j(t)?t.split(""):Object(t)},U=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},V=Math.ceil,W=Math.floor,B=Math.min,G=function(t){return 0<t?B((e=t,isNaN(e=+e)?0:(0<e?W:V)(e)),9007199254740991):0;var e},H=Array.isArray||function(t){return"Array"==j(t)},Y="__core-js_shared__",z=g[Y]||(g[Y]={}),q=p(function(t){var e,n=z[e="wks"]||(z[e]={}),r=g.Symbol,i="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=i&&r[t]||(i?r:I)("Symbol."+t))}).store=n}),X=q("species"),Q=function(t,e){return H(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!H(r.prototype)||(r=void 0),f(r)&&null===(r=r[X])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},Z=function(h,t){var d=1==h,p=2==h,f=3==h,g=4==h,_=6==h,v=5==h||_,m=t||Q;return function(t,e,n){for(var r,i,o=Object(U(t)),a=F(o),s=R(e,n,3),u=G(a.length),c=0,l=d?m(t,u):p?m(t,0):void 0;c<u;c++)if((v||c in a)&&(i=s(r=a[c],c,o),h))if(d)l[c]=i;else if(i)switch(h){case 3:return!0;case 5:return r;case 6:return c;case 2:l.push(r)}else if(g)return!1;return _?-1:f||g?g:l}},K=q("unscopables"),J=Array.prototype;null==J[K]&&k(J,K,{});var $=function(t){J[K][t]=!0},tt=Z(5),et=!0;"find"in[]&&Array(1).find(function(){et=!1}),M(M.P+M.F*et,"Array",{find:function(t){return tt(this,t,1<arguments.length?arguments[1]:void 0)}}),$("find");_.Array.find;var nt=Z(6),rt="findIndex",it=!0;rt in[]&&Array(1)[rt](function(){it=!1}),M(M.P+M.F*it,"Array",{findIndex:function(t){return nt(this,t,1<arguments.length?arguments[1]:void 0)}}),$(rt);_.Array.findIndex;var ot=q("match"),at=function(t,e,n){if(f(r=e)&&(void 0!==(i=r[ot])?i:"RegExp"==j(r)))throw TypeError("String#"+n+" doesn't accept regex!");var r,i;return String(U(t))},st=q("match"),ut="startsWith",ct=""[ut];M(M.P+M.F*function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[st]=!1,!"/./"[e](n)}catch(t){}}return!0}(ut),"String",{startsWith:function(t){var e=at(this,t,ut),n=G(Math.min(1<arguments.length?arguments[1]:void 0,e.length)),r=String(t);return ct?ct.call(e,r,n):e.slice(n,n+r.length)===r}});_.String.startsWith}.call(e,lt(52).setImmediate,lt(9))},function(t,i,o){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}i.setTimeout=function(){return new r(n.call(setTimeout,e,arguments),clearTimeout)},i.setInterval=function(){return new r(n.call(setInterval,e,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(e,this._id)},i.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},i.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},i._unrefActive=i.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(53),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(i,o(9))},function(t,e,n){(function(t,f){!function(n,r){"use strict";if(!n.setImmediate){var i,o,e,a,t,s=1,u={},c=!1,l=n.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(n);h=h&&h.setTimeout?h:n,"[object process]"==={}.toString.call(n.process)?i=function(t){f.nextTick(function(){p(t)})}:!function(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}()?n.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){p(t.data)},i=function(t){e.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(o=l.documentElement,i=function(t){var e=l.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):i=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",t=function(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},n.addEventListener?n.addEventListener("message",t,!1):n.attachEvent("onmessage",t),i=function(t){n.postMessage(a+t,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return u[s]=r,i(s),s++},h.clearImmediate=d}function d(t){delete u[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{d(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(9),n(24))},function(t,e){!function(t){"use strict";if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,a="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,i="ArrayBuffer"in t;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))};f.prototype.append=function(t,e){t=h(t),e=d(e);var n=this.map[t];this.map[t]=n?n+","+e:e},f.prototype.delete=function(t){delete this.map[h(t)]},f.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},f.prototype.set=function(t,e){this.map[h(t)]=d(e)},f.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},f.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},f.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},f.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},C.error=function(){var t=new C(null,{status:0,statusText:""});return t.type="error",t};var l=[301,302,303,307,308];C.redirect=function(t,e){if(-1===l.indexOf(e))throw new RangeError("Invalid status code");return new C(null,{status:e,headers:{location:t}})},t.Headers=f,t.Request=b,t.Response=C,t.fetch=function(n,i){return new Promise(function(r,t){var e=new b(n,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();i.append(n,r)}}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new C(n,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&a&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function d(t){return"string"!=typeof t&&(t=String(t)),t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function g(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function _(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function v(t){var e=new FileReader,n=_(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(a&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&a&&s(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var t=g(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var t,e,n,r=g(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=_(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(t,e){var n,r,i=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),-1<c.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function C(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},function(t,e,n){n(56)},function(t,e,cl){(function(t){(function(){var t,p=cl(7).default,u=u||{},l=this;function c(t){return"string"==typeof t}function e(t){return"boolean"==typeof t}function o(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function n(t){return null===t}function d(t){return"array"==h(t)}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function a(t){return"function"==h(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var r="closure_uid_"+(1e9*Math.random()>>>0),i=0;function s(t,e,n){return t.call.apply(t.bind,arguments)}function _(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function v(t,e,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:_).apply(null,arguments)}function m(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var y=Date.now||function(){return+new Date};function b(t,o){function e(){}e.prototype=o.prototype,t.lb=o.prototype,t.prototype=new e,(t.prototype.constructor=t).ad=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function w(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function C(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function E(t){if(Error.captureStackTrace)Error.captureStackTrace(this,E);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function x(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");E.call(this,n+t[r])}function k(t,e){throw new x("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function S(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function A(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function P(){this.b=this.a=null}b(E,Error),E.prototype.name="CustomError",b(x,E),x.prototype.name="AssertionError",S.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var T=new S(function(){return new I},function(t){t.reset()});function I(){this.next=this.b=this.a=null}P.prototype.add=function(t,e){var n=T.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},I.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},I.prototype.reset=function(){this.next=this.b=this.a=null};var O=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(c(t))return c(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},R=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=c(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var N=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=c(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},D=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=c(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function M(t,e){return 0<=O(t,e)}function L(t,e){var n;return(n=0<=(e=O(t,e)))&&Array.prototype.splice.call(t,e,1),n}function j(n,r){!function(t,e){var n=t.length,r=c(t)?t.split(""):t;for(--n;0<=n;--n)n in r&&e.call(void 0,r[n],n,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function F(t){return Array.prototype.concat.apply([],arguments)}function U(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function V(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}var W=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function B(t){return Z.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(H,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Y,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(z,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(q,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(X,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(Q,"&#0;"))),t}var G,H=/&/g,Y=/</g,z=/>/g,q=/"/g,X=/'/g,Q=/\x00/g,Z=/[\x00&<>"']/;function K(t,e){return-1!=t.indexOf(e)}function J(t,e){return t<e?-1:e<t?1:0}t:{var $=l.navigator;if($){var tt=$.userAgent;if(tt){G=tt;break t}}G=""}function et(t){return K(G,t)}function nt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function rt(t){for(var e in t)return!1;return!0}function it(t){var e,n={};for(e in t)n[e]=t[e];return n}var ot,at,st="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<st.length;o++)n=st[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ct(t){l.setTimeout(function(){throw t},0)}function lt(t,e){at||function(){if(l.Promise&&l.Promise.resolve){var t=l.Promise.resolve(void 0);at=function(){t.then(pt)}}else at=function(){var t=pt;!a(l.setImmediate)||l.Window&&l.Window.prototype&&!et("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ot||(ot=function(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!et("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=v(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!et("Trident")&&!et("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).rb;n.rb=null,t()}},function(t){r.next={rb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){l.setTimeout(t,0)}}()),ot(t)):l.setImmediate(t)}}(),ht||(at(),ht=!0),dt.add(t,e)}var ht=!1,dt=new P;function pt(){for(var t;n=e=void 0,n=null,(e=dt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ct(t)}A(T,t)}var e,n;ht=!1}function ft(t,e){if(this.a=gt,this.j=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=o)try{var n=this;t.call(e,function(t){St(n,_t,t)},function(t){if(!(t instanceof Nt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}St(n,vt,t)})}catch(t){St(this,vt,t)}}var gt=0,_t=2,vt=3;function mt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}mt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var yt=new S(function(){return new mt},function(t){t.reset()});function bt(t,e,n){var r=yt.get();return r.g=t,r.b=e,r.f=n,r}function wt(t){if(t instanceof ft)return t;var e=new ft(o);return St(e,_t,t),e}function Ct(n){return new ft(function(t,e){e(n)})}function Et(t,e,n){At(t,e,n,null)||lt(m(e,t))}function xt(t,e){t.b||t.a!=_t&&t.a!=vt||Pt(t),t.f?t.f.next=e:t.b=e,t.f=e}function kt(t,i,o,a){var e=bt(null,null,null);return e.a=new ft(function(n,r){e.g=i?function(t){try{var e=i.call(a,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(a,t);void 0===e&&t instanceof Nt?r(t):n(e)}catch(t){r(t)}}:r}),xt(e.a.c=t,e),e.a}function St(t,e,n){var r,i;t.a==gt&&(t===n&&(e=vt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,At(n,t.Kc,t.Lc,t)||(t.j=n,t.a=e,t.c=null,Pt(t),e!=vt||n instanceof Nt||(i=n,(r=t).g=!0,lt(function(){r.g&&Rt.call(null,i)}))))}function At(t,e,n,r){if(t instanceof ft)return xt(t,bt(e||o,n||null,r)),!0;if(C(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(a(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Pt(t){t.h||(t.h=!0,lt(t.Ub,t))}function Tt(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function It(t,e,n,r){if(n==vt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ot(e,n,r);else try{e.c?e.g.call(e.f):Ot(e,n,r)}catch(t){Rt.call(null,t)}A(yt,e)}function Ot(t,e,n){e==_t?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ft.prototype.then=function(t,e,n){return kt(this,a(t)?t:null,a(e)?e:null,n)},w(ft),(t=ft.prototype).ha=function(t,e){return(t=bt(t,t,e)).c=!0,xt(this,t),this},t.m=function(t,e){return kt(this,null,t,e)},t.cancel=function(t){this.a==gt&&lt(function(){!function t(e,n){if(e.a==gt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==gt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Tt(r),It(r,o,vt,n)))}e.c=null}else St(e,vt,n)}(this,new Nt(t))},this)},t.Kc=function(t){this.a=gt,St(this,_t,t)},t.Lc=function(t){this.a=gt,St(this,vt,t)},t.Ub=function(){for(var t;t=Tt(this);)It(this,t,this.a,this.j);this.h=!1};var Rt=ct;function Nt(t){E.call(this,t)}function Dt(){0!=Mt&&(Lt[this[r]||(this[r]=++i)]=this),this.pa=this.pa,this.oa=this.oa}b(Nt,E);var Mt=0,Lt={};function jt(t){if(!t.pa&&(t.pa=!0,t.ua(),0!=Mt)){var e=t[r]||(t[r]=++i);if(0!=Mt&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Lt[e]}}function Ft(t){return Ft[" "](t),t}Dt.prototype.pa=!(Nt.prototype.name="cancel"),Dt.prototype.ua=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()},Ft[" "]=o;var Ut,Vt,Wt=et("Opera"),Bt=et("Trident")||et("MSIE"),Gt=et("Edge"),Ht=Gt||Bt,Yt=et("Gecko")&&!(K(G.toLowerCase(),"webkit")&&!et("Edge"))&&!(et("Trident")||et("MSIE"))&&!et("Edge"),zt=K(G.toLowerCase(),"webkit")&&!et("Edge");function qt(){var t=l.document;return t?t.documentMode:void 0}t:{var Xt="",Qt=(Vt=G,Yt?/rv:([^\);]+)(\)|;)/.exec(Vt):Gt?/Edge\/([\d\.]+)/.exec(Vt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):zt?/WebKit\/(\S+)/.exec(Vt):Wt?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Qt&&(Xt=Qt?Qt[1]:""),Bt){var Zt=qt();if(null!=Zt&&Zt>parseFloat(Xt)){Ut=String(Zt);break t}}Ut=Xt}var Kt,Jt={};function $t(s){return t=s,e=function(){for(var t=0,e=W(String(Ut)).split("."),n=W(String(s)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=J(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||J(0==o[2].length,0==a[2].length)||J(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t},n=Jt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var te=l.document;Kt=te&&Bt?qt()||("CSS1Compat"==te.compatMode?parseInt(Ut,10):5):void 0;var ee=Object.freeze||function(t){return t},ne=!Bt||9<=Number(Kt),re=Bt&&!$t("9"),ie=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return l.addEventListener("test",o,e),l.removeEventListener("test",o,e),t}();function oe(t,e){this.type=t,this.b=this.target=e,this.Eb=!0}function ae(t,e){if(oe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Yt){t:{try{Ft(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=c(t.pointerType)?t.pointerType:se[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}oe.prototype.preventDefault=function(){this.Eb=!1},b(ae,oe);var se=ee({2:"touch",3:"pen",4:"mouse"});ae.prototype.preventDefault=function(){ae.lb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,re)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},ae.prototype.f=function(){return this.a};var ue="closure_listenable_"+(1e6*Math.random()|0),ce=0;function le(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++ce,this.ma=this.Ha=!1}function he(t){t.ma=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function de(t){this.src=t,this.a={},this.b=0}function pe(t,e){var n=e.type;n in t.a&&L(t.a[n],e)&&(he(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function fe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ma&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}de.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=fe(t,e,r,i);return-1<a?(e=t[a],n||(e.Ha=!1)):((e=new le(e,this.src,o,!!r,i)).Ha=n,t.push(e)),e};var ge="closure_lm_"+(1e6*Math.random()|0),_e={};function ve(t,e,n,r,i){if(r&&r.once)ye(t,e,n,r,i);else if(d(e))for(var o=0;o<e.length;o++)ve(t,e[o],n,r,i);else n=Pe(n),t&&t[ue]?Ie(t,e,n,g(r)?!!r.capture:!!r,i):me(t,e,n,!1,r,i)}function me(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a,s,u=g(i)?!!i.capture:!!i,c=Se(t);if(c||(t[ge]=c=new de(t)),!(n=c.add(e,n,r,u,o)).proxy){if(a=ke,r=s=ne?function(t){return a.call(s.src,s.listener,t)}:function(t){if(!(t=a.call(s.src,s.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)ie||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ce(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function ye(t,e,n,r,i){if(d(e))for(var o=0;o<e.length;o++)ye(t,e[o],n,r,i);else n=Pe(n),t&&t[ue]?Oe(t,e,n,g(r)?!!r.capture:!!r,i):me(t,e,n,!0,r,i)}function be(t,e,n,r,i){if(d(e))for(var o=0;o<e.length;o++)be(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=Pe(n),t&&t[ue]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=fe(o=t.a[e],n,r,i))&&(he(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Se(t))&&(e=t.a[e.toString()],t=-1,e&&(t=fe(e,n,r,i)),(n=-1<t?e[t]:null)&&we(n))}function we(t){if("number"!=typeof t&&t&&!t.ma){var e=t.src;if(e&&e[ue])pe(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ce(n),r):e.addListener&&e.removeListener&&e.removeListener(r),0,(n=Se(e))?(pe(n,t),0==n.b&&(n.src=null,e[ge]=null)):he(t)}}}function Ce(t){return t in _e?_e[t]:_e[t]="on"+t}function Ee(t,e,n,r){var i=!0;if((t=Se(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ma&&(o=xe(o,r),i=i&&!1!==o)}return i}function xe(t,e){var n=t.listener,r=t.La||t.src;return t.Ha&&we(t),n.call(r,e)}function ke(t,e){if(t.ma)return!0;if(!ne){if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new ae(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Ee(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Ee(r[i],t,!1,e),n=n&&o}return n}return xe(t,new ae(e,this))}function Se(t){return(t=t[ge])instanceof de?t:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pe(e){return a(e)?e:(e[Ae]||(e[Ae]=function(t){return e.handleEvent(t)}),e[Ae])}function Te(){Dt.call(this),this.u=new de(this),(this.Mb=this).Ta=null}function Ie(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function Oe(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function Re(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ma&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ha&&pe(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Eb}function Ne(t,e,n){if(a(t))n&&(t=v(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=v(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function De(n){var r=null;return new ft(function(t,e){-1==(r=Ne(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).m(function(t){throw l.clearTimeout(r),t})}function Me(t){if(t.S&&"function"==typeof t.S)return t.S();if(c(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Le(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(f(t)||c(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function je(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof je)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Fe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ue(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ue(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Ue(t,e){return Object.prototype.hasOwnProperty.call(t,e)}b(Te,Dt),Te.prototype[ue]=!0,Te.prototype.addEventListener=function(t,e,n,r){ve(this,t,e,n,r)},Te.prototype.removeEventListener=function(t,e,n,r){be(this,t,e,n,r)},Te.prototype.dispatchEvent=function(t){var e,n=this.Ta;if(n)for(e=[];n;n=n.Ta)e.push(n);n=this.Mb;var r=t.type||t;if(c(t))t=new oe(t,n);else if(t instanceof oe)t.target=t.target||n;else{var i=t;ut(t=new oe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Re(a,r,!0,t)&&i}if(i=Re(a=t.b=n,r,!0,t)&&i,i=Re(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Re(a=t.b=e[o],r,!1,t)&&i;return i},Te.prototype.ua=function(){if(Te.lb.ua.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)0,he(n[r]);delete e.a[t],e.b--}}this.Ta=null},(t=je.prototype).S=function(){Fe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return Fe(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Ue(this.b,t)?this.b[t]:e},t.set=function(t,e){Ue(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ve=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function We(t,e){if(this.b=this.l=this.c="",this.j=null,this.h=this.g="",this.f=!1,t instanceof We){this.f=void 0!==e?e:t.f,Be(this,t.c),this.l=t.l,this.b=t.b,Ge(this,t.j),this.g=t.g,e=t.a;var n=new rn;n.c=e.c,e.a&&(n.a=new je(e.a),n.b=e.b),He(this,n),this.h=t.h}else t&&(n=String(t).match(Ve))?(this.f=!!e,Be(this,n[1]||"",!0),this.l=Qe(n[2]||""),this.b=Qe(n[3]||"",!0),Ge(this,n[4]),this.g=Qe(n[5]||"",!0),He(this,n[6]||"",!0),this.h=Qe(n[7]||"")):(this.f=!!e,this.a=new rn(null,this.f))}function Be(t,e,n){t.c=n?Qe(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Ge(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.j=e}else t.j=null}function He(t,e,n){var r,i;e instanceof rn?(t.a=e,r=t.a,(i=t.f)&&!r.f&&(on(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(sn(this,e),cn(this,n,t))},r)),r.f=i):(n||(e=Ze(e,en)),t.a=new rn(e,t.f))}function Ye(t,e,n){t.a.set(e,n)}function ze(t,e){return t.a.get(e)}function qe(t){return t instanceof We?new We(t):new We(t,void 0)}function Xe(t,e){var n=new We(null,void 0);return Be(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function Qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ze(t,e,n){return c(t)?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}We.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Ze(e,Je,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Ze(e,Je,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.j)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ze(n,"/"==n.charAt(0)?tn:$e,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Ze(n,nn)),t.join("")};var Je=/[#\/\?@]/g,$e=/[#\?:]/g,tn=/[#\?]/g,en=/[#\?@]/g,nn=/#/g;function rn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function on(n){n.a||(n.a=new je,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function an(t){var e=Le(t);if(void 0===e)throw Error("Keys are undefined");var n=new rn(null,void 0);t=Me(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];d(o)?cn(n,i,o):n.add(i,o)}return n}function sn(t,e){on(t),e=ln(t,e),Ue(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ue((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Fe(t)))}function un(t,e){return on(t),e=ln(t,e),Ue(t.a.b,e)}function cn(t,e,n){sn(t,e),0<n.length&&(t.c=null,t.a.set(ln(t,e),U(n)),t.b+=n.length)}function ln(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=rn.prototype).add=function(t,e){on(this),this.c=null,t=ln(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){on(this),this.a.forEach(function(t,e){R(t,function(t){n.call(r,t,e,this)},this)},this)},t.U=function(){on(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.S=function(t){on(this);var e=[];if(c(t))un(this,t)&&(e=F(e,this.a.get(ln(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=F(e,t[n])}return e},t.set=function(t,e){return on(this),this.c=null,un(this,t=ln(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.S(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var hn=!Bt||9<=Number(Kt);function dn(){this.a="",this.b=fn}function pn(t){return t instanceof dn&&t.constructor===dn&&t.b===fn?t.a:(k("expected object of type Const, got '"+t+"'"),"type_error:Const")}dn.prototype.la=!0,dn.prototype.ja=function(){return this.a},dn.prototype.toString=function(){return"Const{"+this.a+"}"};var fn={};function gn(t){var e=new dn;return e.a=t,e}function _n(){this.a="",this.b=wn}function vn(t){return t instanceof _n&&t.constructor===_n&&t.b===wn?t.a:(k("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function mn(t,n){var e,r,i=pn(t);if(!bn.test(i))throw Error("Invalid TrustedResourceUrl format: "+i);return t=i.replace(yn,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+i+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof dn?pn(t):encodeURIComponent(String(t))}),e=t,(r=new _n).a=e,r}gn(""),_n.prototype.la=!0,_n.prototype.ja=function(){return this.a},_n.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var yn=/%{(\w+)}/g,bn=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,wn={};function Cn(){this.a="",this.b=Sn}function En(t){return t instanceof Cn&&t.constructor===Cn&&t.b===Sn?t.a:(k("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}Cn.prototype.la=!0,Cn.prototype.ja=function(){return this.a},Cn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xn=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function kn(t){return t instanceof Cn?t:(t=t.la?t.ja():String(t),xn.test(t)||(t="about:invalid#zClosurez"),An(t))}var Sn={};function An(t){var e=new Cn;return e.a=t,e}function Pn(){this.a="",this.b=Tn}An("about:blank"),Pn.prototype.la=!0,Pn.prototype.ja=function(){return this.a},Pn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Tn={};function In(t){var e=new Pn;return e.a=t,e}function On(t){var e=document;return c(t)?e.getElementById(t):t}function Rn(n,t){nt(t,function(t,e){t&&t.la&&(t=t.ja()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:Nn.hasOwnProperty(e)?n.setAttribute(Nn[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}In("<!DOCTYPE html>"),In(""),In("<br>");var Nn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Dn(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!hn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',B(a.name),'"'),a.type){o.push(' type="',B(a.type),'"');var s={};ut(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(c(a)?o.className=a:d(a)?o.className=a.join(" "):Rn(o,a)),2<r.length&&function(e,n,t){function r(t){t&&n.appendChild(c(t)?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!f(o)||g(o)&&0<o.nodeType?r(o):R(Mn(o)?U(o):o,r)}}(i,o,r),o}function Mn(t){if(t&&"number"==typeof t.length){if(g(t))return"function"==typeof t.item||"string"==typeof t.item;if(a(t))return"function"==typeof t.item}return!1}function Ln(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(d(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),Vn(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Vn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new jn,t,e),e.join("")}function jn(){}var Fn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Un=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Vn(t,e){e.push('"',t.replace(Un,function(t){var e=Fn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Fn[t]=e),e}),'"')}function Wn(){var t=or();return Bt&&!!Kt&&11==Kt||/Edge\/\d+/.test(t)}function Bn(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function Gn(t,e){e=e||l.window;var n="about:blank";t&&(n=En(kn(t))),e.location.href=n}function Hn(t){return!!((t=(t||or()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Yn(t){t=t||l.window;try{t.close()}catch(t){}}function zn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=or().toLowerCase(),r&&(e.target=r,K(n,"crios/")&&(e.target="_blank")),nr(or())==tr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Cn?n:kn(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var a,s=i.join(",");if((et("iPhone")&&!et("iPod")&&!et("iPad")||et("iPad")||et("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(s=r.document.createElement("A"),e instanceof Cn||e instanceof Cn||(e=e.la?e.ja():String(e),xn.test(e)||(e="about:invalid#zClosurez"),e=An(e)),s.href=En(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=En(e),s&&(Ht&&K(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,gn("b/12014412, meta tag with sanitized URL"),t=In(t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+B(t)+'">'),s.document.write((a=t)instanceof Pn&&a.constructor===Pn&&a.b===Tn?a.a:(k("expected object of type SafeHtml, got '"+a+"' of type "+h(a)),"type_error:SafeHtml")),s.document.close())):(s=r.open(En(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var qn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;function Xn(){var e=null;return new ft(function(t){"complete"==l.document.readyState?t():(e=function(){t()},ye(window,"load",e))}).m(function(t){throw be(window,"load",e),t})}function Qn(t){return t=t||or(),!("file:"!==lr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zn(){var t=l.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Kn(){return"object"!=typeof l.window&&"function"==typeof l.importScripts}function Jn(){return p.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":p.INTERNAL.hasOwnProperty("node")?"Node":Kn()?"Worker":"Browser"}function $n(){var t=Jn();return"ReactNative"===t||"Node"===t}var tr="Firefox",er="Chrome";function nr(t){var e=t.toLowerCase();return K(e,"opera/")||K(e,"opr/")||K(e,"opios/")?"Opera":K(e,"iemobile")?"IEMobile":K(e,"msie")||K(e,"trident/")?"IE":K(e,"edge/")?"Edge":K(e,"firefox/")?tr:K(e,"silk/")?"Silk":K(e,"blackberry")?"Blackberry":K(e,"webos")?"Webos":!K(e,"safari/")||K(e,"chrome/")||K(e,"crios/")||K(e,"android")?!K(e,"chrome/")&&!K(e,"crios/")||K(e,"edge/")?K(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":er:"Safari"}var rr={Qc:"FirebaseCore-web",Sc:"FirebaseUI-web"};function ir(t,e){e=e||[];var n,r=[],i={};for(n in rr)i[rr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Jn())?r=nr(i=or()):"Worker"===r&&(r=nr(i=or())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function or(){return l.navigator&&l.navigator.userAgent||""}function ar(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function sr(){try{var t=l.localStorage,e=gr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Wn()||!!l.indexedDB}catch(t){return Kn()&&!!l.indexedDB}return!1}function ur(){return(cr()||"chrome-extension:"===lr()||Qn())&&!$n()&&sr()&&!Kn()}function cr(){return"http:"===lr()||"https:"===lr()}function lr(){return l.location&&l.location.protocol||null}function hr(t){return!Hn(t=t||or())&&nr(t)!=tr}function dr(t){return void 0===t?null:Ln(t)}function pr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function fr(t){if(null!==t)return JSON.parse(t)}function gr(t){return t||Math.floor(1e9*Math.random()).toString()}function _r(t){return"Safari"!=nr(t=t||or())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function vr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function mr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=or(),e=Jn(),this.b=Hn(t)||"ReactNative"===e}function yr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function br(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function wr(){return!(!ar("fireauth.oauthhelper",l)&&!ar("fireauth.iframe",l))}mr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!cr()&&"chrome-extension:"!==lr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Cr,Er={};try{var xr={};Object.defineProperty(xr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(xr,"abcd",{configurable:!0,enumerable:!0,value:2}),Cr=2==xr.abcd}catch(t){Cr=!1}function kr(t,e,n){Cr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Sr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&kr(t,n,e[n])}function Ar(t){var e={};return Sr(e,t),e}function Pr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)kr(e,n,Pr(t[n]));return e}function Tr(t){var e={},n=t[Or],r=t[Rr];if(!(t=t[Nr])||t!=Ir&&!n)throw Error("Invalid provider user info!");e[Mr]=r||null,e[Dr]=n||null,kr(this,jr,t),kr(this,Lr,Pr(e))}var Ir="EMAIL_SIGNIN",Or="email",Rr="newEmail",Nr="requestType",Dr="email",Mr="fromEmail",Lr="data",jr="operation";function Fr(t,e){this.code=Vr+t,this.message=e||Wr[t]||""}function Ur(t){var e=t&&t.code;return e?new Fr(e.substring(Vr.length),t.message):null}b(Fr,Error),Fr.prototype.C=function(){return{code:this.code,message:this.message}},Fr.prototype.toJSON=function(){return this.C()};var Vr="auth/",Wr={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Br(t){var e=t[zr];if(void 0===e)throw new Fr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Fr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Gr];if(n&&"object"==typeof n){e=n[Qr];var r=n[qr];if(n=n[Xr],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Fr("argument-error",qr+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Fr("argument-error",Xr+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Fr("argument-error",Qr+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Fr("missing-android-pkg-name")}}else if(void 0!==n)throw new Fr("argument-error",Gr+" property must be a non null object when specified.");if(this.f=null,(e=t[Yr])&&"object"==typeof e){if("string"==typeof(e=e[Zr])&&e.length)this.f=e;else if(void 0!==e)throw new Fr("argument-error",Zr+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Fr("argument-error",Yr+" property must be a non null object when specified.");if(void 0!==(t=t[Hr])&&"boolean"!=typeof t)throw new Fr("argument-error",Hr+" property must be a boolean when specified.");this.c=!!t}var Gr="android",Hr="handleCodeInApp",Yr="iOS",zr="url",qr="installApp",Xr="minimumVersion",Qr="packageName",Zr="bundleId";function Kr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e)null===e[n]&&delete e[n];return e}var Jr=null,$r=null;function ti(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=$r[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Jr){Jr={},$r={};for(var t=0;t<65;t++)Jr[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),62<=($r[Jr[t]]=t)&&($r["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var i=0;;){var n=e(-1),o=e(0),a=e(64),s=e(64);if(64===s&&-1===n)break;t(n<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}function ei(t){this.c=t.sub,y(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function ni(t){return(t=ri(t))&&t.sub&&t.iss&&t.aud&&t.exp?new ei(t):null}function ri(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(ti(t))}catch(t){}return null}ei.prototype.f=function(){return this.b};var ii="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),oi=["client_id","response_type","scope","redirect_uri","state"],ai={Rc:{Ma:"locale",Aa:500,za:600,Na:"facebook.com",cb:oi},Tc:{Ma:null,Aa:500,za:620,Na:"github.com",cb:oi},Uc:{Ma:"hl",Aa:515,za:680,Na:"google.com",cb:oi},$c:{Ma:"lang",Aa:485,za:705,Na:"twitter.com",cb:ii}};function si(t){for(var e in ai)if(ai[e].Na==t)return ai[e];return null}function ui(t){var e={};e["facebook.com"]=pi,e["google.com"]=gi,e["github.com"]=fi,e["twitter.com"]=_i;var n=t&&t[li];try{if(n)return e[n]?new e[n](t):new di(t);if(void 0!==t[ci])return new hi(t)}catch(t){}return null}var ci="idToken",li="providerId";function hi(t){var e=t[li];if(!e&&t[ci]){var n=ni(t[ci]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),kr(this,"providerId",e),kr(this,"isNewUser",n)}function di(t){hi.call(this,t),kr(this,"profile",Pr((t=fr(t.rawUserInfo||"{}"))||{}))}function pi(t){if(di.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function fi(t){if(di.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");kr(this,"username",this.profile&&this.profile.login||null)}function gi(t){if(di.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function _i(t){if(di.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");kr(this,"username",t.screenName||null)}function vi(t){this.a=qe(t)}function mi(t){var e=qe(t),n=ze(e,"link"),r=ze(qe(n),"link");return ze(qe(e=ze(e,"deep_link_id")),"link")||e||r||n||t}function yi(t,n){return t.then(function(t){if(t[ta]){var e=ni(t[ta]);if(!e||n!=e.c)throw new Fr("user-mismatch");return t}throw new Fr("user-mismatch")}).m(function(t){throw t&&t.code&&t.code==Vr+"user-not-found"?new Fr("user-mismatch"):t})}function bi(t,e,n){if(e.idToken||e.accessToken)e.idToken&&kr(this,"idToken",e.idToken),e.accessToken&&kr(this,"accessToken",e.accessToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Fr("internal-error","failed to construct a credential");kr(this,"accessToken",e.oauthToken),kr(this,"secret",e.oauthTokenSecret)}kr(this,"providerId",t),kr(this,"signInMethod",n)}function wi(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,{postBody:an(e).toString(),requestUri:"http://localhost"}}function Ci(t,e){this.Ac=e||[],Sr(this,{providerId:t,isOAuthProvider:!0}),this.tb={},this.Za=(si(t)||{}).Ma||null,this.Xa=null}function Ei(t){Ci.call(this,t,oi),this.a=[]}function xi(){Ei.call(this,"facebook.com")}function ki(t){if(!t)throw new Fr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new xi).credential(null,e)}function Si(){Ei.call(this,"github.com")}function Ai(t){if(!t)throw new Fr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Si).credential(null,e)}function Pi(){Ei.call(this,"google.com"),this.ta("profile")}function Ti(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Pi).credential(n,e)}function Ii(){Ci.call(this,"twitter.com",ii)}function Oi(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Fr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bi("twitter.com",n,"twitter.com")}function Ri(t,e,n){this.a=t,this.b=e,kr(this,"providerId","password"),kr(this,"signInMethod",n===Ni.EMAIL_LINK_SIGN_IN_METHOD?Ni.EMAIL_LINK_SIGN_IN_METHOD:Ni.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ni(){Sr(this,{providerId:"password",isOAuthProvider:!1})}function Di(t,e){if(!(e=Mi(e)))throw new Fr("argument-error","Invalid email link!");return new Ri(t,e,Ni.EMAIL_LINK_SIGN_IN_METHOD)}function Mi(t){var e=ze((t=new vi(t=mi(t))).a,"oobCode")||null;return"signIn"===(ze(t.a,"mode")||null)&&e?e:null}function Li(t){if(!(t.Ra&&t.Qa||t.Ea&&t.Z))throw new Fr("internal-error");this.a=t,kr(this,"providerId","phone"),kr(this,"signInMethod","phone")}function ji(t){return t.a.Ea&&t.a.Z?{temporaryProof:t.a.Ea,phoneNumber:t.a.Z}:{sessionInfo:t.a.Ra,code:t.a.Qa}}function Fi(t){try{this.a=t||p.auth()}catch(t){throw new Fr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Sr(this,{providerId:"phone",isOAuthProvider:!1})}function Ui(t,e){if(!t)throw new Fr("missing-verification-id");if(!e)throw new Fr("missing-verification-code");return new Li({Ra:t,Qa:e})}function Vi(t){if(t.temporaryProof&&t.phoneNumber)return new Li({Ea:t.temporaryProof,Z:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(e){case"google.com":return Ti(t,n);case"facebook.com":return ki(n);case"github.com":return Ai(n);case"twitter.com":return Oi(n,r);default:return new Ei(e).credential(t,n)}}catch(t){return null}}function Wi(t){if(!t.isOAuthProvider)throw new Fr("invalid-oauth-provider")}function Bi(t,e,n,r,i){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.a=i||null,!this.f&&!this.a)throw new Fr("invalid-auth-event");if(this.f&&this.a)throw new Fr("invalid-auth-event");if(this.f&&!this.g)throw new Fr("invalid-auth-event")}function Gi(t){return(t=t||{}).type?new Bi(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Ur(t.error)):null}function Hi(){this.b=null,this.a=[]}b(di,hi),b(pi,di),b(fi,di),b(gi,di),b(_i,di),bi.prototype.xa=function(t){return va(t,wi(this))},bi.prototype.c=function(t,e){var n=wi(this);return n.idToken=e,ma(t,n)},bi.prototype.f=function(t,e){return yi(ya(t,wi(this)),e)},bi.prototype.C=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t},Ci.prototype.Ca=function(t){return this.tb=it(t),this},b(Ei,Ci),Ei.prototype.ta=function(t){return M(this.a,t)||this.a.push(t),this},Ei.prototype.yb=function(){return U(this.a)},Ei.prototype.credential=function(t,e){if(!t&&!e)throw new Fr("argument-error","credential failed: must provide the ID token and/or the access token.");return new bi(this.providerId,{idToken:t||null,accessToken:e||null},this.providerId)},b(xi,Ei),kr(xi,"PROVIDER_ID","facebook.com"),kr(xi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),b(Si,Ei),kr(Si,"PROVIDER_ID","github.com"),kr(Si,"GITHUB_SIGN_IN_METHOD","github.com"),b(Pi,Ei),kr(Pi,"PROVIDER_ID","google.com"),kr(Pi,"GOOGLE_SIGN_IN_METHOD","google.com"),b(Ii,Ci),kr(Ii,"PROVIDER_ID","twitter.com"),kr(Ii,"TWITTER_SIGN_IN_METHOD","twitter.com"),Ri.prototype.xa=function(t){return this.signInMethod==Ni.EMAIL_LINK_SIGN_IN_METHOD?Xa(t,Aa,{email:this.a,oobCode:this.b}):Xa(t,Ha,{email:this.a,password:this.b})},Ri.prototype.c=function(t,e){return this.signInMethod==Ni.EMAIL_LINK_SIGN_IN_METHOD?Xa(t,Pa,{idToken:e,email:this.a,oobCode:this.b}):Xa(t,Fa,{idToken:e,email:this.a,password:this.b})},Ri.prototype.f=function(t,e){return yi(this.xa(t),e)},Ri.prototype.C=function(){return{email:this.a,password:this.b,signInMethod:this.signInMethod}},Sr(Ni,{PROVIDER_ID:"password"}),Sr(Ni,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Sr(Ni,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Li.prototype.xa=function(t){return t.Sa(ji(this))},Li.prototype.c=function(t,e){var n=ji(this);return n.idToken=e,Xa(t,za,n)},Li.prototype.f=function(t,e){var n=ji(this);return n.operation="REAUTH",yi(t=Xa(t,qa,n),e)},Li.prototype.C=function(){var t={providerId:"phone"};return this.a.Ra&&(t.verificationId=this.a.Ra),this.a.Qa&&(t.verificationCode=this.a.Qa),this.a.Ea&&(t.temporaryProof=this.a.Ea),this.a.Z&&(t.phoneNumber=this.a.Z),t},Fi.prototype.Sa=function(r,i){var o=this.a.b;return wt(i.verify()).then(function(t){if(!c(t))throw new Fr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(i.type){case"recaptcha":return(e=o,n={phoneNumber:r,recaptchaToken:t},Xa(e,La,n)).then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t});default:throw new Fr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}var e,n})},Sr(Fi,{PROVIDER_ID:"phone"}),Sr(Fi,{PHONE_SIGN_IN_METHOD:"phone"}),Bi.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.C()}};var Yi=null;function zi(t){var e="unauthorized-domain",n=void 0,r=qe(t);t=r.b,"chrome-extension"==(r=r.c)?n=V("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=V("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Fr.call(this,e,n)}function qi(t,e,n){Fr.call(this,t,n),(t=e||{}).ub&&kr(this,"email",t.ub),t.Z&&kr(this,"phoneNumber",t.Z),t.credential&&kr(this,"credential",t.credential)}function Xi(t){if(t.code){var e=t.code||"";0==e.indexOf(Vr)&&(e=e.substring(Vr.length));var n={credential:Vi(t)};if(t.email)n.ub=t.email;else{if(!t.phoneNumber)return new Fr(e,t.message||void 0);n.Z=t.phoneNumber}return new qi(e,n,t.message)}return null}Hi.prototype.subscribe=function(t){var n=this;this.a.push(t),this.b||(this.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=ar("universalLinks.subscribe",l))&&t(null,this.b))},Hi.prototype.unsubscribe=function(e){j(this.a,function(t){return t==e})},b(zi,Fr),b(qi,Fr),qi.prototype.C=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.C();return e&&ut(t,e),t},qi.prototype.toJSON=function(){return this.C()};var Qi,Zi=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Ki(){}function Ji(t){return t.c||(t.c=t.b())}function $i(){}function to(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function eo(){}function no(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=v(this.bc,this),this.a.onerror=v(this.zb,this),this.a.onprogress=v(this.cc,this),this.a.ontimeout=v(this.fc,this)}function ro(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function io(t,e,n){this.reset(t,e,n,void 0,void 0)}Ki.prototype.c=null,b($i,Ki),$i.prototype.a=function(){var t=to(this);return t?new ActiveXObject(t):new XMLHttpRequest},$i.prototype.b=function(){var t={};return to(this)&&(t[0]=!0,t[1]=!0),t},Qi=new $i,b(eo,Ki),eo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new no;throw Error("Unsupported browser")},eo.prototype.b=function(){return{}},(t=no.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.bc=function(){this.status=200,this.responseText=this.a.responseText,ro(this,4)},t.zb=function(){this.status=500,this.responseText="",ro(this,4)},t.fc=function(){this.zb()},t.cc=function(){this.status=200,ro(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},io.prototype.a=null;function oo(t){this.f=t,this.b=this.c=this.a=null}function ao(t,e){this.name=t,this.value=e}io.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||y(),delete this.a},ao.prototype.toString=function(){return this.name};var so=new ao("SEVERE",1e3),uo=new ao("WARNING",900),co=new ao("CONFIG",700),lo=new ao("FINE",500);oo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(k("Root logger has no level set."),null)}(this).value)for(a(e)&&(e=e()),t=new io(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ho,po={},fo=null;function go(t){var e;if(fo||(fo=new oo(""),(po[""]=fo).c=co),!(e=po[t])){e=new oo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=go(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,po[t]=e}return e}function _o(t,e){t&&t.log(lo,e,void 0)}function vo(t){this.f=t}function mo(t){Te.call(this),this.j=t,this.readyState=yo,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=go("goog.net.FetchXmlHttp")}b(vo,Ki),vo.prototype.a=function(){return new mo(this.f)},vo.prototype.b=(ho={},function(){return ho}),b(mo,Te);var yo=0;function bo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function wo(t){Te.call(this),this.headers=new je,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.j=this.G=!1,this.g=0,this.s=null,this.o=Co,this.v=this.O=!1}(t=mo.prototype).open=function(t,e){if(this.readyState!=yo)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,bo(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.j.fetch(new Request(this.c,e)).then(this.ec.bind(this),this.Ab.bind(this))},t.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,bo(this)),this.readyState=yo},t.ec=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,bo(this)),this.a&&(this.readyState=3,bo(this),this.a&&t.text().then(this.dc.bind(this,t),this.Ab.bind(this))))},t.dc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,bo(this))},t.Ab=function(t){var e=this.f;e&&e.log(uo,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,bo(this))},t.setRequestHeader=function(t,e){this.g.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(uo,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(uo,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},b(wo,Te);var Co="";wo.prototype.b=go("goog.net.XhrIo");var Eo=/^https?$/i,xo=["POST","PUT"];function ko(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.N=n,e.G=!1,e.c=!0,e.a=e.D?e.D.a():Qi.a(),e.B=e.D?Ji(e.D):Ji(Qi),e.a.onreadystatechange=v(e.Db,e);try{_o(e.b,Do(e,"Opening Xhr")),e.I=!0,e.a.open(n,String(t),!0),e.I=!1}catch(t){return _o(e.b,Do(e,"Error opening Xhr: "+t.message)),void Ao(e,t)}t=r||"";var o,a=new je(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||c(t))R(t,e,void 0);else for(var n=Le(t),r=Me(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){a.set(e,t)}),i=function(t){t:{for(var e=So,n=t.length,r=c(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:c(t)?t.charAt(e):t[e]}(a.U()),r=l.FormData&&t instanceof l.FormData,!M(xo,n)||i||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.o&&(e.a.responseType=e.o),"withCredentials"in e.a&&e.a.withCredentials!==e.O&&(e.a.withCredentials=e.O);try{Oo(e),0<e.g&&(e.v=(o=e.a,Bt&&$t(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),_o(e.b,Do(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=v(e.Fa,e)):e.s=Ne(e.Fa,e.g,e)),_o(e.b,Do(e,"Sending request")),e.j=!0,e.a.send(t),e.j=!1}catch(t){_o(e.b,Do(e,"Send error: "+t.message)),Ao(e,t)}}function So(t){return"content-type"==t.toLowerCase()}function Ao(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Po(t),Io(t)}function Po(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function To(e){if(e.c&&void 0!==u)if(e.B[1]&&4==Ro(e)&&2==No(e))_o(e.b,Do(e,"Local request error detected and ignored"));else if(e.j&&4==Ro(e))Ne(e.Db,0,e);else if(e.dispatchEvent("readystatechange"),4==Ro(e)){_o(e.b,Do(e,"Request complete")),e.c=!1;try{var t,n=No(e);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Ve)[1]||null;if(!o&&l.self&&l.self.location){var a=l.self.location.protocol;o=a.substr(0,a.length-1)}i=!Eo.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<Ro(e)?e.a.statusText:""}catch(t){_o(e.b,"Can not get status: "+t.message),s=""}e.h=s+" ["+No(e)+"]",Po(e)}}finally{Io(e)}}}function Io(e,t){if(e.a){Oo(e);var n=e.a,r=e.B[0]?o:null;e.a=null,e.B=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(so,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Oo(t){t.a&&t.v&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function Ro(t){return t.a?t.a.readyState:0}function No(t){try{return 2<Ro(t)?t.a.status:-1}catch(t){return-1}}function Do(t,e){return e+" ["+t.N+" "+t.l+" "+No(t)+"]"}function Mo(t,e){this.g=[],this.v=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.j=!1,this.h=0,this.b=null,this.l=0}function Lo(t,e,n){t.a=!0,t.c=n,t.f=!e,Vo(t)}function jo(t){if(t.a){if(!t.u)throw new Wo(t);t.u=!1}}function Fo(t,e,n,r){t.g.push([e,n,r]),t.a&&Vo(t)}function Uo(t){return D(t.g,function(t){return a(t[1])})}function Vo(e){if(e.h&&e.a&&Uo(e)){var n=e.h,r=Ho[n];r&&(l.clearTimeout(r.a),delete Ho[n]),e.h=0}e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.j;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.s,n);void 0!==s&&(e.f=e.f&&(s==n||s instanceof Error),e.c=n=s),(C(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.j=!0)}catch(t){n=t,e.f=!0,Uo(e)||(r=!0)}}e.c=n,t&&(s=v(e.o,e,!0),t=v(e.o,e,!1),n instanceof Mo?(Fo(n,s,t),n.B=!0):n.then(s,t)),r&&(n=new Go(n),Ho[n.a]=n,e.h=n.a)}function Wo(){E.call(this)}function Bo(){E.call(this)}function Go(t){this.a=l.setTimeout(v(this.c,this),0),this.b=t}(t=wo.prototype).Fa=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",_o(this.b,Do(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(_o(this.b,Do(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Io(this))},t.ua=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Io(this,!0)),wo.lb.ua.call(this)},t.Db=function(){this.pa||(this.I||this.j||this.f?To(this):this.tc())},t.tc=function(){To(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case Co:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(so,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(t){return _o(this.b,"Can not get response: "+t.message),null}},Mo.prototype.cancel=function(t){if(this.a)this.c instanceof Mo&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.v?this.v.call(this.s,this):this.u=!0,this.a||(t=new Bo(this),jo(this),Lo(this,!1,t))}},Mo.prototype.o=function(t,e){this.j=!1,Lo(this,t,e)},Mo.prototype.D=function(){jo(this),Lo(this,!0,null)},Mo.prototype.then=function(t,e,n){var r,i,o=new ft(function(t,e){r=t,i=e});return Fo(this,r,function(t){t instanceof Bo?o.cancel():i(t)}),o.then(t,e,n)},w(Mo),b(Wo,E),Wo.prototype.message="Deferred has already fired",Wo.prototype.name="AlreadyCalledError",b(Bo,E),Bo.prototype.message="Deferred was canceled",Bo.prototype.name="CanceledError",Go.prototype.c=function(){throw delete Ho[this.a],this.b};var Ho={};function Yo(t){var e,n,r={},i=r.document||document,o=vn(t),a=document.createElement("SCRIPT"),s={Fb:a,Fa:void 0},u=new Mo(zo,s),c=null,l=null!=r.timeout?r.timeout:5e3;return 0<l&&(c=window.setTimeout(function(){qo(a,!0);var t=new Zo(Qo,"Timeout reached for loading script "+o);jo(u),Lo(u,!1,t)},l),s.Fa=c),a.onload=a.onreadystatechange=function(){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(qo(a,r.bd||!1,c),u.D())},a.onerror=function(){qo(a,!0,c);var t=new Zo(Xo,"Error while loading script "+o);jo(u),Lo(u,!1,t)},ut(s=r.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Rn(a,s),a.src=vn(t),(e=i,(n=(e||document).getElementsByTagName("HEAD"))&&0!=n.length?n[0]:e.documentElement).appendChild(a),u}function zo(){if(this&&this.Fb){var t=this.Fb;t&&"SCRIPT"==t.tagName&&qo(t,!0,this.Fa)}}function qo(t,e,n){null!=n&&l.clearTimeout(n),t.onload=o,t.onerror=o,t.onreadystatechange=o,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Xo=0,Qo=1;function Zo(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),E.call(this,n),this.code=t}function Ko(t){this.f=t}function Jo(t,e,n){if(this.b=t,t=e||{},this.j=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||ea,this.f=it(t.secureTokenHeaders||na),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||ra,this.a=it(t.firebaseHeaders||ia),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==Jn(),!(n=l.XMLHttpRequest||n&&p.INTERNAL.node&&p.INTERNAL.node.XMLHttpRequest)&&!Kn())throw new Fr("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,Kn()?this.c=new vo(self):$n()?this.c=new Ko(n):this.c=new eo}b(Zo,E),b(Ko,Ki),Ko.prototype.a=function(){return new this.f},Ko.prototype.b=function(){return{}};var $o,ta="idToken",ea=new mr(3e4,6e4),na={"Content-Type":"application/x-www-form-urlencoded"},ra=new mr(3e4,6e4),ia={"Content-Type":"application/json"};function oa(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function aa(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function sa(t,e,n,r,i,o,a){var s;!((s=nr(s=or())!=er?null:(s=s.match(/\sChrome\/(\d+)/i))&&2==s.length?parseInt(s[1],10):null)&&s<30||Bt&&Kt&&!(9<Kt))||Kn()?t=v(t.o,t):($o||($o=new ft(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{l[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=mn(ua,{onload:ca});Fo(Yo(n),null,function(){e(Error("CORS_UNSUPPORTED"))},void 0)}}(t,e)})),t=v(t.u,t)),t(e,n,r,i,o,a)}Jo.prototype.o=function(t,n,e,r,i,o){if(Kn()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new Fr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new wo(this.c);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}Ie(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return _o(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),Oe(a,"ready",function(){s&&clearTimeout(s),jt(this)}),Oe(a,"timeout",function(){s&&clearTimeout(s),jt(this),n&&n(null)}),ko(a,t,e,r,i)};var ua=gn("https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function la(t){if(!Zi.test(t.email))throw new Fr("invalid-email")}function ha(t){"email"in t&&la(t)}function da(t){if(!t[ta])throw new Fr("internal-error")}function pa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Fr("internal-error")}else{if(!t.sessionInfo)throw new Fr("missing-verification-id");if(!t.code)throw new Fr("missing-verification-code")}}Jo.prototype.u=function(t,n,r,i,o){var a=this;$o.then(function(){window.gapi.client.setApiKey(a.b);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).m(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Jo.prototype.jb=function(){return Xa(this,Ua,{})},Jo.prototype.mb=function(t,e){return Xa(this,ja,{idToken:t,email:e})},Jo.prototype.nb=function(t,e){return Xa(this,Fa,{idToken:t,password:e})};var fa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new Fr("internal-error")}function _a(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Xi(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Xi(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Xi(t)):t.errorMessage&&(e=Qa(t.errorMessage)),e)throw e;if(!t[ta])throw new Fr("internal-error")}function va(t,e){return e.returnIdpCredential=!0,Xa(t,Va,e)}function ma(t,e){return e.returnIdpCredential=!0,Xa(t,Ba,e)}function ya(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Xa(t,Wa,e)}function ba(t){if(!t.oobCode)throw new Fr("invalid-action-code")}(t=Jo.prototype).ob=function(t,r){var i={idToken:t},o=[];return nt(fa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Xa(this,ja,i)},t.gb=function(t,e){return ut(t={requestType:"PASSWORD_RESET",email:t},e),Xa(this,Ra,t)},t.hb=function(t,e){return ut(t={requestType:"EMAIL_SIGNIN",email:t},e),Xa(this,Ia,t)},t.fb=function(t,e){return ut(t={requestType:"VERIFY_EMAIL",idToken:t},e),Xa(this,Oa,t)},t.Sa=function(t){return Xa(this,Ya,t)},t.Wa=function(t,e){return Xa(this,Ma,{oobCode:t,newPassword:e})},t.Ia=function(t){return Xa(this,Ca,{oobCode:t})},t.Ua=function(t){return Xa(this,wa,{oobCode:t})};var wa={endpoint:"setAccountInfo",A:ba,ba:"email"},Ca={endpoint:"resetPassword",A:ba,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Fr("internal-error")}},Ea={endpoint:"signupNewUser",A:function(t){if(la(t),!t.password)throw new Fr("weak-password")},J:da,R:!0},xa={endpoint:"createAuthUri"},ka={endpoint:"deleteAccount",T:["idToken"]},Sa={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],A:function(t){if(!d(t.deleteProvider))throw new Fr("internal-error")}},Aa={endpoint:"emailLinkSignin",T:["email","oobCode"],A:la,J:da,R:!0},Pa={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],A:la,J:da,R:!0},Ta={endpoint:"getAccountInfo"},Ia={endpoint:"getOobConfirmationCode",T:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Fr("internal-error");la(t)},ba:"email"},Oa={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Fr("internal-error")},ba:"email"},Ra={endpoint:"getOobConfirmationCode",T:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Fr("internal-error");la(t)},ba:"email"},Na={pb:!0,endpoint:"getProjectConfig",Cb:"GET"},Da={pb:!0,endpoint:"getRecaptchaParam",Cb:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Fr("internal-error")}},Ma={endpoint:"resetPassword",A:ba,ba:"email"},La={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],ba:"sessionInfo"},ja={endpoint:"setAccountInfo",T:["idToken"],A:ha,R:!0},Fa={endpoint:"setAccountInfo",T:["idToken"],A:function(t){if(ha(t),!t.password)throw new Fr("weak-password")},J:da,R:!0},Ua={endpoint:"signupNewUser",J:da,R:!0},Va={endpoint:"verifyAssertion",A:ga,J:_a,R:!0},Wa={endpoint:"verifyAssertion",A:ga,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Fr("user-not-found");if(t.errorMessage)throw Qa(t.errorMessage);if(!t[ta])throw new Fr("internal-error")},R:!0},Ba={endpoint:"verifyAssertion",A:function(t){if(ga(t),!t.idToken)throw new Fr("internal-error")},J:_a,R:!0},Ga={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new Fr("invalid-custom-token")},J:da,R:!0},Ha={endpoint:"verifyPassword",A:function(t){if(la(t),!t.password)throw new Fr("wrong-password")},J:da,R:!0},Ya={endpoint:"verifyPhoneNumber",A:pa,J:da},za={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new Fr("internal-error");pa(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Xi(t);da(t)}},qa={Tb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:pa,J:da};function Xa(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.T))return Ct(new Fr("internal-error"));var r,i=e.Cb||"POST";return wt(n).then(e.A).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,r,i,o,n){var a=qe(t.g+e);Ye(a,"key",t.b),n&&Ye(a,"cb",y().toString());var s="GET"==r;if(s)for(var u in i)i.hasOwnProperty(u)&&Ye(a,u,i[u]);return new ft(function(e,n){sa(t,a.toString(),function(t){t?t.error?n(Za(t,o||{})):e(t):n(new Fr("network-request-failed"))},r,s?void 0:Ln(pr(i)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Tb,e.pb||!1)}).then(function(t){return r=t}).then(e.J).then(function(){if(!e.ba)return r;if(!(e.ba in r))throw new Fr("internal-error");return r[e.ba]})}function Qa(t){return Za({error:{errors:[{message:t}],code:400,message:t}})}function Za(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Fr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",ut(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Fr(r[i],e);return!e&&t&&(e=dr(t)),new Fr("internal-error",e)}var Ka,Ja={Wc:{Ya:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://securetoken.googleapis.com/v1/token",id:"p"},Yc:{Ya:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Zc:{Ya:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",eb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function $a(t){for(var e in Ja)if(Ja[e].id===t)return{firebaseEndpoint:(t=Ja[e]).Ya,secureTokenEndpoint:t.eb};return null}function ts(t){var o;this.b=t,this.a=null,this.ab=(o=this,(os||(os=new ft(function(t,e){function n(){vr(),ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){vr(),e(Error("Network Error"))},timeout:rs.get()})}if(ar("gapi.iframes.Iframe"))t();else if(ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){ar("gapi.load")?n():e(Error("Network Error"))},wt(Yo(r=mn(ns,{onload:r}))).m(function(){e(Error("Network Error"))})}}).m(function(t){throw os=null,t}))).then(function(){return new ft(function(r,i){ar("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},is.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}Ka=$a("__EID__")?"__EID__":void 0;var es,ns=gn("https://apis.google.com/js/api.js?onload=%{onload}"),rs=new mr(3e4,6e4),is=new mr(5e3,15e3),os=null;function as(t,e,n){this.j=t,this.g=e,this.h=n,this.f=null,this.a=Xe(this.j,"/__/auth/iframe"),Ye(this.a,"apiKey",this.g),Ye(this.a,"appName",this.h),this.b=null,this.c=[]}function ss(t,e,n,r,i){this.o=t,this.u=e,this.c=n,this.l=r,this.h=this.g=this.j=null,this.a=i,this.f=null}function us(t){try{return p.app(t).auth().Ka()}catch(t){return[]}}function cs(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.o=this.s=this.v=null,this.g=[],this.l=this.a=null}function ls(t){var e,s=Bn();return(e=t,Xa(e,Na,{}).then(function(t){return t.authorizedDomains||[]})).then(function(t){t:{var e=qe(s),n=e.c;e=e.b;for(var r=0;r<t.length;r++){var i=t[r],o=e,a=n;if(0==i.indexOf("chrome-extension://")?o=qe(i).b==o&&"chrome-extension"==a:"http"!=a&&"https"!=a?o=!1:qn.test(i)?o=o==i:(i=i.split(".").join("\\."),o=new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)),o){t=!0;break t}}t=!1}if(!t)throw new zi(Bn())})}function hs(i){return i.l||(i.l=Xn().then(function(){if(!i.s){var t=i.c,e=i.h,n=us(i.b),r=new as(i.u,i.f,i.b);r.f=t,r.b=e,r.c=U(n||[]),i.s=r.toString()}i.j=new ts(i.s),function(r){if(!r.j)throw Error("IfcHandler must be initialized!");t=r.j,e=function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Gi(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",wt(e)}return e.status="ERROR",wt(e)},t.ab.then(function(){t.a.register("authEvent",e,ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))});var t,e}(i)})),i.l}function ds(t){return t.o||(t.v=t.c?ir(t.c,us(t.b)):null,t.o=new Jo(t.f,$a(t.h),t.v)),t.o}function ps(t,e,n,r,i,o,a,s,u,c){return(t=new ss(t,e,n,r,i)).j=o,t.g=a,t.h=s,t.b=it(u||null),t.f=c,t.toString()}function fs(t){if(this.a=t||p.INTERNAL.reactNative&&p.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Fr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function gs(){if(!ms())throw new Fr("web-storage-unsupported");this.f={},this.a=[],this.b=0,this.g=l.indexedDB,this.type="indexedDB"}function _s(i){return new ft(function(e,n){var t=i.g.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new ft(function(t,e){var n=r.g.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}})).then(function(){return _s(i)}).then(function(t){e(t)}).m(function(t){n(t)})}})}function vs(t){return t.h||(t.h=_s(t)),t.h}function ms(){try{return!!l.indexedDB}catch(t){return!1}}function ys(t){return t.objectStore("firebaseLocalStorage")}function bs(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ws(t){return new ft(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(Error(t.target.errorCode))}})}function Cs(t){var n=this,e=null;this.a=[],this.type="indexedDB",this.c=t,this.b=wt().then(function(){return ms()?(es||(es=new gs),(e=es).set("__sak","!").then(function(){return e.get("__sak")}).then(function(t){if("!"!==t)throw Error("indexedDB not supported!");return e.P("__sak")}).then(function(){return e}).m(function(){return n.c})):n.c}).then(function(t){return n.type=t.type,t.Y(function(e){R(n.a,function(t){t(e)})}),t})}function Es(){this.a={},this.type="inMemory"}function xs(){if(!function(){var t="Node"==Jn();if(!(t=ks()||t&&p.INTERNAL.node&&p.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Jn())throw new Fr("internal-error","The LocalStorage compatibility library was not found.");throw new Fr("web-storage-unsupported")}this.a=ks()||p.INTERNAL.node.localStorage,this.type="localStorage"}function ks(){try{var t=l.localStorage,e=gr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ss(){this.type="nullStorage"}function As(){if(!function(){var t="Node"==Jn();if(!(t=Ps()||t&&p.INTERNAL.node&&p.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Jn())throw new Fr("internal-error","The SessionStorage compatibility library was not found.");throw new Fr("web-storage-unsupported")}this.a=Ps()||p.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ps(){try{var t=l.sessionStorage,e=gr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ts(){var t={};t.Browser=Rs,t.Node=Ns,t.ReactNative=Ds,t.Worker=Ms,this.a=t[Jn()]}as.prototype.toString=function(){return this.f?Ye(this.a,"v",this.f):sn(this.a.a,"v"),this.b?Ye(this.a,"eid",this.b):sn(this.a.a,"eid"),this.c.length?Ye(this.a,"fw",this.c.join(",")):sn(this.a.a,"fw"),this.a.toString()},ss.prototype.toString=function(){var t=Xe(this.o,"/__/auth/handler");if(Ye(t,"apiKey",this.u),Ye(t,"appName",this.c),Ye(t,"authType",this.l),this.a.isOAuthProvider){var e=this.a;try{var n=p.app(this.c).auth().ca()}catch(t){n=null}for(var r in e.Xa=n,Ye(t,"providerId",this.a.providerId),n=pr((e=this.a).tb))n[r]=n[r].toString();r=e.Ac,n=it(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.Za&&e.Xa&&!n[e.Za]&&(n[e.Za]=e.Xa),rt(n)||Ye(t,"customParameters",dr(n))}if("function"==typeof this.a.yb&&((e=this.a.yb()).length&&Ye(t,"scopes",e.join(","))),this.j?Ye(t,"redirectUrl",this.j):sn(t.a,"redirectUrl"),this.g?Ye(t,"eventId",this.g):sn(t.a,"eventId"),this.h?Ye(t,"v",this.h):sn(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!ze(t,a)&&Ye(t,a,this.b[a]);return this.f?Ye(t,"eid",this.f):sn(t.a,"eid"),(a=us(this.c)).length&&Ye(t,"fw",a.join(",")),t.toString()},(t=cs.prototype).Da=function(e,n,t){var r=new Fr("popup-closed-by-user"),i=new Fr("web-storage-unsupported"),o=this,a=!1;return this.ea().then(function(){var t,r;(t=o,r={type:"webStorageSupport"},hs(t).then(function(){return e=t.j,n=r,e.ab.then(function(){return new ft(function(t){e.a.send(n.type,n,t,ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})).then(function(t){t||(e&&Yn(e),n(i),a=!0)})}).m(function(){}).then(function(){if(!a)return n=e,new ft(function(e){return function t(){De(2e3).then(function(){if(n&&!n.closed)return t();e()})}()});var n}).then(function(){if(!a)return De(t).then(function(){n(r)})})},t.Gb=function(){var t=or();return!hr(t)&&!_r(t)},t.Bb=function(){return!1},t.xb=function(e,t,n,r,i,o,a){if(!e)return Ct(new Fr("popup-blocked"));if(a&&!hr())return this.ea().m(function(t){Yn(e),i(t)}),r(),wt();this.a||(this.a=ls(ds(this)));var s=this;return this.a.then(function(){var t=s.ea().m(function(t){throw Yn(e),i(t),t});return r(),t}).then(function(){(Wi(n),a)||Gn(ps(s.u,s.f,s.b,t,n,null,o,s.c,void 0,s.h),e)}).m(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ba=function(t,e,n){this.a||(this.a=ls(ds(this)));var r=this;return this.a.then(function(){Wi(e),Gn(ps(r.u,r.f,r.b,t,e,Bn(),n,r.c,void 0,r.h))}).m(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ea=function(){var t=this;return hs(this).then(function(){return t.j.ab}).m(function(){throw t.a=null,new Fr("network-request-failed")})},t.Lb=function(){return!0},t.va=function(t){this.g.push(t)},t.Ja=function(e){j(this.g,function(t){return t==e})},(t=fs.prototype).get=function(t){return wt(this.a.getItem(t)).then(function(t){return t&&fr(t)})},t.set=function(t,e){return wt(this.a.setItem(t,dr(e)))},t.P=function(t){return wt(this.a.removeItem(t))},t.Y=function(){},t.aa=function(){},(t=gs.prototype).set=function(n,r){var i,o=!1,a=this;return vs(this).then(function(t){return ws((t=ys(bs(i=t,!0))).get(n))}).then(function(t){var e=ys(bs(i,!0));return t?(t.value=r,ws(e.put(t))):(a.b++,o=!0,(t={}).fbase_key=n,t.value=r,ws(e.add(t)))}).then(function(){a.f[n]=r}).ha(function(){o&&a.b--})},t.get=function(e){return vs(this).then(function(t){return ws(ys(bs(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.P=function(e){var n=!1,r=this;return vs(this).then(function(t){return n=!0,r.b++,ws(ys(bs(t,!0)).delete(e))}).then(function(){delete r.f[e]}).ha(function(){n&&r.b--})},t.Jc=function(){var r=this;return vs(this).then(function(t){var i=ys(bs(t,!1));return i.getAll?ws(i.getAll()):new ft(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(Error(t.target.errorCode))}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)if(r in n)if(typeof e[r]!=typeof n[r])i.push(r);else if(d(e[r])){t:{var o=void 0,a=e[r],s=n[r];for(o in a)if(!(o in s)||a[o]!==s[o]){o=!1;break t}for(o in s)if(!(o in a)){o=!1;break t}o=!0}o||i.push(r)}else"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r);else i.push(r);for(r in n)r in e||i.push(r);return i}(r.f,e),r.f=e}return n})},t.Y=function(t){var n;0==this.a.length&&((n=this).c&&n.c.cancel("STOP_EVENT"),function e(){return n.c=De(800).then(v(n.Jc,n)).then(function(e){0<e.length&&R(n.a,function(t){t(e)})}).then(e).m(function(t){"STOP_EVENT"!=t.message&&e()}),n.c}()),this.a.push(t)},t.aa=function(e){j(this.a,function(t){return t==e}),0==this.a.length&&this.c&&this.c.cancel("STOP_EVENT")},(t=Cs.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.P=function(e){return this.b.then(function(t){return t.P(e)})},t.Y=function(t){this.a.push(t)},t.aa=function(e){j(this.a,function(t){return t==e})},(t=Es.prototype).get=function(t){return wt(this.a[t])},t.set=function(t,e){return this.a[t]=e,wt()},t.P=function(t){return delete this.a[t],wt()},t.Y=function(){},t.aa=function(){},(t=xs.prototype).get=function(t){var e=this;return wt().then(function(){return fr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return wt().then(function(){var t=dr(n);null===t?r.P(e):r.a.setItem(e,t)})},t.P=function(t){var e=this;return wt().then(function(){e.a.removeItem(t)})},t.Y=function(t){l.window&&ve(l.window,"storage",t)},t.aa=function(t){l.window&&be(l.window,"storage",t)},(t=Ss.prototype).get=function(){return wt(null)},t.set=function(){return wt()},t.P=function(){return wt()},t.Y=function(){},t.aa=function(){},(t=As.prototype).get=function(t){var e=this;return wt().then(function(){return fr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return wt().then(function(){var t=dr(n);null===t?r.P(e):r.a.setItem(e,t)})},t.P=function(t){var e=this;return wt().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.aa=function(){};var Is,Os,Rs={w:xs,Pa:As},Ns={w:xs,Pa:As},Ds={w:fs,Pa:Ss},Ms={w:xs,Pa:Ss},Ls={Vc:"local",NONE:"none",Xc:"session"};function js(){var t=!(_r(or())||!Zn()),e=hr(),n=sr();this.o=t,this.h=e,this.l=n,this.a={},Is||(Is=new Ts),t=Is;try{this.g=!Wn()&&wr()||!l.indexedDB?new t.a.w:new Cs(Kn()?new Es:new t.a.w)}catch(t){this.g=new Es,this.h=!0}try{this.j=new t.a.Pa}catch(t){this.j=new Es}this.u=new Es,this.f=v(this.Kb,this),this.b={}}function Fs(){return Os||(Os=new js),Os}function Us(t,e){switch(e){case"session":return t.j;case"none":return t.u;default:return t.g}}function Vs(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ws(t,e,n){return n=Vs(e,n),"local"==e.w&&(t.b[n]=null),Us(t,e.w).P(n)}function Bs(t){t.c&&(clearInterval(t.c),t.c=null)}function Gs(t){this.a=t,this.b=Fs()}(t=js.prototype).get=function(t,e){return Us(this,t.w).get(Vs(t,e))},t.set=function(e,t,n){var r=Vs(e,n),i=this,o=Us(this,e.w);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.w&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Vs(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),rt(this.a)&&(Us(this,"local").Y(this.f),this.h||(Wn()||!wr())&&l.indexedDB||!this.l||(Bs(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new ae({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Kb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Vs(t,e),this.a[t]&&(j(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),rt(this.a)&&(Us(this,"local").aa(this.f),Bs(this))},t.Kb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Va(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Us(this,"local").aa(this.f):Bs(this),this.o)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.Va(e))},Bt&&Kt&&10==Kt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else R(t,v(this.Va,this))},t.Va=function(t){this.a[t]&&R(this.a[t],function(t){t()})};var Hs,Ys={name:"authEvent",w:"local"};function zs(){this.a=Fs()}function qs(t,e){this.b=-1,this.b=Xs,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.j=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0!==Hs||(Hs=l.Int32Array?new Int32Array(eu):eu),this.reset()}b(qs,function(){this.b=-1});for(var Xs=64,Qs=Xs-1,Zs=[],Ks=0;Ks<Qs;Ks++)Zs[Ks]=0;var Js=F(128,Zs);function $s(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Hs[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function tu(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(c(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&($s(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&($s(t),i=0)}}t.c=i,t.g+=n}qs.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):U(this.h)};var eu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function nu(){qs.call(this,8,ru)}b(nu,qs);var ru=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function iu(t,e,n,r,i){this.u=t,this.j=e,this.l=n,this.o=r||null,this.s=i||null,this.h=e+":"+n,this.v=new zs,this.g=new Gs(this.h),this.f=null,this.b=[],this.a=this.c=null}function ou(t){return new Fr("invalid-cordova-configuration",t)}function au(t){var e=new nu;tu(e,t),t=[];var n=8*e.g;e.c<56?tu(e,Js,56-e.c):tu(e,Js,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for($s(e),r=n=0;r<e.j;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return N(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function su(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function uu(r){return r.f||(r.f=r.ea().then(function(){return new ft(function(n){r.va(function t(e){return n(e),r.Ja(t),!1}),function(i){function e(r){t=!0,n&&n.cancel(),cu(i).then(function(t){var e=o;if(t&&r&&r.url){var n=null;-1!=(e=mi(r.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=fr(ze(n=qe(e),"firebaseError")||null))?Ur(n):null)?new Bi(t.b,t.c,null,null,n):new Bi(t.b,t.c,e,t.g)),e=n||o}su(i,e)})}var o=new Bi("unknown",null,null,null,new Fr("no-auth-event")),t=!1,n=De(500).then(function(){return cu(i).then(function(){t||su(i,o)})}),r=l.handleOpenURL;l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(ar("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Yi||(Yi=new Hi),Yi.subscribe(e)}(r)})})),r.f}function cu(e){var t,n=null;return(t=e.g,t.b.get(Ys,t.a).then(function(t){return Gi(t)})).then(function(t){return n=t,Ws((t=e.g).b,Ys,t.a)}).then(function(){return n})}function lu(t){this.a=t,this.b=Fs()}(t=iu.prototype).ea=function(){return this.ya?this.ya:this.ya=(Qn(void 0)?Xn().then(function(){return new ft(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ct(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof ar("universalLinks.subscribe",l))throw ou("cordova-universal-links-plugin is not installed");if(void 0===ar("BuildInfo.packageName",l))throw ou("cordova-plugin-buildinfo is not installed");if("function"!=typeof ar("cordova.plugins.browsertab.openUrl",l))throw ou("cordova-plugin-browsertab is not installed");if("function"!=typeof ar("cordova.InAppBrowser.open",l))throw ou("cordova-plugin-inappbrowser is not installed")},function(){throw new Fr("cordova-not-ready")})},t.Da=function(t,e){return e(new Fr("operation-not-supported-in-this-environment")),wt()},t.xb=function(){return Ct(new Fr("operation-not-supported-in-this-environment"))},t.Lb=function(){return!1},t.Gb=function(){return!0},t.Bb=function(){return!0},t.Ba=function(t,e,n){if(this.c)return Ct(new Fr("redirect-operation-pending"));var r=this,i=l.document,o=null,a=null,s=null,u=null;return this.c=wt().then(function(){return Wi(e),uu(r)}).then(function(){return function(n,t,e,r){var i=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),o=new Bi(t,r,null,i,new Fr("no-auth-event")),a=ar("BuildInfo.packageName",l);if("string"!=typeof a)throw new Fr("invalid-cordova-configuration");var s=ar("BuildInfo.displayName",l),u={};if(or().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=a;else{if(!or().toLowerCase().match(/android/))return Ct(new Fr("operation-not-supported-in-this-environment"));u.apn=a}s&&(u.appDisplayName=s),i=au(i),u.sessionId=i;var c=ps(n.u,n.j,n.l,t,e,null,r,n.o,u,n.s);return n.ea().then(function(){var t=n.h;return n.v.a.set(Ys,o.C(),t)}).then(function(){var t=ar("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new Fr("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=ar("cordova.plugins.browsertab.openUrl",l)))throw new Fr("invalid-cordova-configuration");e(c)}else{if("function"!=typeof(e=ar("cordova.InAppBrowser.open",l)))throw new Fr("invalid-cordova-configuration");t=!(!(t=or()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),n.a=e(c,t?"_blank":"_system","location=yes")}})})}(r,t,e,n)}).then(function(){return new ft(function(e,t){a=function(){var t=ar("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.va(a),s=function(){o||(o=De(2e3).then(function(){t(new Fr("redirect-cancelled-by-user"))}))},u=function(){yr()&&s()},i.addEventListener("resume",s,!1),or().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",u,!1)}).m(function(t){return cu(r).then(function(){throw t})})}).ha(function(){s&&i.removeEventListener("resume",s,!1),u&&i.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),a&&r.Ja(a),r.c=null})},t.va=function(e){this.b.push(e),uu(this).m(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Bi("unknown",null,null,null,new Fr("no-auth-event")),e(t))})},t.Ja=function(e){j(this.b,function(t){return t==e})};var hu={name:"pendingRedirect",w:"session"};function du(t){return Ws(t.b,hu,t.a)}function pu(t,e,n){this.v=t,this.l=e,this.u=n,this.h=[],this.f=!1,this.j=v(this.o,this),this.c=new Eu,this.s=new Au,this.g=new lu(this.l+":"+this.u),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.s,this.b.linkViaPopup=this.s,this.b.reauthViaPopup=this.s,this.a=fu(this.v,this.l,this.u,Ka)}function fu(t,e,n,r){var i=p.SDK_VERSION||null;return Qn()?new iu(t,e,n,i,r):new cs(t,e,n,i,r)}function gu(e){e.f||(e.f=!0,e.a.va(e.j));var n=e.a;return e.a.ea().m(function(t){throw e.a==n&&e.reset(),t})}function _u(n){n.a.Gb()&&gu(n).m(function(t){var e=new Bi("unknown",null,null,null,new Fr("operation-not-supported-in-this-environment"));bu(t)&&n.o(e)}),n.a.Bb()||xu(n.c)}pu.prototype.reset=function(){this.f=!1,this.a.Ja(this.j),this.a=fu(this.v,this.l,this.u)},pu.prototype.subscribe=function(t){if(M(this.h,t)||this.h.push(t),!this.f){var n=this;(e=this.g,e.b.get(hu,e.a).then(function(t){return"pending"==t})).then(function(t){t?du(n.g).then(function(){gu(n).m(function(t){var e=new Bi("unknown",null,null,null,new Fr("operation-not-supported-in-this-environment"));bu(t)&&n.o(e)})}):_u(n)}).m(function(){_u(n)})}var e},pu.prototype.unsubscribe=function(e){j(this.h,function(t){return t==e})},pu.prototype.o=function(t){if(!t)throw new Fr("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.qb(t.b,t.c)){(e=this.b[t.b])&&e.h(t,r),e=!0;break}}return xu(this.c),e};var vu=new mr(2e3,1e4),mu=new mr(3e4,6e4);function yu(t,e,n,r,i,o){return t.a.xb(e,n,r,function(){t.f||(t.f=!0,t.a.va(t.j))},function(){t.reset()},i,o)}function bu(t){return!(!t||"auth/cordova-not-ready"!=t.code)}pu.prototype.da=function(){return this.c.da()},pu.prototype.Ba=function(t,e,n){var r,i,o=this;return(i=this.g,i.b.set(hu,"pending",i.a)).then(function(){return o.a.Ba(t,e,n).m(function(t){if(bu(t))throw new Fr("operation-not-supported-in-this-environment");return r=t,du(o.g).then(function(){throw r})}).then(function(){return o.a.Lb()?new ft(function(){}):du(o.g).then(function(){return o.da()}).then(function(){}).m(function(){})})})},pu.prototype.Da=function(e,n,t,r){return this.a.Da(t,function(t){e.ga(n,null,t,r)},vu.get())};var wu={};function Cu(t,e,n){var r=e+":"+n;return wu[r]||(wu[r]=new pu(t,e,n)),wu[r]}function Eu(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function xu(t){t.g||(t.g=!0,Su(t,!1,null,null))}function ku(t,e){if(t.b=function(){return wt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Su(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ct(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):ku(t,n):ku(t,{user:null}),t.f=[],t.c=[]}function Au(){}function Pu(t,e){this.a=e,kr(this,"verificationId",t)}function Tu(t,e,n,r){return new Fi(t).Sa(e,n).then(function(t){return new Pu(t,r)})}function Iu(t){var e=ri(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Fr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Sr(this,{token:t,expirationTime:br(1e3*e.exp),authTime:br(1e3*e.auth_time),issuedAtTime:br(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Ou(t,e,n){if(this.h=t,this.j=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Ru(t){this.f=t,this.b=this.a=null,this.c=0}function Nu(t,e){var n=e[ta],r=e.refreshToken;e=Du(e.expiresIn),t.b=n,t.c=e,t.a=r}function Du(t){return y()+1e3*parseInt(t,10)}function Mu(e,t){return(r=e.f,i=t,new ft(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?sa(r,r.j+"?key="+encodeURIComponent(r.b),function(t){t?t.error?n(Za(t)):t.access_token&&t.refresh_token?e(t):n(new Fr("internal-error")):n(new Fr("network-request-failed"))},"POST",an(i).toString(),r.f,r.l.get()):n(new Fr("internal-error"))})).then(function(t){return e.b=t.access_token,e.c=Du(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}}).m(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function Lu(t,e){this.a=t||null,this.b=e||null,Sr(this,{lastSignInTime:br(e||null),creationTime:br(t||null)})}function ju(t,e,n,r,i,o){Sr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Fu(t,e){for(var n in oe.call(this,t),e)this[n]=e[n]}function Uu(t,e,n){var r;this.D=[],this.G=t.apiKey,this.s=t.appName,this.B=t.authDomain||null,t=p.SDK_VERSION?ir(p.SDK_VERSION):null,this.b=new Jo(this.G,$a(Ka),t),this.h=new Ru(this.b),zu(this,e[ta]),Nu(this.h,e),kr(this,"refreshToken",this.h.a),Qu(this,n||{}),Te.call(this),this.I=!1,this.B&&ur()&&(this.a=Cu(this.B,this.G,this.s)),this.N=[],this.j=null,this.l=(r=this,new Ou(function(){return r.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=r.h.c-y()-3e5;return 0<t?t:0})),this.V=v(this.Ga,this);var i=this;this.ia=null,this.sa=function(t){i.na(t.g)},this.X=null,this.O=[],this.ra=function(t){Wu(i,t.c)},this.W=null}function Vu(t,e){t.X&&be(t.X,"languageCodeChanged",t.sa),(t.X=e)&&ve(e,"languageCodeChanged",t.sa)}function Wu(t,e){t.O=e,aa(t.b,p.SDK_VERSION?ir(p.SDK_VERSION,t.O):null)}function Bu(t,e){t.W&&be(t.W,"frameworkChanged",t.ra),(t.W=e)&&ve(e,"frameworkChanged",t.ra)}function Gu(e){try{return p.app(e.s).auth()}catch(t){throw new Fr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.s+"'!")}}function Hu(t){t.o||t.l.b||(t.l.start(),be(t,"tokenChanged",t.V),ve(t,"tokenChanged",t.V))}function Yu(t){be(t,"tokenChanged",t.V),t.l.stop()}function zu(t,e){t.qa=e,kr(t,"_lat",e)}function qu(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return(a=e,new ft(function(r){var i=a.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Zb:!0,value:n}:{Zb:!1,reason:n},0==i&&r(o)},e=0;e<a.length;e++)Et(a[e],m(t,e,!0),m(t,e,!1));else r(o)})).then(function(){return t});var a}function Xu(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function Qu(t,e){Sr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new Lu(e.createdAt,e.lastLoginAt),providerData:[]})}function Zu(){}function Ku(t){return wt().then(function(){if(t.o)throw new Fr("app-deleted")})}function Ju(t){return N(t.providerData,function(t){return t.providerId})}function $u(t,e){e&&(tc(t,e.providerId),t.providerData.push(e))}function tc(t,e){j(t.providerData,function(t){return t.providerId==e})}function ec(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&kr(t,e,n)}function nc(e,t){var n;e!=t&&(Sr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,providerData:[]}),t.metadata?kr(e,"metadata",new Lu((n=t.metadata).a,n.b)):kr(e,"metadata",new Lu),R(t.providerData,function(t){$u(e,t)}),e.h=t.h,kr(e,"refreshToken",e.h.a))}function rc(i){return i.F().then(function(t){var e,n,r=i.isAnonymous;return(e=i,n=t,Xa(e.b,Ta,{idToken:n}).then(v(e.uc,e))).then(function(){return r||ec(i,"isAnonymous",!1),t})})}function ic(t,e){e[ta]&&t.qa!=e[ta]&&(Nu(t.h,e),t.dispatchEvent(new Fu("tokenChanged")),zu(t,e[ta]),ec(t,"refreshToken",t.h.a))}function oc(t,e){return rc(t).then(function(){if(M(Ju(t),e))return qu(t).then(function(){throw new Fr("provider-already-linked")})})}function ac(t,e,n){return Ar({user:t,credential:Vi(e),additionalUserInfo:e=ui(e),operationType:n})}function sc(t,e){return ic(t,e),t.reload().then(function(){return t})}function uc(n,r,t,e,i){if(!ur())return Ct(new Fr("operation-not-supported-in-this-environment"));if(n.j&&!i)return Ct(n.j);var o=si(t.providerId),a=gr(n.uid+":::"),s=null;(!hr()||Zn())&&n.B&&t.isOAuthProvider&&(s=ps(n.B,n.G,n.s,r,t,null,a,p.SDK_VERSION||null));var u=zn(s,o&&o.Aa,o&&o.za);return e=e().then(function(){if(lc(n),!i)return n.F().then(function(){})}).then(function(){return yu(n.a,u,r,t,a,!!s)}).then(function(){return new ft(function(t,e){n.ga(r,null,new Fr("cancelled-popup-request"),n.g||null),n.f=t,n.v=e,n.g=a,n.c=n.a.Da(n,r,u,a)})}).then(function(t){return u&&Yn(u),t?Ar(t):null}).m(function(t){throw u&&Yn(u),t}),hc(n,e,i)}function cc(e,t,n,r,i){if(!ur())return Ct(new Fr("operation-not-supported-in-this-environment"));if(e.j&&!i)return Ct(e.j);var o=null,a=gr(e.uid+":::");return r=r().then(function(){if(lc(e),!i)return e.F().then(function(){})}).then(function(){return e.$=a,qu(e)}).then(function(t){return e.fa&&(t=(t=e.fa).b.set(fc,e.C(),t.a)),t}).then(function(){return e.a.Ba(t,n,a)}).m(function(t){if(o=t,e.fa)return gc(e.fa);throw o}).then(function(){if(o)throw o}),hc(e,r,i)}function lc(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Fr("internal-error");throw new Fr("auth-domain-config-required")}}function hc(t,e,n){var r,i,o,a=(i=e,o=n,(r=t).j&&!o?(i.cancel(),Ct(r.j)):i.m(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.j||r.dispatchEvent(new Fu("userInvalidated")),r.j=t),t}));return t.D.push(a),a.ha(function(){L(t.D,a)}),a}function dc(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[ta]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-y())/1e3;var r=new Uu(e,n,t);return t.providerData&&R(t.providerData,function(t){t&&$u(r,Ar(t))}),t.redirectEventId&&(r.$=t.redirectEventId),r}function pc(t){this.a=t,this.b=Fs()}Eu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Eu.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;"unknown"!=n||i||o?t.a?(Su(this,!0,null,t.a),wt()):e.wa(n,r)?function(e,t,n){n=n.wa(t.b,t.c);var r=t.f,i=t.g,o=!!t.b.match(/Redirect$/);n(r,i).then(function(t){Su(e,o,t,null)}).m(function(t){Su(e,o,null,t)})}(this,t,e):Ct(new Fr("invalid-auth-event")):(Su(this,!1,null,null),wt())}else Ct(new Fr("invalid-auth-event"))},Eu.prototype.da=function(){var i=this;return new ft(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new Fr("timeout"),n.a&&n.a.cancel(),n.a=De(mu.get()).then(function(){n.b||Su(n,!0,null,r)}))})},Au.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.ga(t.b,null,t.a,t.c),wt()):e.wa(n,r)?(o=e,a=(i=t).c,s=i.b,o.wa(s,a)(i.f,i.g).then(function(t){o.ga(s,t,null,a)}).m(function(t){o.ga(s,null,t,a)})):Ct(new Fr("invalid-auth-event"))}else Ct(new Fr("invalid-auth-event"));var i,o,a,s},Pu.prototype.confirm=function(t){return t=Ui(this.verificationId,t),this.a(t)},Ou.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=De((r=n,i=t,i?(r.a=r.c,r.g()):(i=r.a,r.a*=2,r.a>r.f&&(r.a=r.f),i))).then(function(){return e=l.document,n=null,yr()||!e?wt():new ft(function(t){n=function(){yr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).m(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).m(function(t){n.j(t)&&e(n,!1)});var r,i}(this,!0)},Ou.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Ru.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Ru.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ct(new Fr("user-token-expired")):t||!this.b||y()>this.c-3e4?this.a?Mu(this,{grant_type:"refresh_token",refresh_token:this.a}):wt(null):wt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Lu.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},b(Fu,oe),b(Uu,Te),Uu.prototype.na=function(t){this.ia=t,oa(this.b,t)},Uu.prototype.ca=function(){return this.ia},Uu.prototype.Ka=function(){return U(this.O)},Uu.prototype.Ga=function(){this.l.b&&(this.l.stop(),this.l.start())},kr(Uu.prototype,"providerId","firebase"),(t=Uu.prototype).reload=function(){var t=this;return hc(this,Ku(this).then(function(){return rc(t).then(function(){return qu(t)}).then(Zu)}))},t.ac=function(t){return this.F(t).then(function(t){return new Iu(t)})},t.F=function(t){var e=this;return hc(this,Ku(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Fr("internal-error");return t.accessToken!=e.qa&&(zu(e,t.accessToken),e.dispatchEvent(new Fu("tokenChanged"))),ec(e,"refreshToken",t.refreshToken),t.accessToken}))},t.getToken=function(t){return Er["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(Er["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead.")),this.F(t)},t.uc=function(t){if(!(t=t.users)||!t.length)throw new Fr("internal-error");Qu(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=(r=(r=t).providerUserInfo)&&r.length?N(r,function(t){return new ju(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],n=0;n<e.length;n++)$u(this,e[n]);var r;ec(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.bb=function(t){var e=this,n=null;return hc(this,t.f(this.b,this.uid).then(function(t){return ic(e,t),n=ac(e,t,"reauthenticate"),e.j=null,e.reload()}).then(function(){return n}),!0)},t.vc=function(t){return this.bb(t).then(function(){})},t.$a=function(e){var n=this,r=null;return hc(this,oc(this,e.providerId).then(function(){return n.F()}).then(function(t){return e.c(n.b,t)}).then(function(t){return r=ac(n,t,"link"),sc(n,t)}).then(function(){return r}))},t.mc=function(t){return this.$a(t).then(function(t){return t.user})},t.nc=function(t,e){var n=this;return hc(this,oc(this,"phone").then(function(){return Tu(Gu(n),t,e,v(n.$a,n))}))},t.wc=function(t,e){var n=this;return hc(this,wt().then(function(){return Tu(Gu(n),t,e,v(n.bb,n))}),!0)},t.mb=function(e){var n=this;return hc(this,this.F().then(function(t){return n.b.mb(t,e)}).then(function(t){return ic(n,t),n.reload()}))},t.Nc=function(e){var n=this;return hc(this,this.F().then(function(t){return e.c(n.b,t)}).then(function(t){return ic(n,t),n.reload()}))},t.nb=function(e){var n=this;return hc(this,this.F().then(function(t){return n.b.nb(t,e)}).then(function(t){return ic(n,t),n.reload()}))},t.ob=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Ku(this);var n=this;return hc(this,this.F().then(function(t){return n.b.ob(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return ic(n,t),ec(n,"displayName",t.displayName||null),ec(n,"photoURL",t.photoUrl||null),R(n.providerData,function(t){"password"===t.providerId&&(kr(t,"displayName",n.displayName),kr(t,"photoURL",n.photoURL))}),qu(n)}).then(Zu))},t.Mc=function(i){var o=this;return hc(this,rc(this).then(function(t){return M(Ju(o),i)?(e=o.b,n=t,r=[i],Xa(e,Sa,{idToken:n,deleteProvider:r})).then(function(t){var e={};return R(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),R(Ju(o),function(t){e[t]||tc(o,t)}),e[Fi.PROVIDER_ID]||kr(o,"phoneNumber",null),qu(o)}):qu(o).then(function(){throw new Fr("no-such-provider")});var e,n,r}))},t.delete=function(){var e=this;return hc(this,this.F().then(function(t){return Xa(e.b,ka,{idToken:t})}).then(function(){e.dispatchEvent(new Fu("userDeleted"))})).then(function(){for(var t=0;t<e.D.length;t++)e.D[t].cancel("app-deleted");Vu(e,null),Bu(e,null),e.D=[],e.o=!0,Yu(e),kr(e,"refreshToken",null),e.a&&e.a.unsubscribe(e)})},t.qb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.$||null)==e||"reauthViaRedirect"==t&&(this.$||null)==e)},t.ga=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?v(this.vb,this):"reauthViaPopup"==t&&e==(this.g||null)?v(this.wb,this):"linkViaRedirect"==t&&(this.$||null)==e?v(this.vb,this):"reauthViaRedirect"==t&&(this.$||null)==e?v(this.wb,this):null},t.oc=function(t){var e=this;return uc(this,"linkViaPopup",t,function(){return oc(e,t.providerId).then(function(){return qu(e)})},!1)},t.xc=function(t){return uc(this,"reauthViaPopup",t,function(){return wt()},!0)},t.pc=function(t){var e=this;return cc(this,"linkViaRedirect",t,function(){return oc(e,t.providerId)},!1)},t.yc=function(t){return cc(this,"reauthViaRedirect",t,function(){return wt()},!0)},t.vb=function(e,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return hc(this,this.F().then(function(t){return ma(r.b,{requestUri:e,sessionId:n,idToken:t})}).then(function(t){return i=ac(r,t,"link"),sc(r,t)}).then(function(){return i}))},t.wb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return hc(this,wt().then(function(){return yi(ya(n.b,{requestUri:t,sessionId:e}),n.uid)}).then(function(t){return r=ac(n,t,"reauthenticate"),ic(n,t),n.j=null,n.reload()}).then(function(){return r}),!0)},t.fb=function(e){var n=this,r=null;return hc(this,this.F().then(function(t){return r=t,void 0===e||rt(e)?{}:Kr(new Br(e))}).then(function(t){return n.b.fb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.toJSON=function(){return this.C()},t.C=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.s,authDomain:this.B,stsTokenManager:this.h.C(),redirectEventId:this.$||null};return this.metadata&&ut(e,this.metadata.C()),R(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),e};var fc={name:"redirectUser",w:"session"};function gc(t){return Ws(t.b,fc,t.a)}function _c(t){var e,n,r,i,o,a,s,u,c;this.a=t,this.b=Fs(),this.c=null,this.f=(e=this,n=yc("local"),r=yc("session"),i=yc("none"),(o=e.b,a=n,s=e.a,u=Vs(a,s),c=Us(o,a.w),o.get(a,s).then(function(t){var e=null;try{e=fr(l.localStorage.getItem(u))}catch(t){}if(e&&!t)return l.localStorage.removeItem(u),o.set(a,e,s);e&&t&&"localStorage"!=c.type&&l.localStorage.removeItem(u)})).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(mc,e.a).then(function(t){return t?yc(t):n})})})}).then(function(t){return e.c=t,vc(e,t.w)}).m(function(){e.c||(e.c=n)})),this.b.addListener(yc("local"),this.a,v(this.g,this))}function vc(t,e){var n,s,r=[];for(n in Ls)Ls[n]!==e&&r.push(Ws(t.b,yc(Ls[n]),t.a));return r.push(Ws(t.b,mc,t.a)),s=r,new ft(function(n,e){var r=s.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},a=0;a<s.length;a++)Et(s[a],m(t,a),o);else n(i)})}_c.prototype.g=function(){var e=this,n=yc("local");Ec(this,function(){return wt().then(function(){return e.c&&"local"!=e.c.w?e.b.get(n,e.a):null}).then(function(t){if(t)return vc(e,"local").then(function(){e.c=n})})})};var mc={name:"persistence",w:"session"};function yc(t){return{name:"authUser",w:t}}function bc(t,e){return Ec(t,function(){return t.b.set(t.c,e.C(),t.a)})}function wc(t){return Ec(t,function(){return Ws(t.b,t.c,t.a)})}function Cc(t,e){return Ec(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),dc(t||{})})})}function Ec(t,e){return t.f=t.f.then(e,e),t.f}function xc(t){if(this.l=!1,kr(this,"app",t),!Oc(this).options||!Oc(this).options.apiKey)throw new Fr("invalid-api-key");var n,e,r,i,o,a,s,u,c,l,h,d;t=p.SDK_VERSION?ir(p.SDK_VERSION):null,this.b=new Jo(Oc(this).options&&Oc(this).options.apiKey,$a(Ka),t),this.N=[],this.o=[],this.I=[],this.Ob=p.INTERNAL.createSubscribe(v(this.ic,this)),this.O=void 0,this.Pb=p.INTERNAL.createSubscribe(v(this.jc,this)),Tc(this,null),this.h=new _c(Oc(this).options.apiKey+":"+Oc(this).name),this.G=new pc(Oc(this).options.apiKey+":"+Oc(this).name),this.V=Mc(this,(e=Oc(n=this).options.authDomain,r=(i=n,o=(a=i.G,s=Oc(i).options.authDomain,a.b.get(fc,a.a).then(function(t){return t&&s&&(t.authDomain=s),dc(t||{})})).then(function(t){return(i.B=t)&&(t.fa=i.G),gc(i.G)}),Mc(i,o)).then(function(){return Cc(n.h,e)}).then(function(e){return e?(e.fa=n.G,n.B&&(n.B.$||null)==(e.$||null)?e:e.reload().then(function(){return bc(n.h,e).then(function(){return e})}).m(function(t){return"auth/network-request-failed"==t.code?e:wc(n.h)})):null}).then(function(t){Tc(n,t||null)}),Mc(n,r))),this.j=Mc(this,(u=this).V.then(function(){return u.da()}).m(function(){}).then(function(){if(!u.l)return u.ia()}).m(function(){}).then(function(){if(!u.l){u.X=!0;var t=u.h;t.b.addListener(yc("local"),t.a,u.ia)}})),this.X=!1,this.ia=v(this.Ic,this),this.Ga=v(this.ka,this),this.qa=v(this.Yb,this),this.ra=v(this.gc,this),this.sa=v(this.hc,this),l=Oc(c=this).options.authDomain,h=Oc(c).options.apiKey,l&&ur()&&(c.Nb=c.V.then(function(){if(!c.l){if(c.a=Cu(l,h,Oc(c).name),c.a.subscribe(c),Rc(c)&&Xu(Rc(c)),c.B){Xu(c.B);var t=c.B;t.na(c.ca()),Vu(t,c),Wu(t=c.B,c.D),Bu(t,c),c.B=null}return c.a}})),this.INTERNAL={},this.INTERNAL.delete=v(this.delete,this),this.INTERNAL.logFramework=v(this.qc,this),this.s=0,Te.call(this),d=this,Object.defineProperty(d,"lc",{get:function(){return this.ca()},set:function(t){this.na(t)},enumerable:!1}),d.W=null,this.D=[]}function kc(t){oe.call(this,"languageCodeChanged"),this.g=t}function Sc(t){oe.call(this,"frameworkChanged"),this.c=t}function Ac(t){return t.Nb||Ct(new Fr("auth-domain-config-required"))}function Pc(o,a){var s={};return s.apiKey=Oc(o).options.apiKey,s.authDomain=Oc(o).options.authDomain,s.appName=Oc(o).name,o.V.then(function(){return t=s,e=a,n=o.G,r=o.Ka(),i=new Uu(t,e),n&&(i.fa=n),r&&Wu(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return Rc(o)&&t.uid==Rc(o).uid?nc(Rc(o),t):(Tc(o,t),Xu(t)),o.ka(t)}).then(function(){Dc(o)})}function Tc(t,e){var n,r;Rc(t)&&(n=Rc(t),r=t.Ga,j(n.N,function(t){return t==r}),be(Rc(t),"tokenChanged",t.qa),be(Rc(t),"userDeleted",t.ra),be(Rc(t),"userInvalidated",t.sa),Yu(Rc(t))),e&&(e.N.push(t.Ga),ve(e,"tokenChanged",t.qa),ve(e,"userDeleted",t.ra),ve(e,"userInvalidated",t.sa),0<t.s&&Hu(e)),kr(t,"currentUser",e),e&&(e.na(t.ca()),Vu(e,t),Wu(e,t.D),Bu(e,t))}function Ic(e,t){var n=null,r=null;return Mc(e,t.then(function(t){return n=Vi(t),r=ui(t),Pc(e,t)}).then(function(){return Ar({user:Rc(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function Oc(t){return t.app}function Rc(t){return t.currentUser}function Nc(t){return Rc(t)&&Rc(t)._lat||null}function Dc(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](Nc(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](Nc(t))}}function Mc(t,e){return t.N.push(e),e.ha(function(){L(t.N,e)}),e}function Lc(t,e,n,r,i,o){if(kr(this,"type","recaptcha"),this.b=this.c=null,this.o=!1,this.l=e,this.a=n||{theme:"light",type:"image"},this.g=[],this.a[Uc])throw new Fr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[Vc],!l.document)throw new Fr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!On(e)||!this.h&&On(e).hasChildNodes())throw new Fr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Jo(t,o||null,i||null),this.s=r||function(){return null};var a=this;this.j=[];var s=this.a[jc];this.a[jc]=function(t){if(Wc(a,t),"function"==typeof s)s(t);else if("string"==typeof s){var e=ar(s,l);"function"==typeof e&&e(t)}};var u=this.a[Fc];this.a[Fc]=function(){if(Wc(a,null),"function"==typeof u)u();else if("string"==typeof u){var t=ar(u,l);"function"==typeof t&&t()}}}_c.prototype.ib=function(e){var n=null,r=this;return function(t){var e=new Fr("invalid-persistence-type"),n=new Fr("unsupported-persistence-type");t:{for(r in Ls)if(Ls[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Jn()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!sr()&&"none"!==t)throw n}}(e),Ec(this,function(){return e!=r.c.w?r.b.get(r.c,r.a).then(function(t){return n=t,vc(r,e)}).then(function(){if(r.c=yc(e),n)return r.b.set(r.c,n,r.a)}):wt()})},b(xc,Te),b(kc,oe),b(Sc,oe),(t=xc.prototype).ib=function(t){return Mc(this,t=this.h.ib(t))},t.na=function(t){this.W===t||this.l||(this.W=t,oa(this.b,this.W),this.dispatchEvent(new kc(this.ca())))},t.ca=function(){return this.W},t.Oc=function(){var t=l.navigator;this.na(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.qc=function(t){this.D.push(t),aa(this.b,p.SDK_VERSION?ir(p.SDK_VERSION,this.D):null),this.dispatchEvent(new Sc(this.D))},t.Ka=function(){return U(this.D)},t.toJSON=function(){return{apiKey:Oc(this).options.apiKey,authDomain:Oc(this).options.authDomain,appName:Oc(this).name,currentUser:Rc(this)&&Rc(this).C()}},t.qb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ga=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?v(this.Xb,this):null},t.Xb=function(t,e){var n=this;t={requestUri:t,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var r=null,i=null,o=va(n.b,t).then(function(t){return r=Vi(t),i=ui(t),t});return Mc(this,t=n.V.then(function(){return o}).then(function(t){return Pc(n,t)}).then(function(){return Ar({user:Rc(n),credential:r,additionalUserInfo:i,operationType:"signIn"})}))},t.Gc=function(e){if(!ur())return Ct(new Fr("operation-not-supported-in-this-environment"));var n=this,t=si(e.providerId),r=gr(),i=null;(!hr()||Zn())&&Oc(this).options.authDomain&&e.isOAuthProvider&&(i=ps(Oc(this).options.authDomain,Oc(this).options.apiKey,Oc(this).name,"signInViaPopup",e,null,r,p.SDK_VERSION||null));var o=zn(i,t&&t.Aa,t&&t.za);return Mc(this,t=Ac(this).then(function(t){return yu(t,o,"signInViaPopup",e,r,!!i)}).then(function(){return new ft(function(t,e){n.ga("signInViaPopup",null,new Fr("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=r,n.c=n.a.Da(n,"signInViaPopup",o,r)})}).then(function(t){return o&&Yn(o),t?Ar(t):null}).m(function(t){throw o&&Yn(o),t}))},t.Hc=function(t){if(!ur())return Ct(new Fr("operation-not-supported-in-this-environment"));var e=this;return Mc(this,Ac(this).then(function(){return Ec(t=e.h,function(){return t.b.set(mc,t.c.w,t.a)});var t}).then(function(){return e.a.Ba("signInViaRedirect",t)}))},t.da=function(){if(!ur())return Ct(new Fr("operation-not-supported-in-this-environment"));var t=this;return Mc(this,Ac(this).then(function(){return t.a.da()}).then(function(t){return t?Ar(t):null}))},t.kb=function(){var t=this;return Mc(this,this.j.then(function(){return Rc(t)?(Tc(t,null),wc(t.h).then(function(){Dc(t)})):wt()}))},t.Ic=function(){var r=this;return Cc(this.h,Oc(this).options.authDomain).then(function(t){if(!r.l){var e;if(e=Rc(r)&&t){e=Rc(r).uid;var n=t.uid;e=null!=e&&""!==e&&null!=n&&""!==n&&e==n}if(e)return nc(Rc(r),t),Rc(r).F();(Rc(r)||t)&&(Tc(r,t),t&&(Xu(t),t.fa=r.G),r.a&&r.a.subscribe(r),Dc(r))}})},t.ka=function(t){return bc(this.h,t)},t.Yb=function(){Dc(this),this.ka(Rc(this))},t.gc=function(){this.kb()},t.hc=function(){this.kb()},t.ic=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Rc(e))})},t.jc=function(t){var e,n,r=this;n=function(){t.next(Rc(r))},(e=this).I.push(n),Mc(e,e.j.then(function(){!e.l&&M(e.I,n)&&e.O!==e.getUid()&&(e.O=e.getUid(),n(Nc(e)))}))},t.sc=function(t,e,n){var r=this;return this.X&&p.Promise.resolve().then(function(){a(t)?t(Rc(r)):a(t.next)&&t.next(Rc(r))}),this.Ob(t,e,n)},t.rc=function(t,e,n){var r=this;return this.X&&p.Promise.resolve().then(function(){r.O=r.getUid(),a(t)?t(Rc(r)):a(t.next)&&t.next(Rc(r))}),this.Pb(t,e,n)},t.$b=function(t){var e=this;return Mc(this,this.j.then(function(){return Rc(e)?Rc(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Cc=function(t){return this.Hb(t).then(function(t){return t.user})},t.Hb=function(t){var n=this;return this.j.then(function(){return Ic(n,Xa(n.b,Ga,{token:t}))}).then(function(t){var e=t.user;return ec(e,"isAnonymous",!1),n.ka(e),t})},t.Ib=function(t,e){var n=this;return this.j.then(function(){return Ic(n,Xa(n.b,Ha,{email:t,password:e}))})},t.Dc=function(t,e){return this.Ib(t,e).then(function(t){return t.user})},t.Sb=function(t,e){return this.sb(t,e).then(function(t){return t.user})},t.sb=function(t,e){var n=this;return this.j.then(function(){return Ic(n,Xa(n.b,Ea,{email:t,password:e}))})},t.Bc=function(t){return this.Oa(t).then(function(t){return t.user})},t.Oa=function(t){var e=this;return this.j.then(function(){return Ic(e,t.xa(e.b))})},t.jb=function(){return this.Jb().then(function(t){return t.user})},t.Jb=function(){var n=this;return this.j.then(function(){var t=Rc(n);return t&&t.isAnonymous?Ar({user:t,credential:null,additionalUserInfo:Ar({providerId:null,isNewUser:!1}),operationType:"signIn"}):Ic(n,n.b.jb()).then(function(t){var e=t.user;return ec(e,"isAnonymous",!0),n.ka(e),t})})},t.getUid=function(){return Rc(this)&&Rc(this).uid||null},t.Qb=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&Rc(this)&&Hu(Rc(this))},t.zc=function(e){var n=this;R(this.o,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&Rc(this)&&Yu(Rc(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),Mc(this,this.j.then(function(){e.l||M(e.o,t)&&t(Nc(e))}))},t.removeAuthTokenListener=function(e){j(this.o,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(yc("local"),t.a,this.ia),this.a&&this.a.unsubscribe(this),p.Promise.resolve()},t.Vb=function(t){return Mc(this,Xa(this.b,xa,{identifier:t,continueUri:cr()?Bn():"http://localhost"}).then(function(t){return t.allProviders||[]}))},t.Wb=function(t){return Mc(this,Xa(this.b,xa,{identifier:t,continueUri:cr()?Bn():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.kc=function(t){return!!Mi(t)},t.hb=function(e,n){var r=this;return Mc(this,wt().then(function(){var t=new Br(n);if(!t.c)throw new Fr("argument-error",Hr+" must be true when sending sign in link to email");return Kr(t)}).then(function(t){return r.b.hb(e,t)}).then(function(){}))},t.Pc=function(t){return this.Ia(t).then(function(t){return t.data.email})},t.Wa=function(t,e){return Mc(this,this.b.Wa(t,e).then(function(){}))},t.Ia=function(t){return Mc(this,this.b.Ia(t).then(function(t){return new Tr(t)}))},t.Ua=function(t){return Mc(this,this.b.Ua(t).then(function(){}))},t.gb=function(e,t){var n=this;return Mc(this,wt().then(function(){return void 0===t||rt(t)?{}:Kr(new Br(t))}).then(function(t){return n.b.gb(e,t)}).then(function(){}))},t.Fc=function(t,e){return Mc(this,Tu(this,t,e,v(this.Oa,this)))},t.Ec=function(e,n){var r=this;return Mc(this,wt().then(function(){var t=Di(e,n||Bn());return r.Oa(t)}))};var jc="callback",Fc="expired-callback",Uc="sitekey",Vc="size";function Wc(t,e){for(var n=0;n<t.j.length;n++)try{t.j[n](e)}catch(t){}}function Bc(t,e){return t.g.push(e),e.ha(function(){L(t.g,e)}),e}function Gc(t){if(t.o)throw new Fr("internal-error","RecaptchaVerifier instance has been destroyed.")}(t=Lc.prototype).ya=function(){var e=this;return this.c?this.c:this.c=Bc(this,wt().then(function(){if(cr()&&!Kn())return Xn();throw new Fr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return i=Xc(),o=e.s(),new ft(function(t,e){var r=setTimeout(function(){e(new Fr("network-request-failed"))},zc.get());if(!l.grecaptcha||o!==i.c&&!i.b){l[i.a]=function(){if(l.grecaptcha){i.c=o;var n=l.grecaptcha.render;l.grecaptcha.render=function(t,e){return t=n(t,e),i.b++,t},clearTimeout(r),t()}else clearTimeout(r),e(new Fr("internal-error"));delete l[i.a]};var n=mn(Hc,{onload:i.a,hl:o||""});wt(Yo(n)).m(function(){clearTimeout(r),e(new Fr("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(r),t()});var i,o}).then(function(){return Xa(e.u,Da,{})}).then(function(t){e.a[Uc]=t.recaptchaSiteKey}).m(function(t){throw e.c=null,t}))},t.render=function(){Gc(this);var n=this;return Bc(this,this.ya().then(function(){if(null===n.b){var t=n.l;if(!n.h){var e=On(t);t=Dn("DIV"),e.appendChild(t)}n.b=grecaptcha.render(t,n.a)}return n.b}))},t.verify=function(){Gc(this);var i=this;return Bc(this,this.render().then(function(e){return new ft(function(n){var t=grecaptcha.getResponse(e);if(t)n(t);else{var r=function(t){var e;t&&(e=r,j(i.j,function(t){return t==e}),n(t))};i.j.push(r),i.h&&grecaptcha.execute(i.b)}})}))},t.reset=function(){Gc(this),null!==this.b&&grecaptcha.reset(this.b)},t.clear=function(){Gc(this),this.o=!0,Xc().b--;for(var t=0;t<this.g.length;t++)this.g[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=On(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}};var Hc=gn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}");function Yc(){this.b=l.grecaptcha?1/0:0,this.c=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var zc=new mr(3e4,6e4);var qc=null;function Xc(){return qc||(qc=new Yc),qc}function Qc(t,e,n){try{this.f=n||p.app()}catch(t){throw new Fr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.f.options||!this.f.options.apiKey)throw new Fr("invalid-api-key");n=this.f.options.apiKey;var r=this,i=null;try{i=this.f.auth().Ka()}catch(t){}i=p.SDK_VERSION?ir(p.SDK_VERSION,i):null,Lc.call(this,n,t,e,function(){try{var e=r.f.auth().ca()}catch(t){e=null}return e},i,$a(Ka))}function Zc(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Fr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Kc.length)throw new Fr("internal-error","Argument validator received an unsupported number of arguments.");n=Kc[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Fr("argument-error",t+" failed: "+r)}b(Qc,Lc);var Kc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Jc(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:c}}function $c(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:e}}function tl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function el(t,e){return{name:t||"",K:"a function",optional:!!e,M:a}}function nl(t,e){return{name:t||"",K:"null",optional:!!e,M:n}}function rl(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.xa||!e)}}}function il(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&c(t.type)&&a(t.verify))}}}function ol(e,n,t,r){return{name:t||"",K:e.K+" or "+n.K,optional:!!r,M:function(t){return e.M(t)||n.M(t)}}}function al(t,e){for(var n in e){var r=e[n].name;t[r]=ul(r,t[n],e[n].i)}}function sl(t,e,n,r){t[e]=ul(e,n,r)}function ul(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Zc(a,n,t),e.apply(this,t)}if(!n)return e;var i,o,a=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}al(xc.prototype,{Ua:{name:"applyActionCode",i:[Jc("code")]},Ia:{name:"checkActionCode",i:[Jc("code")]},Wa:{name:"confirmPasswordReset",i:[Jc("code"),Jc("newPassword")]},Sb:{name:"createUserWithEmailAndPassword",i:[Jc("email"),Jc("password")]},sb:{name:"createUserAndRetrieveDataWithEmailAndPassword",i:[Jc("email"),Jc("password")]},Vb:{name:"fetchProvidersForEmail",i:[Jc("email")]},Wb:{name:"fetchSignInMethodsForEmail",i:[Jc("email")]},da:{name:"getRedirectResult",i:[]},kc:{name:"isSignInWithEmailLink",i:[Jc("emailLink")]},rc:{name:"onAuthStateChanged",i:[ol(tl(),el(),"nextOrObserver"),el("opt_error",!0),el("opt_completed",!0)]},sc:{name:"onIdTokenChanged",i:[ol(tl(),el(),"nextOrObserver"),el("opt_error",!0),el("opt_completed",!0)]},gb:{name:"sendPasswordResetEmail",i:[Jc("email"),ol(tl("opt_actionCodeSettings",!0),nl(null,!0),"opt_actionCodeSettings",!0)]},hb:{name:"sendSignInLinkToEmail",i:[Jc("email"),tl("actionCodeSettings")]},ib:{name:"setPersistence",i:[Jc("persistence")]},Oa:{name:"signInAndRetrieveDataWithCredential",i:[rl()]},jb:{name:"signInAnonymously",i:[]},Jb:{name:"signInAnonymouslyAndRetrieveData",i:[]},Bc:{name:"signInWithCredential",i:[rl()]},Cc:{name:"signInWithCustomToken",i:[Jc("token")]},Hb:{name:"signInAndRetrieveDataWithCustomToken",i:[Jc("token")]},Dc:{name:"signInWithEmailAndPassword",i:[Jc("email"),Jc("password")]},Ec:{name:"signInWithEmailLink",i:[Jc("email"),Jc("emailLink",!0)]},Ib:{name:"signInAndRetrieveDataWithEmailAndPassword",i:[Jc("email"),Jc("password")]},Fc:{name:"signInWithPhoneNumber",i:[Jc("phoneNumber"),il()]},Gc:{name:"signInWithPopup",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Hc:{name:"signInWithRedirect",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},kb:{name:"signOut",i:[]},toJSON:{name:"toJSON",i:[Jc(null,!0)]},Oc:{name:"useDeviceLanguage",i:[]},Pc:{name:"verifyPasswordResetCode",i:[Jc("code")]}}),function(t,e){for(var n in e){var r=e[n].name;if(r!==n){var i=e[n].Rb;Object.defineProperty(t,r,{get:function(){return this[n]},set:function(t){Zc(r,[i],[t],!0),this[n]=t},enumerable:!0})}}}(xc.prototype,{lc:{name:"languageCode",Rb:ol(Jc(),nl(),"languageCode")}}),(xc.Persistence=Ls).LOCAL="local",xc.Persistence.SESSION="session",xc.Persistence.NONE="none",al(Uu.prototype,{delete:{name:"delete",i:[]},ac:{name:"getIdTokenResult",i:[$c()]},F:{name:"getIdToken",i:[$c()]},getToken:{name:"getToken",i:[$c()]},$a:{name:"linkAndRetrieveDataWithCredential",i:[rl()]},mc:{name:"linkWithCredential",i:[rl()]},nc:{name:"linkWithPhoneNumber",i:[Jc("phoneNumber"),il()]},oc:{name:"linkWithPopup",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},pc:{name:"linkWithRedirect",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bb:{name:"reauthenticateAndRetrieveDataWithCredential",i:[rl()]},vc:{name:"reauthenticateWithCredential",i:[rl()]},wc:{name:"reauthenticateWithPhoneNumber",i:[Jc("phoneNumber"),il()]},xc:{name:"reauthenticateWithPopup",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},yc:{name:"reauthenticateWithRedirect",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",i:[]},fb:{name:"sendEmailVerification",i:[ol(tl("opt_actionCodeSettings",!0),nl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",i:[Jc(null,!0)]},Mc:{name:"unlink",i:[Jc("provider")]},mb:{name:"updateEmail",i:[Jc("email")]},nb:{name:"updatePassword",i:[Jc("password")]},Nc:{name:"updatePhoneNumber",i:[rl("phone")]},ob:{name:"updateProfile",i:[tl("profile")]}}),al(ft.prototype,{ha:{name:"finally"},m:{name:"catch"},then:{name:"then"}}),al(Pu.prototype,{confirm:{name:"confirm",i:[Jc("verificationCode")]}}),sl(Ni,"credential",function(t,e){return new Ri(t,e)},[Jc("email"),Jc("password")]),al(xi.prototype,{ta:{name:"addScope",i:[Jc("scope")]},Ca:{name:"setCustomParameters",i:[tl("customOAuthParameters")]}}),sl(xi,"credential",ki,[ol(Jc(),tl(),"token")]),sl(Ni,"credentialWithLink",Di,[Jc("email"),Jc("emailLink")]),al(Si.prototype,{ta:{name:"addScope",i:[Jc("scope")]},Ca:{name:"setCustomParameters",i:[tl("customOAuthParameters")]}}),sl(Si,"credential",Ai,[ol(Jc(),tl(),"token")]),al(Pi.prototype,{ta:{name:"addScope",i:[Jc("scope")]},Ca:{name:"setCustomParameters",i:[tl("customOAuthParameters")]}}),sl(Pi,"credential",Ti,[ol(Jc(),ol(tl(),nl()),"idToken"),ol(Jc(),nl(),"accessToken",!0)]),al(Ii.prototype,{Ca:{name:"setCustomParameters",i:[tl("customOAuthParameters")]}}),sl(Ii,"credential",Oi,[ol(Jc(),tl(),"token"),Jc("secret",!0)]),al(Ei.prototype,{ta:{name:"addScope",i:[Jc("scope")]},credential:{name:"credential",i:[ol(Jc(),nl(),"idToken",!0),ol(Jc(),nl(),"accessToken",!0)]},Ca:{name:"setCustomParameters",i:[tl("customOAuthParameters")]}}),sl(Fi,"credential",Ui,[Jc("verificationId"),Jc("verificationCode")]),al(Fi.prototype,{Sa:{name:"verifyPhoneNumber",i:[Jc("phoneNumber"),il()]}}),al(Fr.prototype,{toJSON:{name:"toJSON",i:[Jc(null,!0)]}}),al(qi.prototype,{toJSON:{name:"toJSON",i:[Jc(null,!0)]}}),al(zi.prototype,{toJSON:{name:"toJSON",i:[Jc(null,!0)]}}),al(Qc.prototype,{clear:{name:"clear",i:[]},render:{name:"render",i:[]},verify:{name:"verify",i:[]}}),function(){if(void 0===p||!p.INTERNAL||!p.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:xc,Error:Fr};sl(t,"EmailAuthProvider",Ni,[]),sl(t,"FacebookAuthProvider",xi,[]),sl(t,"GithubAuthProvider",Si,[]),sl(t,"GoogleAuthProvider",Pi,[]),sl(t,"TwitterAuthProvider",Ii,[]),sl(t,"OAuthProvider",Ei,[Jc("providerId")]),sl(t,"PhoneAuthProvider",Fi,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof xc)}}]),sl(t,"RecaptchaVerifier",Qc,[ol(Jc(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),tl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof p.app.App)}}]),p.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:v((t=new xc(t)).getUid,t),getToken:v(t.$b,t),addAuthTokenListener:v(t.Qb,t),removeAuthTokenListener:v(t.zc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),p.INTERNAL.extendNamespace({User:Uu})}()}).call(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(e,cl(9))},function(t,e,n){t.exports=n(58)},function(vn,mn,yn){"use strict";(function(u){Object.defineProperty(mn,"__esModule",{value:!0});var t,e,b=yn(16),n=yn(59),a=yn(17),c=(t=yn(7))&&"object"==typeof t&&"default"in t?t.default:t,r=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),b.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:b.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),i=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return b.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),o=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new r(e)}}catch(t){}return new i},l=o("localStorage"),s=o("sessionStorage"),h=new n.Logger("@firebase/database"),v=(e=1,function(){return e++}),d=function(t){var e=b.stringToByteArray(t),n=new b.Sha1;n.update(e);var r=n.digest();return b.base64.encodeByteArray(r)},p=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&"object"==typeof t[r]&&"number"==typeof t[r].length?n+=p.apply(null,t[r]):"object"==typeof t[r]?n+=b.stringify(t[r]):n+=t[r],n+=" ";return n},f=null,g=!0,_=function(t,e){b.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(h.logLevel=n.LogLevel.VERBOSE,f=h.log.bind(h),e&&s.set("logging_enabled",!0)):"function"==typeof t?f=t:(f=null,s.remove("logging_enabled"))},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===g&&(g=!1,null===f&&!0===s.get("logging_enabled")&&_(!0)),f){var n=p.apply(null,t);f(n)}},y=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];m.apply(void 0,[n].concat(t))}},w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+p.apply(void 0,t);h.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+p.apply(void 0,t);throw h.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+p.apply(void 0,t);h.warn(n)},x=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",S="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===k||e===S)return-1;if(e===k||t===S)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},T=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+b.stringify(e))},I=function(t){if("object"!=typeof t||null===t)return b.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=b.stringify(e[i]),r+=":",r+=I(t[e[i]]);return r+="}"},O=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},R=function(t,n){if(Array.isArray(t))for(var e=0;e<t.length;++e)n(e,t[e]);else b.forEach(t,function(t,e){return n(e,t)})},N=function(t){b.assert(!x(t),"Invalid JSON number");var e,n,r,i,o,a,s;for(0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse(),s=a.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},D=new RegExp("^-?\\d{1,10}$"),M=function(t){if(D.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw E("Exception was thrown by user callback.",t),e},Math.floor(0))}},j=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},F=function(){function i(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(i,"Empty",{get:function(){return new i("")},enumerable:!0,configurable:!0}),i.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},i.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},i.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new i(this.pieces_,t)},i.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},i.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},i.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},i.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},i.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new i(t,0)},i.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof i)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new i(e,0)},i.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},i.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return i.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},i.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},i.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},i.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},i}(),U=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=b.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=b.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=b.stringLength(t),0<this.parts_.length&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),V="firebaseio.com",W="long_polling",B=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=l.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&l.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(b.assert("string"==typeof t,"typeof type must == string"),b.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==W)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return b.forEach(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var G,H,Y,z,q,X=function(t){var e=Q(t),n=e.subdomain;"firebase"===e.domain&&C(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new B(e.host,e.secure,n,r),path:new F(e.pathString)}},Q=function(t){var e="",n="",r="",i="",o=!0,a="https",s=443;if("string"==typeof t){var u=t.indexOf("//");0<=u&&(a=t.substring(0,u-1),t=t.substring(u+2));var c=t.indexOf("/");-1===c&&(c=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(c,l)),c<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(c,l)));var h=function(t){var e={};t.startsWith("?")&&(t=t.substring(1));for(var n=0,r=t.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):E("Invalid query segment '"+i+"' in query '"+t+"'")}}return e}(t.substring(Math.min(t.length,l)));0<=(u=e.indexOf(":"))?(o="https"===a||"wss"===a,s=parseInt(e.substring(u+1),10)):u=t.length;var d=e.split(".");3===d.length?(n=d[1],r=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,u).toLowerCase()&&(n="localhost"),""===r&&"ns"in h&&(r=h.ns)}return{host:e,port:s,domain:n,subdomain:r,secure:o,scheme:a,pathString:i}},Z=/[\[\].#$\/\u0000-\u001F\u007F]/,K=/[\[\].#$\u0000-\u001F\u007F]/,J=10485760,$=function(t){return"string"==typeof t&&0!==t.length&&!Z.test(t)},tt=function(t){return"string"==typeof t&&0!==t.length&&!K.test(t)},et=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!x(t)||t&&"object"==typeof t&&b.contains(t,".sv")},nt=function(t,e,n,r,i){i&&void 0===n||rt(b.errorPrefix(t,e,i),n,r)},rt=function(n,t,e){var r=e instanceof F?new U(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(x(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>J/3&&b.stringLength(t)>J)throw new Error(n+"contains a string greater than "+J+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(b.forEach(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!$(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),rt(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},it=function(t,e,n,r,i){if(!i||void 0!==n){var o=b.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];b.forEach(n,function(t,e){var n=new F(t);if(rt(o,e,r.child(n)),".priority"===n.getBack()&&!et(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!$(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(F.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},ot=function(t,e,n,r){if(!r||void 0!==n){if(x(n))throw new Error(b.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!et(n))throw new Error(b.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},at=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(b.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},st=function(t,e,n,r){if(!(r&&void 0===n||$(n)))throw new Error(b.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ut=function(t,e,n,r){if(!(r&&void 0===n||tt(n)))throw new Error(b.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ct=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},lt=function(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!$(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&((r=i)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),!tt(r)))throw new Error(b.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ht=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){b.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),b.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new b.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){b.validateArgCount("OnDisconnect.remove",0,1,arguments.length),ct("OnDisconnect.remove",this.path_),b.validateCallback("OnDisconnect.remove",1,t,!0);var e=new b.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){b.validateArgCount("OnDisconnect.set",1,2,arguments.length),ct("OnDisconnect.set",this.path_),nt("OnDisconnect.set",1,t,this.path_,!1),b.validateCallback("OnDisconnect.set",2,e,!0);var n=new b.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){b.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),ct("OnDisconnect.setWithPriority",this.path_),nt("OnDisconnect.setWithPriority",1,t,this.path_,!1),ot("OnDisconnect.setWithPriority",2,e,!1),b.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new b.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(b.validateArgCount("OnDisconnect.update",1,2,arguments.length),ct("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}it("OnDisconnect.update",1,t,this.path_,!1),b.validateCallback("OnDisconnect.update",2,e,!0);var i=new b.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),dt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return b.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),pt=(G="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",H=0,Y=[],function(t){var e,n=t===H;H=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=G.charAt(t%64),t=Math.floor(t/64);b.assert(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===Y[e];e--)Y[e]=0;Y[e]++}else for(e=0;e<12;e++)Y[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=G.charAt(Y[e]);return b.assert(20===i.length,"nextPushId: Length should be 20."),i}),ft=function(){function n(t,e){this.name=t,this.node=e}return n.Wrap=function(t,e){return new n(t,e)},n}(),gt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new ft(k,t),r=new ft(k,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return ft.MIN},t}(),_t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return z},set:function(t){z=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw b.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return ft.MIN},e.prototype.maxPost=function(){return new ft(S,z)},e.prototype.makePost=function(t,e){return b.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new ft(t,z)},e.prototype.toString=function(){return".key"},e}(gt),vt=new _t;var mt,yt,bt,wt=function(t){return"number"==typeof t?"number:"+N(t):"string:"+t},Ct=function(t){if(t.isLeafNode()){var e=t.val();b.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&b.contains(e,".sv"),"Priority must be a string or number.")}else b.assert(t===q||t.isEmpty(),"priority of unexpected type.");b.assert(t===q||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Et=function(){function o(t,e){void 0===e&&(e=o.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,b.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ct(this.priorityNode_)}return Object.defineProperty(o,"__childrenNodeConstructor",{get:function(){return mt},set:function(t){mt=t},enumerable:!0,configurable:!0}),o.prototype.isLeafNode=function(){return!0},o.prototype.getPriority=function(){return this.priorityNode_},o.prototype.updatePriority=function(t){return new o(this.value_,t)},o.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.hasChild=function(){return!1},o.prototype.getPredecessorChildName=function(t,e){return null},o.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:o.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},o.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(b.assert(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,o.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},o.prototype.isEmpty=function(){return!1},o.prototype.numChildren=function(){return 0},o.prototype.forEachChild=function(t,e){return!1},o.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},o.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+wt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?N(this.value_):this.value_,this.lazyHash_=d(t)}return this.lazyHash_},o.prototype.getValue=function(){return this.value_},o.prototype.compareTo=function(t){return t===o.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof o.__childrenNodeConstructor?-1:(b.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},o.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=o.VALUE_TYPE_ORDER.indexOf(e),i=o.VALUE_TYPE_ORDER.indexOf(n);return b.assert(0<=r,"Unknown leaf type: "+e),b.assert(0<=i,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},o.prototype.withIndex=function(){return this},o.prototype.isIndexed=function(){return!0},o.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},o.VALUE_TYPE_ORDER=["object","boolean","number","string"],o}();var xt,kt,St=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return ft.MIN},e.prototype.maxPost=function(){return new ft(S,new Et("[PRIORITY-POST]",bt))},e.prototype.makePost=function(t,e){var n=yt(t);return new ft(e,new Et("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(gt)),At=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return 0<this.nodeStack_.length},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Pt=function(){function o(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:o.RED,this.left=null!=r?r:It.EMPTY_NODE,this.right=null!=i?i:It.EMPTY_NODE}return o.prototype.copy=function(t,e,n,r,i){return new o(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},o.prototype.count=function(){return this.left.count()+1+this.right.count()},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},o.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},o.prototype.minKey=function(){return this.min_().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(t,e,n){var r,i;return(i=(r=n(t,(i=this).key))<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},o.prototype.removeMin_=function(){if(this.left.isEmpty())return It.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},o.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return It.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},o.prototype.isRed_=function(){return this.color},o.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},o.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},o.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},o.prototype.rotateLeft_=function(){var t=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},o.prototype.rotateRight_=function(){var t=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},o.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},o.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},o.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},o.RED=!0,o.BLACK=!1,o}(),Tt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Pt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),It=function(){function n(t,e){void 0===e&&(e=n.EMPTY_NODE),this.comparator_=t,this.root_=e}return n.prototype.insert=function(t,e){return new n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Pt.BLACK,null,null))},n.prototype.remove=function(t){return new n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Pt.BLACK,null,null))},n.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},n.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},n.prototype.isEmpty=function(){return this.root_.isEmpty()},n.prototype.count=function(){return this.root_.count()},n.prototype.minKey=function(){return this.root_.minKey()},n.prototype.maxKey=function(){return this.root_.maxKey()},n.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},n.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},n.prototype.getIterator=function(t){return new At(this.root_,null,this.comparator_,!1,t)},n.prototype.getIteratorFrom=function(t,e){return new At(this.root_,t,this.comparator_,!1,e)},n.prototype.getReverseIteratorFrom=function(t,e){return new At(this.root_,t,this.comparator_,!0,e)},n.prototype.getReverseIterator=function(t){return new At(this.root_,null,this.comparator_,!0,t)},n.EMPTY_NODE=new Tt,n}(),Ot=Math.log(2),Rt=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Ot,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Nt=function(c,t,l,e){c.sort(t);var h=function(t,e){var n,r,i=e-t;if(0==i)return null;if(1==i)return n=c[t],r=l?l(n):n,new Pt(r,n.node,Pt.BLACK,null,null);var o=parseInt(i/2,10)+t,a=h(t,o),s=h(o+1,e);return n=c[o],r=l?l(n):n,new Pt(r,n.node,Pt.BLACK,a,s)},n=function(t){for(var e=null,n=null,s=c.length,r=function(t,e){var n=s-t,r=s;s-=t;var i=h(n+1,r),o=c[n],a=l?l(o):o;u(new Pt(a,o.node,e,null,i))},u=function(t){e?(e.left=t,e=t):e=n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),a=Math.pow(2,t.count-(i+1));o?r(a,Pt.BLACK):(r(a,Pt.BLACK),r(a,Pt.RED))}return n}(new Rt(c.length));return new It(e||t,n)},Dt={},Mt=function(){function h(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(h,"Default",{get:function(){return b.assert(St,"ChildrenNode.ts has not been loaded"),xt=xt||new h({".priority":Dt},{".priority":St})},enumerable:!0,configurable:!0}),h.prototype.get=function(t){var e=b.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===Dt?null:e},h.prototype.hasIndex=function(t){return b.contains(this.indexSet_,t.toString())},h.prototype.addIndex=function(t,e){b.assert(t!==vt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(ft.Wrap),a=o.getNext();a;)i=i||t.isDefinedOn(a.node),r.push(a),a=o.getNext();n=i?Nt(r,t.getCompare()):Dt;var s=t.toString(),u=b.clone(this.indexSet_);u[s]=t;var c=b.clone(this.indexes_);return c[s]=n,new h(c,u)},h.prototype.addToIndexes=function(u,c){var l=this;return new h(b.map(this.indexes_,function(t,e){var n=b.safeGet(l.indexSet_,e);if(b.assert(n,"Missing index implementation for "+e),t===Dt){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(ft.Wrap),o=i.getNext();o;)o.name!=u.name&&r.push(o),o=i.getNext();return r.push(u),Nt(r,n.getCompare())}return Dt}var a=c.get(u.name),s=t;return a&&(s=s.remove(new ft(u.name,a))),s.insert(u,u.node)}),this.indexSet_)},h.prototype.removeFromIndexes=function(n,r){return new h(b.map(this.indexes_,function(t){if(t===Dt)return t;var e=r.get(n.name);return e?t.remove(new ft(n.name,e)):t}),this.indexSet_)},h}();function Lt(t,e){return A(t.name,e.name)}function jt(t,e){return A(t,e)}var Ft=function(){function s(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ct(this.priorityNode_),this.children_.isEmpty()&&b.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(s,"EMPTY_NODE",{get:function(){return kt||(kt=new s(new It(jt),null,Mt.Default))},enumerable:!0,configurable:!0}),s.prototype.isLeafNode=function(){return!1},s.prototype.getPriority=function(){return this.priorityNode_||kt},s.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new s(this.children_,t,this.indexMap_)},s.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?kt:e},s.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},s.prototype.hasChild=function(t){return null!==this.children_.get(t)},s.prototype.updateImmediateChild=function(t,e){if(b.assert(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new ft(t,e),r=void 0,i=void 0;return e.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),i=this.indexMap_.addToIndexes(n,this.children_)),new s(r,r.isEmpty()?kt:this.priorityNode_,i)},s.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;b.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},s.prototype.isEmpty=function(){return this.children_.isEmpty()},s.prototype.numChildren=function(){return this.children_.count()},s.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,a=!0;if(this.forEachChild(St,function(t,e){r[t]=e.val(n),i++,a&&s.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):a=!1}),!n&&a&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},s.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+wt(this.getPriority().val())+":"),this.forEachChild(St,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":d(r)}return this.lazyHash_},s.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ft(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},s.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},s.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new ft(e,this.children_.get(e)):null},s.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},s.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new ft(e,this.children_.get(e)):null},s.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},s.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},s.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,ft.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},s.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},s.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,ft.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},s.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ut?-1:0},s.prototype.withIndex=function(t){if(t===vt||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new s(this.children_,this.priorityNode_,e)},s.prototype.isIndexed=function(t){return t===vt||this.indexMap_.hasIndex(t)},s.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(St),r=e.getIterator(St),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},s.prototype.resolveIndex_=function(t){return t===vt?null:this.indexMap_.get(t.toString())},s.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,s}(),Ut=new(function(t){function e(){return t.call(this,new It(jt),Ft.EMPTY_NODE,Mt.Default)||this}return a.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ft.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ft));Object.defineProperties(ft,{MIN:{value:new ft(k,Ft.EMPTY_NODE)},MAX:{value:new ft(S,Ut)}}),_t.__EMPTY_NODE=Ft.EMPTY_NODE,Et.__childrenNodeConstructor=Ft,q=Ut,bt=Ut;var Vt=!0;function Wt(t,e){if(void 0===e&&(e=null),null===t)return Ft.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),b.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Et(t,Wt(e));if(t instanceof Array||!Vt){var r=Ft.EMPTY_NODE,i=t;return b.forEach(i,function(t,e){if(b.contains(i,t)&&"."!==t.substring(0,1)){var n=Wt(e);!n.isLeafNode()&&n.isEmpty()||(r=r.updateImmediateChild(t,n))}}),r.updatePriority(Wt(e))}var o=[],a=!1,s=t;if(b.forEach(s,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=Wt(s[t]);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),o.push(new ft(t,n)))}}),0==o.length)return Ft.EMPTY_NODE;var n=Nt(o,Lt,function(t){return t.name},jt);if(a){var u=Nt(o,St.getCompare());return new Ft(n,Wt(e),new Mt({".priority":u},{".priority":St}))}return new Ft(n,Wt(e),Mt.Default)}yt=Wt;var Bt,Gt,Ht,Yt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return ft.MIN},e.prototype.maxPost=function(){return ft.MAX},e.prototype.makePost=function(t,e){var n=Wt(t);return new ft(e,n)},e.prototype.toString=function(){return".value"},e}(gt)),zt=function(n){function t(t){var e=n.call(this)||this;return e.indexPath_=t,b.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}return a.__extends(t,n),t.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},t.prototype.makePost=function(t,e){var n=Wt(t),r=Ft.EMPTY_NODE.updateChild(this.indexPath_,n);return new ft(e,r)},t.prototype.maxPost=function(){var t=Ft.EMPTY_NODE.updateChild(this.indexPath_,Ut);return new ft(S,t)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(gt),qt=function(){function i(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return i.prototype.val=function(){return b.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},i.prototype.exportVal=function(){return b.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},i.prototype.toJSON=function(){return b.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},i.prototype.exists=function(){return b.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},i.prototype.child=function(t){b.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),ut("DataSnapshot.child",1,t,!1);var e=new F(t),n=this.ref_.child(e);return new i(this.node_.getChild(e),n,St)},i.prototype.hasChild=function(t){b.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),ut("DataSnapshot.hasChild",1,t,!1);var e=new F(t);return!this.node_.getChild(e).isEmpty()},i.prototype.getPriority=function(){return b.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},i.prototype.forEach=function(n){var r=this;return b.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),b.validateCallback("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new i(e,r.ref_.child(t),St))})},i.prototype.hasChildren=function(){return b.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(i.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),i.prototype.numChildren=function(){return b.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},i.prototype.getRef=function(){return b.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(i.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),i}(),Xt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+b.stringify(this.snapshot.exportVal())},t}(),Qt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Zt=function(){function e(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return e.prototype.respondsTo=function(t){return"value"===t},e.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Xt("value",this,new qt(t.snapshotNode,e.getRef(),n))},e.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){b.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},e.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Qt(this,t,e):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Kt=function(){function i(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return i.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,b.contains(this.callbacks_,e)},i.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Qt(this,t,e):null},i.prototype.createEvent=function(t,e){b.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Xt(t.type,this,new qt(t.snapshotNode,n,r),t.prevName)},i.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){b.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},i.prototype.matches=function(n){if(n instanceof i){if(!this.callbacks_||!n.callbacks_)return!0;if(this.context_===n.context_){var t=b.getCount(n.callbacks_);if(t===b.getCount(this.callbacks_)){if(1===t){var e=b.getAnyKey(n.callbacks_),r=b.getAnyKey(this.callbacks_);return!(r!==e||n.callbacks_[e]&&this.callbacks_[r]&&n.callbacks_[e]!==this.callbacks_[r])}return b.every(this.callbacks_,function(t,e){return n.callbacks_[t]===e})}}}return!1},i.prototype.hasAnyCallback=function(){return null!==this.callbacks_},i}(),Jt=function(){function c(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(c,"__referenceConstructor",{get:function(){return b.assert(Bt,"Reference.ts has not been loaded"),Bt},set:function(t){Bt=t},enumerable:!0,configurable:!0}),c.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===vt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=k)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!=S)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===St){if(null!=e&&!et(e)||null!=n&&!et(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(b.assert(t.getIndex()instanceof zt||t.getIndex()===Yt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},c.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},c.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},c.prototype.getQueryParams=function(){return this.queryParams_},c.prototype.getRef=function(){return b.validateArgCount("Query.ref",0,0,arguments.length),new c.__referenceConstructor(this.repo,this.path)},c.prototype.on=function(t,e,n,r){b.validateArgCount("Query.on",2,4,arguments.length),at("Query.on",1,t,!1),b.validateCallback("Query.on",2,e,!1);var i=c.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},c.prototype.onValueEvent=function(t,e,n){var r=new Zt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},c.prototype.onChildEvent=function(t,e,n){var r=new Kt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},c.prototype.off=function(t,e,n){b.validateArgCount("Query.off",0,3,arguments.length),at("Query.off",1,t,!0),b.validateCallback("Query.off",2,e,!0),b.validateContextObject("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Zt(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Kt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},c.prototype.once=function(e,n,t,r){var i=this;b.validateArgCount("Query.once",1,4,arguments.length),at("Query.once",1,e,!1),b.validateCallback("Query.once",2,n,!0);var o=c.getCancelAndContextArgs_("Query.once",t,r),a=!0,s=new b.Deferred;s.promise.catch(function(){});var u=function(t){a&&(a=!1,i.off(e,u),n&&n.bind(o.context)(t),s.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),s.reject(t)}),s.promise},c.prototype.limitToFirst=function(t){if(b.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new c(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},c.prototype.limitToLast=function(t){if(b.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new c(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},c.prototype.orderByChild=function(t){if(b.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ut("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new F(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new zt(e),r=this.queryParams_.orderBy(n);return c.validateQueryEndpoints_(r),new c(this.repo,this.path,r,!0)},c.prototype.orderByKey=function(){b.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(vt);return c.validateQueryEndpoints_(t),new c(this.repo,this.path,t,!0)},c.prototype.orderByPriority=function(){b.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(St);return c.validateQueryEndpoints_(t),new c(this.repo,this.path,t,!0)},c.prototype.orderByValue=function(){b.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Yt);return c.validateQueryEndpoints_(t),new c(this.repo,this.path,t,!0)},c.prototype.startAt=function(t,e){void 0===t&&(t=null),b.validateArgCount("Query.startAt",0,2,arguments.length),nt("Query.startAt",1,t,this.path,!0),st("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(c.validateLimit_(n),c.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new c(this.repo,this.path,n,this.orderByCalled_)},c.prototype.endAt=function(t,e){void 0===t&&(t=null),b.validateArgCount("Query.endAt",0,2,arguments.length),nt("Query.endAt",1,t,this.path,!0),st("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(c.validateLimit_(n),c.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new c(this.repo,this.path,n,this.orderByCalled_)},c.prototype.equalTo=function(t,e){if(b.validateArgCount("Query.equalTo",1,2,arguments.length),nt("Query.equalTo",1,t,this.path,!1),st("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},c.prototype.toString=function(){return b.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},c.prototype.toJSON=function(){return b.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},c.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},c.prototype.queryIdentifier=function(){var t=this.queryObject(),e=I(t);return"{}"===e?"default":e},c.prototype.isEqual=function(t){if(b.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof c)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},c.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,b.validateCallback(t,3,r.cancel,!0),r.context=n,b.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(b.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(c.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),c}(),$t=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return b.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return b.isEmpty(this.set)},t.prototype.count=function(){return b.getCount(this.set)},t.prototype.each=function(n){b.forEach(this.set,function(t,e){return n(t,e)})},t.prototype.keys=function(){var e=[];return b.forEach(this.set,function(t){e.push(t)}),e},t}(),te=function(){function i(){this.value_=null,this.children_=null}return i.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();return t=t.popFront(),this.children_.contains(e)?this.children_.get(e).find(t):null},i.prototype.remember=function(t,e){if(t.isEmpty())this.value_=e,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(t,e);else{null==this.children_&&(this.children_=new $t);var n=t.getFront();this.children_.contains(n)||this.children_.add(n,new i);var r=this.children_.get(n);t=t.popFront(),r.remember(t,e)}},i.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,!(this.children_=null);if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(St,function(t,e){n.remember(new F(t),e)}),this.forget(t)}if(null!==this.children_){var r=t.getFront();if(t=t.popFront(),this.children_.contains(r))this.children_.get(r).forget(t)&&this.children_.remove(r);return!!this.children_.isEmpty()&&!(this.children_=null)}return!0},i.prototype.forEachTree=function(r,i){null!==this.value_?i(r,this.value_):this.forEachChild(function(t,e){var n=new F(r.toString()+"/"+t);e.forEachTree(n,i)})},i.prototype.forEachChild=function(n){null!==this.children_&&this.children_.each(function(t,e){n(t,e)})},i}(),ee=function(t,e){return t&&"object"==typeof t?(b.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},ne=function(t,r){var i,e=t.getPriority().val(),n=ee(e,r);if(t.isLeafNode()){var o=t,a=ee(o.getValue(),r);return a!==o.getValue()||n!==o.getPriority().val()?new Et(a,Wt(n)):t}var s=t;return n!==(i=s).getPriority().val()&&(i=i.updatePriority(new Et(n))),s.forEachChild(St,function(t,e){var n=ne(e,r);n!==e&&(i=i.updateImmediateChild(t,n))}),i};(Ht=Gt||(Gt={}))[Ht.OVERWRITE=0]="OVERWRITE",Ht[Ht.MERGE=1]="MERGE",Ht[Ht.ACK_USER_WRITE=2]="ACK_USER_WRITE",Ht[Ht.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var re,ie,oe=function(){function e(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,b.assert(!r||e,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),ae=function(){function n(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Gt.ACK_USER_WRITE,this.source=oe.User}return n.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return b.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new F(t));return new n(F.Empty,e,this.revert)}return b.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new n(this.path.popFront(),this.affectedTree,this.revert)},n}(),se=function(){function o(t,e){void 0===e&&(re||(re=new It(P)),e=re),this.value=t,this.children=e}return o.fromObject=function(t){var n=o.Empty;return b.forEach(t,function(t,e){n=n.set(new F(t),e)}),n},o.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},o.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:F.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new F(n).child(i.path),value:i.value}:null}return null},o.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},o.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):o.Empty},o.prototype.set=function(t,e){if(t.isEmpty())return new o(e,this.children);var n=t.getFront(),r=(this.children.get(n)||o.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new o(this.value,i)},o.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?o.Empty:new o(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?o.Empty:new o(this.value,i)}return this},o.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},o.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||o.Empty).setTree(t.popFront(),e),i=void 0;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new o(this.value,i)},o.prototype.fold=function(t){return this.fold_(F.Empty,t)},o.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},o.prototype.findOnPath=function(t,e){return this.findOnPath_(t,F.Empty,e)},o.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},o.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,F.Empty,e)},o.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):o.Empty},o.prototype.foreach=function(t){this.foreach_(F.Empty,t)},o.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},o.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},o.Empty=new o(null),o}(),ue=function(){function e(t,e){this.source=t,this.path=e,this.type=Gt.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,F.Empty):new e(this.source,this.path.popFront())},e}(),ce=function(){function e(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Gt.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,F.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),le=function(){function n(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Gt.MERGE}return n.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new F(t));return e.isEmpty()?null:e.value?new ce(this.source,F.Empty,e.value):new n(this.source,F.Empty,e)}return b.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,this.path.popFront(),this.children)},n.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},n}(),he=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),de=function(){function r(t,e){this.eventCache_=t,this.serverCache_=e}return r.prototype.updateEventSnap=function(t,e,n){return new r(new he(t,e,n),this.serverCache_)},r.prototype.updateServerSnap=function(t,e,n){return new r(this.eventCache_,new he(t,e,n))},r.prototype.getEventCache=function(){return this.eventCache_},r.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},r.prototype.getServerCache=function(){return this.serverCache_},r.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},r.Empty=new r(new he(Ft.EMPTY_NODE,!1,!1),new he(Ft.EMPTY_NODE,!1,!1)),r}(),pe=function(){function r(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return r.valueChange=function(t){return new r(r.VALUE,t)},r.childAddedChange=function(t,e){return new r(r.CHILD_ADDED,e,t)},r.childRemovedChange=function(t,e){return new r(r.CHILD_REMOVED,e,t)},r.childChangedChange=function(t,e,n){return new r(r.CHILD_CHANGED,e,t,n)},r.childMovedChange=function(t,e){return new r(r.CHILD_MOVED,e,t)},r.CHILD_ADDED="child_added",r.CHILD_REMOVED="child_removed",r.CHILD_CHANGED="child_changed",r.CHILD_MOVED="child_moved",r.VALUE="value",r}(),fe=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){b.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(pe.childRemovedChange(e,a)):b.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(pe.childAddedChange(e,n)):o.trackChildChange(pe.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(St,function(t,e){n.hasChild(t)||i.trackChildChange(pe.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(St,function(t,e){if(r.hasChild(t)){var n=r.getImmediateChild(t);n.equals(e)||i.trackChildChange(pe.childChangedChange(t,e,n))}else i.trackChildChange(pe.childAddedChange(t,e))})),n.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ft.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ge=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;b.assert(e==pe.CHILD_ADDED||e==pe.CHILD_CHANGED||e==pe.CHILD_REMOVED,"Only child changes supported for tracking"),b.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=b.safeGet(this.changeMap_,n);if(r){var i=r.type;if(e==pe.CHILD_ADDED&&i==pe.CHILD_REMOVED)this.changeMap_[n]=pe.childChangedChange(n,t.snapshotNode,r.snapshotNode);else if(e==pe.CHILD_REMOVED&&i==pe.CHILD_ADDED)delete this.changeMap_[n];else if(e==pe.CHILD_REMOVED&&i==pe.CHILD_CHANGED)this.changeMap_[n]=pe.childRemovedChange(n,r.oldSnap);else if(e==pe.CHILD_CHANGED&&i==pe.CHILD_ADDED)this.changeMap_[n]=pe.childAddedChange(n,t.snapshotNode);else{if(e!=pe.CHILD_CHANGED||i!=pe.CHILD_CHANGED)throw b.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap_[n]=pe.childChangedChange(n,t.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return b.getValues(this.changeMap_)},t}(),_e=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),ve=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new he(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),me=function(t,e){this.viewCache=t,this.changes=e},ye=function(){function h(t){this.filter_=t}return h.prototype.assertIndexed=function(t){b.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),b.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},h.prototype.applyOperation=function(t,e,n,r){var i,o,a=new ge;if(e.type===Gt.OVERWRITE){var s=e;s.source.fromUser?i=this.applyUserOverwrite_(t,s.path,s.snap,n,r,a):(b.assert(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.getServerCache().isFiltered()&&!s.path.isEmpty(),i=this.applyServerOverwrite_(t,s.path,s.snap,n,r,o,a))}else if(e.type===Gt.MERGE){var u=e;u.source.fromUser?i=this.applyUserMerge_(t,u.path,u.children,n,r,a):(b.assert(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.getServerCache().isFiltered(),i=this.applyServerMerge_(t,u.path,u.children,n,r,o,a))}else if(e.type===Gt.ACK_USER_WRITE){var c=e;i=c.revert?this.revertUserWrite_(t,c.path,n,r,a):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,a)}else{if(e.type!==Gt.LISTEN_COMPLETE)throw b.assertionError("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,a)}var l=a.getChanges();return h.maybeAddValueEvent_(t,i,l),new me(i,l)},h.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe.valueChange(e.getCompleteEventSnap()))}},h.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(b.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof Ft?u:Ft.EMPTY_NODE,l=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var d=e.getFront();if(".priority"==d){b.assert(1==e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=t.getServerCache().getNode();var f=n.calcEventCacheAfterServerOverwrite(e,p,s);a=null!=f?this.filter_.updatePriority(p,f):o.getNode()}else{var g=e.popFront(),_=void 0;if(o.isCompleteForChild(d)){s=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);_=null!=v?o.getNode().getImmediateChild(d).updateChild(g,v):o.getNode().getImmediateChild(d)}else _=n.calcCompleteChild(d,t.getServerCache());a=null!=_?this.filter_.updateChild(o.getNode(),d,_,g,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},h.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&1<e.getLength())return t;var d=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(d,n);s=".priority"==h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,d,_e,null)}var f=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new ve(r,f,i);return this.generateEventCacheAfterServerEvent_(f,e,r,g,a)},h.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new ve(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),d=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var f=c.getCompleteChild(l);p=null!=f?".priority"===h.getBack()&&f.getChild(h.parent()).isEmpty()?f:f.updateChild(h,n):Ft.EMPTY_NODE}if(d.equals(p))a=t;else{var g=this.filter_.updateChild(u.getNode(),l,p,h,c,o);a=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},h.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},h.prototype.applyUserMerge_=function(r,i,t,o,a,s){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);h.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,a,s))}),t.foreach(function(t,e){var n=i.child(t);h.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,a,s))}),c},h.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},h.prototype.applyServerMerge_=function(o,t,e,a,s,u,c){var l=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,h=o;n=t.isEmpty()?e:se.Empty.setTree(t,e);var d=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){if(d.hasChild(t)){var n=o.getServerCache().getNode().getImmediateChild(t),r=l.applyMerge_(n,e);h=l.applyServerOverwrite_(h,new F(t),r,a,s,u,c)}}),n.children.inorderTraversal(function(t,e){var n=!o.getServerCache().isCompleteForChild(t)&&null==e.value;if(!d.hasChild(t)&&!n){var r=o.getServerCache().getNode().getImmediateChild(t),i=l.applyMerge_(r,e);h=l.applyServerOverwrite_(h,new F(t),i,a,s,u,c)}}),h},h.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,s.getNode().getChild(r),n,i,a,o);if(r.isEmpty()){var u=se.Empty;return s.getNode().forEachChild(vt,function(t,e){u=u.set(new F(t),e)}),this.applyServerMerge_(t,r,u,n,i,a,o)}return t}var c=se.Empty;return e.foreach(function(t,e){var n=r.child(t);s.isCompleteForPath(n)&&(c=c.set(t,s.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,a,o)},h.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,_e,r)},h.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new ve(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();b.assert(l instanceof Ft,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var h=e.getFront(),d=n.calcCompleteChild(h,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(h)&&(d=s.getImmediateChild(h)),(u=null!=d?this.filter_.updateChild(s,h,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,Ft.EMPTY_NODE,e.popFront(),a,i):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(F.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},h}(),be=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===pe.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(pe.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,pe.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,pe.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,pe.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,pe.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,pe.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(r,e,t,i,o){var a=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=a.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,a.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw b.assertionError("Should only compare child_ events.");var n=new ft(t.childName,t.snapshotNode),r=new ft(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),we=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new fe(n.getIndex()),i=n.getNodeFilter();this.processor_=new ye(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(Ft.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ft.EMPTY_NODE,a.getNode(),null),c=new he(s,o.isFullyInitialized(),r.filtersNodes()),l=new he(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new de(l,c),this.eventGenerator_=new be(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,n){var r=[];if(n){b.assert(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){n=n;var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(a)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return r},t.prototype.applyOperation=function(t,e,n){t.type===Gt.MERGE&&null!==t.source.queryId&&(b.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),b.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),b.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(St,function(t,e){n.push(pe.childAddedChange(t,e))});return e.isFullyInitialized()&&n.push(pe.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Ce=function(){function c(){this.views_={}}return Object.defineProperty(c,"__referenceConstructor",{get:function(){return b.assert(ie,"Reference.ts has not been loaded"),ie},set:function(t){b.assert(!ie,"__referenceConstructor has already been defined"),ie=t},enumerable:!0,configurable:!0}),c.prototype.isEmpty=function(){return b.isEmpty(this.views_)},c.prototype.applyOperation=function(n,r,i){var t=n.source.queryId;if(null!==t){var e=b.safeGet(this.views_,t);return b.assert(null!=e,"SyncTree gave us an op for an invalid query."),e.applyOperation(n,r,i)}var o=[];return b.forEach(this.views_,function(t,e){o=o.concat(e.applyOperation(n,r,i))}),o},c.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=b.safeGet(this.views_,o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:(s=r instanceof Ft?n.calcCompleteEventChildren(r):Ft.EMPTY_NODE,u=!1);var c=new de(new he(s,u,!1),new he(r,i,!1));a=new we(t,c),this.views_[o]=a}return a.addEventRegistration(e),a.getInitialEvents(e)},c.prototype.removeEventRegistration=function(t,n,r){var e=t.queryIdentifier(),i=[],o=[],a=this.hasCompleteView();if("default"===e){var s=this;b.forEach(this.views_,function(t,e){o=o.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete s.views_[t],e.getQuery().getQueryParams().loadsAllData()||i.push(e.getQuery()))})}else{var u=b.safeGet(this.views_,e);u&&(o=o.concat(u.removeEventRegistration(n,r)),u.isEmpty()&&(delete this.views_[e],u.getQuery().getQueryParams().loadsAllData()||i.push(u.getQuery())))}return a&&!this.hasCompleteView()&&i.push(new c.__referenceConstructor(t.repo,t.path)),{removed:i,events:o}},c.prototype.getQueryViews=function(){var e=this;return Object.keys(this.views_).map(function(t){return e.views_[t]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},c.prototype.getCompleteServerCache=function(n){var r=null;return b.forEach(this.views_,function(t,e){r=r||e.getCompleteServerCache(n)}),r},c.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return b.safeGet(this.views_,e)},c.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},c.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},c.prototype.getCompleteView=function(){return b.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()})||null},c}(),Ee=function(){function s(t){this.writeTree_=t}return s.prototype.addWrite=function(t,e){if(t.isEmpty())return new s(new se(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=F.relativePath(r,t);return i=i.updateChild(o,e),new s(this.writeTree_.set(r,i))}var a=new se(e);return new s(this.writeTree_.setTree(t,a))},s.prototype.addWrites=function(n,t){var r=this;return b.forEach(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},s.prototype.removeWrite=function(t){return t.isEmpty()?s.Empty:new s(this.writeTree_.setTree(t,se.Empty))},s.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},s.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(F.relativePath(e.path,t)):null},s.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(St,function(t,e){n.push(new ft(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new ft(t,e.value))}),n},s.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new s(null!=e?new se(e):this.writeTree_.subtree(t))},s.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},s.prototype.apply=function(t){return s.applySubtreeWrite_(F.Empty,this.writeTree_,t)},s.Empty=new s(new se(null)),s.applySubtreeWrite_=function(n,t,r){if(null!=t.value)return r.updateChild(n,t.value);var i=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(b.assert(null!==e.value,"Priority writes must always be leaf nodes"),i=e.value):r=s.applySubtreeWrite_(n.child(t),e,r)}),r.getChild(n).isEmpty()||null===i||(r=r.updateChild(n.child(".priority"),i)),r},s}(),xe=function(){function c(){this.visibleWrites_=Ee.Empty,this.allWrites_=[],this.lastWriteId_=-1}return c.prototype.childWrites=function(t){return new ke(t,this)},c.prototype.addOverwrite=function(t,e,n,r){b.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},c.prototype.addMerge=function(t,e,n){b.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},c.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},c.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});b.assert(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&0<=a;){var s=this.allWrites_[a];s.visible&&(t<=a&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var u=r.children;b.forEach(u,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))})}return!0}return!1},c.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},c.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(F.Empty)){var o=c.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);u=t||Ft.EMPTY_NODE;return o.apply(u)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(e);if(s.isEmpty())return t;if(null!=t||s.hasCompleteWrite(F.Empty)){var u=t||Ft.EMPTY_NODE;return s.apply(u)}return null},c.prototype.calcCompleteEventChildren=function(t,e){var r=Ft.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(St,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(St,function(t,e){var n=i.childCompoundWrite(new F(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},c.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){b.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},c.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},c.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},c.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(F.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),d=h.getNext();d&&c.length<r;)0!==l(d,n)&&c.push(d),d=h.getNext();return c},c.prototype.recordContainsPath_=function(n,r){return n.snap?n.path.contains(r):!!b.findKey(n.children,function(t,e){return n.path.child(e).contains(r)})},c.prototype.resetTree_=function(){this.visibleWrites_=c.layerTree_(this.allWrites_,c.DefaultFilter_,F.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},c.DefaultFilter_=function(t){return t.visible},c.layerTree_=function(t,e,n){for(var r=Ee.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=F.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=F.relativePath(a,n),r=r.addWrite(F.Empty,o.snap.getChild(s)));else{if(!o.children)throw b.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=F.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=F.relativePath(a,n)).isEmpty())r=r.addWrites(F.Empty,o.children);else{var u=b.safeGet(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(F.Empty,c)}}}}}return r},c}(),ke=function(){function e(t,e){this.treePath_=t,this.writeTree_=e}return e.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},e.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},e.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},e.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},e.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},e.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),Se=function(){function v(t){this.listenProvider_=t,this.syncPointTree_=se.Empty,this.pendingWriteTree_=new xe,this.tagToQueryMap_={},this.queryToTagMap_={}}return v.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ce(oe.User,t,e)):[]},v.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=se.fromObject(e);return this.applyOperationToSyncPoints_(new le(oe.User,t,r))},v.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=se.Empty;return null!=n.snap?r=r.set(F.Empty,!0):b.forEach(n.children,function(t,e){r=r.set(new F(t),e)}),this.applyOperationToSyncPoints_(new ae(n.path,r,e))}return[]},v.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ce(oe.Server,t,e))},v.prototype.applyServerMerge=function(t,e){var n=se.fromObject(e);return this.applyOperationToSyncPoints_(new le(oe.Server,t,n))},v.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ue(oe.Server,t))},v.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null!=r){var i=v.parseQueryKey_(r),o=i.path,a=i.queryId,s=F.relativePath(o,t),u=new ce(oe.forServerTaggedQuery(a),s,e);return this.applyTaggedOperation_(o,u)}return[]},v.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=v.parseQueryKey_(r),o=i.path,a=i.queryId,s=F.relativePath(o,t),u=se.fromObject(e),c=new le(oe.forServerTaggedQuery(a),s,u);return this.applyTaggedOperation_(o,c)}return[]},v.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=v.parseQueryKey_(n),i=r.path,o=r.queryId,a=F.relativePath(i,t),s=new ue(oe.forServerTaggedQuery(o),a);return this.applyTaggedOperation_(i,s)}return[]},v.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=F.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,a=this.syncPointTree_.get(r);(a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(F.Empty)):(a=new Ce,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i)?n=!0:(n=!1,i=Ft.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(F.Empty);n&&(i=i.updateImmediateChild(t,n))}));var s=a.viewExistsForQuery(t);if(!s&&!t.getQueryParams().loadsAllData()){var u=v.makeQueryKey_(t);b.assert(!(u in this.queryToTagMap_),"View does not exist, but we have a tag");var c=v.getNextQueryTag_();this.queryToTagMap_[u]=c,this.tagToQueryMap_["_"+c]=u}var l=this.pendingWriteTree_.childWrites(r),h=a.addEventRegistration(t,e,l,i,n);if(!s&&!o){var d=a.viewForQuery(t);h=h.concat(this.setupListener_(t,d))}return h},v.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),a=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var s=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),l=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!l){var h=this.syncPointTree_.subtree(i);if(!h.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(h),p=0;p<d.length;++p){var f=d[p],g=f.getQuery(),_=this.createListenerForView_(f);this.listenProvider_.startListening(v.queryForListening_(g),this.tagForQuery_(g),_.hashFn,_.onComplete)}}if(!l&&0<u.length&&!n)if(c){this.listenProvider_.stopListening(v.queryForListening_(t),null)}else u.forEach(function(t){var e=r.queryToTagMap_[v.makeQueryKey_(t)];r.listenProvider_.stopListening(v.queryForListening_(t),e)});this.removeTags_(u)}return a},v.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=F.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},v.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),b.forEach(n,function(t,e){r=r.concat(e)}),r})},v.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=v.makeQueryKey_(n),i=this.queryToTagMap_[r];delete this.queryToTagMap_[r],delete this.tagToQueryMap_["_"+i]}}},v.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},v.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(v.queryForListening_(t),r,i.hashFn,i.onComplete),a=this.syncPointTree_.subtree(n);if(r)b.assert(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var s=a.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),b.forEach(n,function(t,e){r=r.concat(e)}),r}),u=0;u<s.length;++u){var c=s[u];this.listenProvider_.stopListening(v.queryForListening_(c),this.tagForQuery_(c))}return o},v.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||Ft.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,r);return n.removeEventRegistration(r,null,e)}}},v.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},v.parseQueryKey_=function(t){var e=t.indexOf("$");return b.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new F(t.substr(0,e))}},v.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},v.prototype.tagForQuery_=function(t){var e=v.makeQueryKey_(t);return b.safeGet(this.queryToTagMap_,e)},v.getNextQueryTag_=function(){return v.nextQueryTag_++},v.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);b.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},v.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(F.Empty))},v.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(F.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(F.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},v.prototype.applyOperationDescendantsHelper_=function(o,t,a,s){var u=this,e=t.get(F.Empty);null==a&&null!=e&&(a=e.getCompleteServerCache(F.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=a?a.getImmediateChild(t):null,r=s.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,s,a))),c},v.nextQueryTag_=1,v}(),Ae=function(){function t(){this.rootNode_=Ft.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Pe=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(m("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',E(t)},t}(),Te=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),b.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return b.deepCopy(this.counters_)},t}(),Ie=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Te),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Oe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),n=b.clone(t);return this.last_&&b.forEach(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},t}(),Re=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Oe(t);var n=1e4+2e4*Math.random();j(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;b.forEach(t,function(t,e){0<e&&b.contains(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),j(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ne=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new De(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},t.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),De=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();f&&m("event: "+e.toString()),L(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Me=function(){function t(t){this.allowedEvents_=t,this.listeners_={},b.assert(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(e){b.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},t}(),Le=function(r){function t(){var e,t,n=r.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}return a.__extends(t,r),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(t){return b.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},t}(Me),je=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||b.isMobileCordova()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return a.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(t){return b.assert("online"===t,"Unknown event type: "+t),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Me),Fe=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var r=this;this.pendingResponses[t]=e;for(var n=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&L(function(){r.onMessage_(e[t])})},n=0;n<e.length;++n)t(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===n())break}},t}(),Ue=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=y(t),this.stats_=Ie.getCollection(e),this.urlFn=function(t){return e.connectionURL(W,t)}}return t.prototype.open=function(t,e){var o=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Fe(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(b.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!o.isClosed_){o.scriptTagHolder=new Ve(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1],i=t[2];if(o.incrementIncomingBytes_(t),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,"start"==n)o.id=r,o.password=i;else{if("close"!==n)throw new Error("Unrecognized command received: "+n);r?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(r,function(){o.onClosed_()})):o.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];o.incrementIncomingBytes_(t),o.myPacketOrderer.handleResponse(n,r)},function(){o.onClosed_()},o.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=o.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",o.transportSessionId&&(t.s=o.transportSessionId),o.lastSessionId&&(t.ls=o.lastSessionId),!b.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(V)&&(t.r="f");var e=o.urlFn(t);o.log_("Connecting via long-poll to "+e),o.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI)&&!b.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=b.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=b.base64Encode(e),r=O(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!b.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=b.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Ve=function(){function a(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new $t,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,b.isNodeSdk())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=v(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=a.createIFrame_();var i="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))i='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){m("frame writing exception"),t.stack&&m(t.stack),m(t)}}}return a.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||m("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},a.prototype.close=function(){var t=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0))),b.isNodeSdk()&&this.myID){var e={disconn:"t"};e.id=this.myID,e.pw=this.myPW;var n=this.urlFn(e);a.nodeRestRequest(n)}var r=this.onDisconnect;r&&(this.onDisconnect=null,r())},a.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},a.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},a.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},a.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},a.prototype.addTag=function(t,n){var r=this;b.isNodeSdk()?this.doNodeLongPoll(t,n):setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){m("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},a}(),We=null;"undefined"!=typeof MozWebSocket?We=MozWebSocket:"undefined"!=typeof WebSocket&&(We=WebSocket);var Be=function(){function i(t,e,n,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=y(this.connId),this.stats_=Ie.getCollection(e),this.connURL=i.connectionURL_(e,n,r)}return i.connectionURL_=function(t,e,n){var r={v:"5"};return!b.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(V)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},i.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,l.set("previous_websocket_failure",!0);try{if(b.isNodeSdk()){var r=b.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+c.SDK_VERSION+"/"+u.platform+"/"+r}},o=u.env,a=0==this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new We(this.connURL,[],i)}else this.mySock=new We(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var s=t.message||t.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},i.prototype.start=function(){},i.forceDisallow=function(){i.forceDisallow_=!0},i.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==We&&!i.forceDisallow_},i.previouslyFailed=function(){return l.isInMemoryStorage||!0===l.get("previous_websocket_failure")},i.prototype.markConnectionHealthy=function(){l.remove("previous_websocket_failure")},i.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=b.jsonEval(e);this.onMessage(n)}},i.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},i.prototype.extractFrameCount_=function(t){if(b.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},i.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},i.prototype.send=function(t){this.resetKeepAlive();var e=b.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=O(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},i.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},i.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},i.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},i.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},i.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i}(),Ge=function(){function i(t){this.initTransports_(t)}return Object.defineProperty(i,"ALL_TRANSPORTS",{get:function(){return[Ue,Be]},enumerable:!0,configurable:!0}),i.prototype.initTransports_=function(t){var e=Be&&Be.isAvailable(),n=e&&!Be.previouslyFailed();if(t.webSocketOnly&&(e||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Be];else{var r=this.transports_=[];R(i.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&r.push(e)})}},i.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},i.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},i}(),He=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=y("c:"+this.id+":"),this.transportManager_=new Ge(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=j(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},t.prototype.connReceiver_=function(e){var n=this;return function(t){2!=n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=T("t",t),n=T("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=T("t",t),n=T("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=T("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?w("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):w("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),j(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):j(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(l.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ye=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ze=function(s){function l(t,e,n,r,i,o){var a=s.call(this)||this;if(a.repoInfo_=t,a.onDataUpdate_=e,a.onConnectStatus_=n,a.onServerInfoUpdate_=r,a.authTokenProvider_=i,a.authOverride_=o,a.id=l.nextPersistentConnectionId_++,a.log_=y("p:"+a.id+":"),a.interruptReasons_={},a.listens_={},a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=1e3,a.maxReconnectDelay_=3e5,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,o&&!b.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Le.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&je.getInstance().on("online",a.onOnline_,a),a}return a.__extends(l,s),l.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(b.stringify(i)),b.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},l.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},b.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),b.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},l.prototype.sendListen_=function(r){var i=this,o=r.query,a=o.path.toString(),s=o.queryIdentifier();this.log_("Listen on "+a+" for "+s);var t={p:a};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;l.warnOnListenWarnings_(e,o),(i.listens_[a]&&i.listens_[a][s])===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(a,s),r.onComplete&&r.onComplete(n,e))})},l.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&b.contains(t,"w")){var n=b.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},l.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},l.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||b.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},l.prototype.tryAuth=function(){var r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,t=b.isValidFormat(i)?"auth":"gauth",e={cred:i};null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,n=t.d||"error";r.authToken_===i&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,n))})}},l.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),b.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},l.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},l.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},l.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},l.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},l.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},l.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},l.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},l.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},l.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},l.prototype.reportStats=function(t){var n=this;if(this.connected_){var e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,function(t){if("ok"!==t.s){var e=t.d;n.log_("reportStats","Error sending stats: "+e)}})}},l.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+b.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},l.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):w("Unrecognized action received from server: "+b.stringify(t)+"\nAre you using the latest client?")},l.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},l.prototype.scheduleConnect_=function(t){var e=this;b.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},l.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},l.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},l.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},l.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+l.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())};this.realtime_={close:c,sendRequest:function(t){b.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var t=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){s?m("getToken() completed but was canceled"):(m("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new He(i,o.repoInfo_,e,n,r,function(t){E(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(t){o.log_("Failed to get token: "+t),s||(b.CONSTANTS.NODE_ADMIN&&E(t),c())})}},l.prototype.interrupt=function(t){m("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},l.prototype.resume=function(t){m("Resuming connection for reason: "+t),delete this.interruptReasons_[t],b.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},l.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},l.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},l.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return I(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},l.prototype.removeListen_=function(t,e){var n,r=new F(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===b.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},l.prototype.onAuthRevoked_=function(t,e){m("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},l.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},l.prototype.restoreState_=function(){var n=this;this.tryAuth(),b.forEach(this.listens_,function(t,e){b.forEach(e,function(t,e){n.sendListen_(e)})});for(var t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){var e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}},l.prototype.sendConnectStats_=function(){var t={},e="js";b.CONSTANTS.NODE_ADMIN?e="admin_node":b.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+c.SDK_VERSION.replace(/\./g,"-")]=1,b.isMobileCordova()?t["framework.cordova"]=1:b.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},l.prototype.shouldReconnect_=function(){var t=je.getInstance().currentlyOnline();return b.isEmpty(this.interruptReasons_)&&t},l.nextPersistentConnectionId_=0,l.nextConnectionId_=0,l}(Ye),qe=function(i){function c(t,e,n){var r=i.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=y("p:rest:"),r.listens_={},r}return a.__extends(c,i),c.prototype.reportStats=function(t){throw new Error("Method not implemented.")},c.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(b.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},c.prototype.listen=function(t,e,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=c.getListenId_(t,r),u={};this.listens_[s]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",n,function(t,e){var n=e;(404===t&&(t=n=null),null===t&&o.onDataUpdate_(a,n,!1,r),b.safeGet(o.listens_,s)===u)&&i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},c.prototype.unlisten=function(t,e){var n=c.getListenId_(t,e);delete this.listens_[n]},c.prototype.refreshAuthToken=function(t){},c.prototype.restRequest_=function(i,o,a){var s=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+i+"?"+b.querystring(o);s.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(a&&4===r.readyState){s.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=b.jsonEval(r.responseText)}catch(t){E("Failed to parse JSON response for "+n+": "+r.responseText)}a(null,t)}else 401!==r.status&&404!==r.status&&E("Got unsuccessful REST response for "+n+" Status: "+r.status),a(r.status);a=null}},r.open("GET",n,!0),r.send()})},c}(Ye),Xe="repo_interrupt",Qe=function(){function t(t,e,n){var a=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ne,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new te,this.persistentConnection_=null;var r=new Pe(n);if(this.stats_=Ie.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new qe(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var i=n.options.databaseAuthVariableOverride;if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{b.stringify(i)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new ze(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,i),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(t){a.server_.refreshAuthToken(t)}),this.statsReporter_=Ie.getOrCreateReporter(t,function(){return new Re(a.stats_,a.server_)}),this.transactions_init_(),this.infoData_=new Ae,this.infoSyncTree_=new Se({startListening:function(t,e,n,r){var i=[],o=a.infoData_.getNode(t.path);return o.isEmpty()||(i=a.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Se({startListening:function(r,t,e,i){return a.server_.listen(r,e,t,function(t,e){var n=i(t,e);a.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){a.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new F(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new F(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=b.map(e,function(t){return Wt(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=Wt(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=b.map(e,function(t){return Wt(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Wt(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;0<o.length&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var n=this;R(t,function(t,e){n.updateInfo_(e,t)})},t.prototype.updateInfo_=function(t,e){var n=new F("/.info/"+t),r=Wt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(i,t,e,o){var a=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=Wt(t,e),s=ne(r,n),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(i,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||E("set at "+i+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n);a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(o,t,e)});var l=this.abortTransactions_(i);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(o,t,a){var s=this;this.log_("update",{path:o.toString(),value:t});var r=!0,i=this.generateServerValues(),u={};if(b.forEach(t,function(t,e){r=!1;var n=Wt(e);u[t]=ne(n,i)}),r)m("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(a,"ok");else{var c=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,u,c);this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||E("update at "+o+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(c,!n),i=0<r.length?s.rerunTransactions_(o):o;s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(a,t,e)}),b.forEach(t,function(t){var e=s.abortTransactions_(o.child(t));s.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},t.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var t,n,i,e=this.generateServerValues(),o=(t=this.onDisconnect_,n=e,i=new te,t.forEachTree(new F(""),function(t,e){i.remember(t,ne(e,n))}),i),a=[];o.forEachTree(F.Empty,function(t,e){a=a.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new te,this.eventQueue_.raiseEventsForChangedPath(F.Empty,a)},t.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},t.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Wt(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},t.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Wt(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},t.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(b.isEmpty(n))return m("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&b.forEach(n,function(t,e){var n=Wt(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Xe)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Xe)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Oe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var r=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);b.forEach(e,function(t,e){for(var n=t.length;n<r+2;n++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),m.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(r,i,o){r&&L(function(){if("ok"==i)r(null);else{var t=(i||"error").toUpperCase(),e=t;o&&(e+=": "+o);var n=new Error(e);n.code=t,r(n)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new un(this))},enumerable:!0,configurable:!0}),t}(),Ze=function(){function e(t){this.indexedFilter_=new fe(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},e.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new ft(e,n))||(n=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},e.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ft.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ft.EMPTY_NODE);var i=this;return e.forEachChild(St,function(t,e){i.matches(new ft(t,e))||(r=r.updateImmediateChild(t,Ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},e.prototype.updatePriority=function(t,e){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},e.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},e}(),Ke=function(){function t(t){this.rangedFilter_=new Ze(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new ft(e,n))||(n=Ft.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ft.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ft.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;b.assert(s.numChildren()==this.limit_,"");var u=new ft(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),d=r.getChildAfterChild(this.index_,c,this.reverse_);null!=d&&(d.name==e||s.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:o(d,u);if(l&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(pe.childChangedChange(e,n,h)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(pe.childRemovedChange(e,h));var f=s.updateImmediateChild(e,Ft.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(pe.childAddedChange(d.name,d.node)),f.updateImmediateChild(d.name,d.node)):f}return n.isEmpty()?t:l&&0<=o(c,u)?(null!=i&&(i.trackChildChange(pe.childRemovedChange(c.name,c.node)),i.trackChildChange(pe.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,Ft.EMPTY_NODE)):t},t}(),Je=function(){function r(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=St}return r.prototype.hasStart=function(){return this.startSet_},r.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},r.prototype.getIndexStartValue=function(){return b.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},r.prototype.getIndexStartName=function(){return b.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},r.prototype.hasEnd=function(){return this.endSet_},r.prototype.getIndexEndValue=function(){return b.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},r.prototype.getIndexEndName=function(){return b.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:S},r.prototype.hasLimit=function(){return this.limitSet_},r.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},r.prototype.getLimit=function(){return b.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},r.prototype.getIndex=function(){return this.index_},r.prototype.copy_=function(){var t=new r;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},r.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},r.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},r.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=r.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},r.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},r.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},r.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},r.prototype.getQueryObject=function(){var t=r.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==St&&(e[t.INDEX]=this.index_.toString()),e},r.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},r.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==St},r.prototype.getNodeFilter=function(){return this.loadsAllData()?new fe(this.getIndex()):this.hasLimit()?new Ke(this):new Ze(this)},r.prototype.toRestQueryStringParameters=function(){var t,e=r.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(this.index_===St?t=e.PRIORITY_INDEX:this.index_===Yt?t=e.VALUE_INDEX:this.index_===vt?t=e.KEY_INDEX:(b.assert(this.index_ instanceof zt,"Unrecognized index type!"),t=this.index_.toString()),n[e.ORDER_BY]=b.stringify(t),this.startSet_&&(n[e.START_AT]=b.stringify(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+b.stringify(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=b.stringify(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+b.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},r.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},r.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},r.DEFAULT=new r,r}(),$e=function(n){function o(t,e){if(!(t instanceof Qe))throw new Error("new Reference() no longer supported - use app.database().");return n.call(this,t,e,Je.DEFAULT,!1)||this}return a.__extends(o,n),o.prototype.getKey=function(){return b.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},o.prototype.child=function(t){var e,n,r,i;return b.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof F||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),(r=t)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),ut(e,n,r,i)):ut("Reference.child",1,t,!1)),new o(this.repo,this.path.child(t))},o.prototype.getParent=function(){b.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new o(this.repo,t)},o.prototype.getRoot=function(){b.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},o.prototype.databaseProp=function(){return this.repo.database},o.prototype.set=function(t,e){b.validateArgCount("Reference.set",1,2,arguments.length),ct("Reference.set",this.path),nt("Reference.set",1,t,this.path,!1),b.validateCallback("Reference.set",2,e,!0);var n=new b.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},o.prototype.update=function(t,e){if(b.validateArgCount("Reference.update",1,2,arguments.length),ct("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}it("Reference.update",1,t,this.path,!1),b.validateCallback("Reference.update",2,e,!0);var i=new b.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},o.prototype.setWithPriority=function(t,e,n){if(b.validateArgCount("Reference.setWithPriority",2,3,arguments.length),ct("Reference.setWithPriority",this.path),nt("Reference.setWithPriority",1,t,this.path,!1),ot("Reference.setWithPriority",2,e,!1),b.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new b.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},o.prototype.remove=function(t){return b.validateArgCount("Reference.remove",0,1,arguments.length),ct("Reference.remove",this.path),b.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},o.prototype.transaction=function(t,r,e){if(b.validateArgCount("Reference.transaction",1,3,arguments.length),ct("Reference.transaction",this.path),b.validateCallback("Reference.transaction",1,t,!1),b.validateCallback("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(b.errorPrefix(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new b.Deferred;"function"==typeof r&&i.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new dt(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},o.prototype.setPriority=function(t,e){b.validateArgCount("Reference.setPriority",1,2,arguments.length),ct("Reference.setPriority",this.path),ot("Reference.setPriority",1,t,!1),b.validateCallback("Reference.setPriority",2,e,!0);var n=new b.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},o.prototype.push=function(t,e){b.validateArgCount("Reference.push",0,2,arguments.length),ct("Reference.push",this.path),nt("Reference.push",1,t,this.path,!0),b.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=pt(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},o.prototype.onDisconnect=function(){return ct("Reference.onDisconnect",this.path),new ht(this.repo,this.path)},Object.defineProperty(o.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),o}(Jt);Jt.__referenceConstructor=$e,Ce.__referenceConstructor=$e;var tn,en,nn=function(){this.children={},this.childCount=0,this.value=null},rn=function(){function i(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new nn),this.name_=t,this.parent_=e,this.node_=n}return i.prototype.subTree=function(t){for(var e,n=t instanceof F?t:new F(t),r=this;null!==(e=n.getFront());){r=new i(e,r,b.safeGet(r.node_.children,e)||new nn),n=n.popFront()}return r},i.prototype.getValue=function(){return this.node_.value},i.prototype.setValue=function(t){b.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},i.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},i.prototype.hasChildren=function(){return 0<this.node_.childCount},i.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},i.prototype.forEachChild=function(n){var r=this;b.forEach(this.node_.children,function(t,e){n(new i(t,r,e))})},i.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},i.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},i.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},i.prototype.path=function(){return new F(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},i.prototype.name=function(){return this.name_},i.prototype.parent=function(){return this.parent_},i.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},i.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=b.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},i}();(en=tn||(tn={}))[en.RUN=0]="RUN",en[en.SENT=1]="SENT",en[en.COMPLETED=2]="COMPLETED",en[en.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",en[en.NEEDS_ABORT=4]="NEEDS_ABORT",Qe.MAX_TRANSACTION_RETRIES_=25,Qe.prototype.transactions_init_=function(){this.transactionQueueTree_=new rn},Qe.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new $e(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:v(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new qt(a.currentInputSnapshot,new $e(this,a.path),St);a.onComplete(null,!1,c)}}else{rt("transaction failed: Data returned ",u,a.path),a.status=tn.RUN;var l=this.transactionQueueTree_.subTree(t),h=l.getValue()||[];h.push(a),l.setValue(h);var d=void 0;if("object"==typeof u&&null!==u&&b.contains(u,".priority"))d=b.safeGet(u,".priority"),b.assert(et(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else d=(this.serverSyncTree_.calcCompleteEventCache(t)||Ft.EMPTY_NODE).getPriority().val();d=d;var p=this.generateServerValues(),f=Wt(u,d),g=ne(f,p);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var _=this.serverSyncTree_.applyUserOverwrite(t,g,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,_),this.sendReadyTransactions_()}},Qe.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ft.EMPTY_NODE},Qe.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);b.assert(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return t.status===tn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},Qe.prototype.sendTransactionQueue_=function(s,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(s,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];b.assert(o.status===tn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=tn.SENT,o.retryCount++;var a=F.relativePath(s,o.path);n=n.updateChild(a,o.currentOutputSnapshotRaw)}var l=n.val(!0),h=s;this.server_.put(h.toString(),l,function(t){c.log_("transaction put response",{path:h.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<u.length;r++){if(u[r].status=tn.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[r].currentWriteId)),u[r].onComplete){var i=u[r].currentOutputSnapshotResolved,o=new $e(c,u[r].path),a=new qt(i,o,St);n.push(u[r].onComplete.bind(null,null,!0,a))}u[r].unwatcher()}c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(s)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(s,e);for(r=0;r<n.length;r++)L(n[r])}else{if("datastale"===t)for(r=0;r<u.length;r++)u[r].status===tn.SENT_NEEDS_ABORT?u[r].status=tn.NEEDS_ABORT:u[r].status=tn.RUN;else{E("transaction at "+h.toString()+" failed: "+t);for(r=0;r<u.length;r++)u[r].status=tn.NEEDS_ABORT,u[r].abortReason=t}c.rerunTransactions_(s)}},r)},Qe.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Qe.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===tn.RUN}).map(function(t){return t.currentWriteId}),a=0;a<t.length;a++){var s=t[a],u=F.relativePath(e,s.path),c=!1,l=void 0;if(b.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===tn.NEEDS_ABORT)c=!0,l=s.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===tn.RUN)if(s.retryCount>=Qe.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){rt("transaction failed: Data returned ",d,s.path);var p=Wt(d);"object"==typeof d&&null!=d&&b.contains(d,".priority")||(p=p.updatePriority(h.getPriority()));var f=s.currentWriteId,g=this.generateServerValues(),_=ne(p,g);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=_,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(f),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(s.path,_,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(f,!0))}else c=!0,l="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[a].status=tn.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===l){var v=new $e(this,t[a].path),m=t[a].currentInputSnapshot,y=new qt(m,v,St);r.push(t[a].onComplete.bind(null,null,!1,y))}else r.push(t[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<r.length;a++)L(r[a]);this.sendReadyTransactions_()}},Qe.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},Qe.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},Qe.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},Qe.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==tn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},Qe.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},Qe.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===tn.SENT_NEEDS_ABORT);else if(e[o].status===tn.SENT)b.assert(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=tn.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(b.assert(e[o].status===tn.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)L(n[o])}};var on,an="databaseURL",sn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return on||(on=new t),on},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options[an];void 0===n&&C("Can't determine Firebase Database URL.  Be sure to include "+an+" option when calling firebase.initializeApp().");var r=X(n),i=r.repoInfo;return lt("Invalid Firebase Database URL",1,r),r.path.isEmpty()||C("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=b.safeGet(this.repos_,t.app.name);e&&b.safeGet(e,t.repoInfo_.toURLString())===t||C("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=b.safeGet(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var r=b.safeGet(n,t.toURLString());return r&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Qe(t,this.useRestClient_,e),n[t.toURLString()]=r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),un=function(){function t(t){(this.repo_=t)instanceof Qe||C("Don't call new Database() directly - please use firebase.database()."),this.root_=new $e(t,F.Empty),this.INTERNAL=new cn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),b.validateArgCount("database.ref",0,1,arguments.length),t instanceof $e?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),b.validateArgCount(e,1,1,arguments.length);var n=X(t);lt(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){b.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){b.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),cn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.database.checkDeleted_("delete"),sn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),ln=Object.freeze({forceLongPolling:function(){Be.forceDisallow(),Ue.forceAllow()},forceWebSockets:function(){Ue.forceDisallow()},isWebSocketsAvailable:function(){return Be.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),hn=ze;ze.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},ze.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var dn=He,pn=B,fn=Object.freeze({DataConnection:hn,RealTimeConnection:dn,hijackHash:function(i){var o=ze.prototype.put;return ze.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){ze.prototype.put=o}},ConnectionTarget:pn,queryIdentifier:function(t){return t.queryIdentifier()},listens:function(t){return t.repo.persistentConnection_.listens_},forceRestClient:function(t){sn.getInstance().forceRestClient(t)}}),gn=un.ServerValue;function _n(t){var e=t.INTERNAL.registerService("database",function(t,e,n){return sn.getInstance().databaseFromApp(t,n)},{Reference:$e,Query:Jt,Database:un,enableLogging:_,INTERNAL:ln,ServerValue:gn,TEST_ACCESS:fn},null,!0);b.isNodeSdk()&&(vn.exports=e)}_n(c),mn.registerDatabase=_n,mn.Database=un,mn.Query=Jt,mn.Reference=$e,mn.enableLogging=_,mn.ServerValue=gn,mn.DataSnapshot=qt,mn.OnDisconnect=ht}).call(mn,yn(24))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"setLogLevel",function(){return c}),n.d(e,"Logger",function(){return u}),n.d(e,"LogLevel",function(){return o});var o,r,i=[];(r=o||(o={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";var a=o.INFO,s=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case o.DEBUG:case o.VERBOSE:console.log.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.INFO:console.info.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.WARN:console.warn.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.ERROR:console.error.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},u=function(){function t(t){this.name=t,this._logLevel=a,this._logHandler=s,i.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.ERROR].concat(t))},t}();function c(e){i.forEach(function(t){t.logLevel=e})}},function(t,e,n){n(61)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"registerMessaging",function(){return mt});var r,i,o,a,s,u=n(16),f=(n.n(u),n(17)),c=n(7),l="only-available-in-window",h="only-available-in-sw",d="should-be-overriden",p="bad-sender-id",g="incorrect-gcm-sender-id",_="permission-default",v="permission-blocked",m="unsupported-browser",y="notifications-blocked",b="failed-serviceworker-registration",w="sw-registration-expected",C="get-subscription-failed",E="invalid-saved-token",x="sw-reg-redundant",k="token-subscribe-failed",S="token-subscribe-no-token",A="token-subscribe-no-push-set",P="token-unsubscribe-failed",T="token-update-failed",I="token-update-no-token",O="use-sw-before-get-token",R="invalid-delete-token",N="delete-token-not-found",D="delete-scope-not-found",M="bg-handler-function-expected",L="no-window-client-to-msg",j="unable-to-resubscribe",F="no-fcm-token-for-resubscribe",U="failed-to-delete-token",V="no-sw-in-reg",W="bad-scope",B="bad-vapid-key",G="bad-subscription",H="bad-token",Y="bad-push-set",z="failed-delete-vapid-key",q="invalid-public-vapid-key",X="use-public-key-before-get-token",Q="public-vapid-key-decryption-failed",Z=((r={})[l]="This method is available in a Window context.",r[h]="This method is available in a service worker context.",r[d]="This method should be overriden by extended classes.",r[p]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",r[_]="The required permissions were not granted and dismissed instead.",r[v]="The required permissions were not granted and blocked instead.",r[m]="This browser doesn't support the API's required to use the firebase SDK.",r[y]="Notifications have been blocked.",r[b]="We are unable to register the default service worker. {$browserErrorMessage}",r[w]="A service worker registration was the expected input.",r[C]="There was an error when trying to get any existing Push Subscriptions.",r[E]="Unable to access details of the saved token.",r[x]="The service worker being used for push was made redundant.",r[k]="A problem occured while subscribing the user to FCM: {$message}",r[S]="FCM returned no token when subscribing the user to push.",r[A]="FCM returned an invalid response when getting an FCM token.",r[P]="A problem occured while unsubscribing the user from FCM: {$message}",r[T]="A problem occured while updating the user from FCM: {$message}",r[I]="FCM returned no token when updating the user to push.",r[O]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r[R]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",r[N]="The deletion attempt for token could not be performed as the token was not found.",r[D]="The deletion attempt for service worker scope could not be performed as the scope was not found.",r[M]="The input to setBackgroundMessageHandler() must be a function.",r[L]="An attempt was made to message a non-existant window client.",r[j]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",r[F]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",r[U]="Unable to delete the currently saved token.",r[V]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",r[g]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",r[W]="The service worker scope must be a string with at least one character.",r[B]="The public VAPID key is not a Uint8Array with 65 bytes.",r[G]="The subscription must be a valid PushSubscription.",r[H]="The FCM Token used for storage / lookup was not a valid token string.",r[Y]="The FCM push set used for storage / lookup was not not a valid push set string.",r[z]="The VAPID key could not be deleted.",r[q]="The public VAPID key must be a string.",r[Q]="The public VAPID key did not equal 65 bytes when decrypted.",r),K=new u.ErrorFactory("messaging","Messaging",Z),J=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),$="https://fcm.googleapis.com";function tt(t,e){if(null==t||null==e)return!1;if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(var n=new DataView(t),r=new DataView(e),i=0;i<t.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function et(t){var e;return(e=new Uint8Array(t),btoa(String.fromCharCode.apply(null,e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(o=i||(i={})).TYPE_OF_MSG="firebase-messaging-msg-type",o.DATA="firebase-messaging-msg-data",(s=a||(a={})).PUSH_MSG_RECEIVED="push-msg-received",s.NOTIFICATION_CLICKED="notification-clicked";var nt=function(){function t(){}return t.prototype.getToken=function(c,l,h){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u;return Object(f.__generator)(this,function(t){switch(t.label){case 0:e=et(l.getKey("p256dh")),n=et(l.getKey("auth")),r="authorized_entity="+c+"&endpoint="+l.endpoint+"&encryption_key="+e+"&encryption_auth="+n,h!==J&&(i=et(h),r+="&application_pub_key="+i),(o=new Headers).append("Content-Type","application/x-www-form-urlencoded"),a={method:"POST",headers:o,body:r},t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch($+"/fcm/connect/subscribe",a)];case 2:return[4,t.sent().json()];case 3:return s=t.sent(),[3,5];case 4:throw t.sent(),K.create(k);case 5:if(s.error)throw u=s.error.message,K.create(k,{message:u});if(!s.token)throw K.create(S);if(!s.pushSet)throw K.create(A);return[2,{token:s.token,pushSet:s.pushSet}]}})})},t.prototype.updateToken=function(c,l,h,d,p){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u;return Object(f.__generator)(this,function(t){switch(t.label){case 0:e=et(d.getKey("p256dh")),n=et(d.getKey("auth")),r="push_set="+h+"&token="+l+"&authorized_entity="+c+"&endpoint="+d.endpoint+"&encryption_key="+e+"&encryption_auth="+n,p!==J&&(i=et(p),r+="&application_pub_key="+i),(o=new Headers).append("Content-Type","application/x-www-form-urlencoded"),a={method:"POST",headers:o,body:r},t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch($+"/fcm/connect/subscribe",a)];case 2:return[4,t.sent().json()];case 3:return s=t.sent(),[3,5];case 4:throw t.sent(),K.create(T);case 5:if(s.error)throw u=s.error.message,K.create(T,{message:u});if(!s.token)throw K.create(I);return[2,s.token]}})})},t.prototype.deleteToken=function(a,s,u){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(f.__generator)(this,function(t){switch(t.label){case 0:e="authorized_entity="+a+"&token="+s+"&pushSet="+u,(n=new Headers).append("Content-Type","application/x-www-form-urlencoded"),r={method:"POST",headers:n,body:e},t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch($+"/fcm/connect/unsubscribe",r)];case 2:return[4,t.sent().json()];case 3:if((i=t.sent()).error)throw o=i.error.message,K.create(P,{message:o});return[3,5];case 4:throw t.sent(),K.create(P);case 5:return[2]}})})},t}();function rt(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var it="undefined",ot="fcm_token_object_Store";function at(){var e=indexedDB.open(it);e.onerror=function(t){},e.onsuccess=function(t){!function(n){if(n.objectStoreNames.contains(ot)){var t=n.transaction(ot).objectStore(ot),r=new nt,i=t.openCursor();i.onerror=function(t){console.warn("Unable to cleanup old IDB.",t)},i.onsuccess=function(){var t=i.result;if(t){var e=t.value;r.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet),t.continue()}else n.close(),indexedDB.deleteDatabase(it)}}}(e.result)}}var st=function(){function t(){this.dbPromise=null}return t.prototype.get=function(e){return this.createTransaction(function(t){return t.get(e)})},t.prototype.getIndex=function(e,n){return this.createTransaction(function(t){return t.index(e).get(n)})},t.prototype.put=function(e){return this.createTransaction(function(t){return t.put(e)},"readwrite")},t.prototype.delete=function(e){return this.createTransaction(function(t){return t.delete(e)},"readwrite")},t.prototype.closeDatabase=function(){return Object(f.__awaiter)(this,void 0,void 0,function(){return Object(f.__generator)(this,function(t){switch(t.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:t.sent().close(),this.dbPromise=null,t.label=2;case 2:return[2]}})})},t.prototype.createTransaction=function(a,s){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,r,i,o;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getDb()];case 1:return e=t.sent(),r=e.transaction(this.objectStoreName,s),i=r.objectStore(this.objectStoreName),[4,(n=a(i),new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}}))];case 2:return o=t.sent(),[2,new Promise(function(t,e){r.oncomplete=function(){t(o)},r.onerror=function(){e(r.error)}})]}var n})})},t.prototype.getDb=function(){var r=this;return this.dbPromise||(this.dbPromise=new Promise(function(t,e){var n=indexedDB.open(r.dbName,r.dbVersion);n.onsuccess=function(){t(n.result)},n.onerror=function(){r.dbPromise=null,e(n.error)},n.onupgradeneeded=function(t){return r.onDbUpgrade(n,t)}})),this.dbPromise},t}();var ut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_token_details_db",t.dbVersion=3,t.objectStoreName="fcm_token_object_Store",t}return Object(f.__extends)(t,e),t.prototype.onDbUpgrade=function(t,e){var n=t.result;switch(e.oldVersion){case 0:(r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:at();case 2:var r,i=(r=t.transaction.objectStore(this.objectStoreName)).openCursor();i.onsuccess=function(){var t=i.result;if(t){var e=t.value,n=Object(f.__assign)({},e);e.createTime||(n.createTime=Date.now()),"string"==typeof e.vapidKey&&(n.vapidKey=rt(e.vapidKey)),"string"==typeof e.auth&&(n.auth=rt(e.auth).buffer),"string"==typeof e.auth&&(n.p256dh=rt(e.p256dh).buffer),t.update(n),t.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return Object(f.__awaiter)(this,void 0,void 0,function(){return Object(f.__generator)(this,function(t){if(!e)throw K.create(H);return ct({fcmToken:e}),[2,this.getIndex("fcmToken",e)]})})},t.prototype.getTokenDetailsFromSWScope=function(e){return Object(f.__awaiter)(this,void 0,void 0,function(){return Object(f.__generator)(this,function(t){if(!e)throw K.create(W);return ct({swScope:e}),[2,this.get(e)]})})},t.prototype.saveTokenDetails=function(e){return Object(f.__awaiter)(this,void 0,void 0,function(){return Object(f.__generator)(this,function(t){if(!e.swScope)throw K.create(W);if(!e.vapidKey)throw K.create(B);if(!e.endpoint||!e.auth||!e.p256dh)throw K.create(G);if(!e.fcmSenderId)throw K.create(p);if(!e.fcmToken)throw K.create(H);if(!e.fcmPushSet)throw K.create(Y);return ct(e),[2,this.put(e)]})})},t.prototype.deleteToken=function(n){return Object(f.__awaiter)(this,void 0,void 0,function(){var e;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return"string"!=typeof n||0===n.length?[2,Promise.reject(K.create(R))]:[4,this.getTokenDetailsFromToken(n)];case 1:if(!(e=t.sent()))throw K.create(N);return[4,this.delete(e.swScope)];case 2:return t.sent(),[2,e]}})})},t}(st);function ct(t){if(t.fcmToken&&("string"!=typeof t.fcmToken||0===t.fcmToken.length))throw K.create(H);if(t.swScope&&("string"!=typeof t.swScope||0===t.swScope.length))throw K.create(W);if(t.vapidKey&&(!(t.vapidKey instanceof Uint8Array)||65!==t.vapidKey.length))throw K.create(B);if(t.endpoint&&("string"!=typeof t.endpoint||0===t.endpoint.length))throw K.create(G);if(t.auth&&!(t.auth instanceof ArrayBuffer))throw K.create(G);if(t.p256dh&&!(t.p256dh instanceof ArrayBuffer))throw K.create(G);if(t.fcmSenderId&&("string"!=typeof t.fcmSenderId||0===t.fcmSenderId.length))throw K.create(p);if(t.fcmPushSet&&("string"!=typeof t.fcmPushSet||0===t.fcmPushSet.length))throw K.create(Y)}var lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return Object(f.__extends)(t,e),t.prototype.onDbUpgrade=function(t){t.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(n){return Object(f.__awaiter)(this,void 0,void 0,function(){var e;return Object(f.__generator)(this,function(t){switch(t.label){case 0:if("string"!=typeof n||0===n.length)throw K.create(W);return[4,this.get(n)];case 1:return[2,(e=t.sent())?e.vapidKey:void 0]}})})},t.prototype.saveVapidDetails=function(n,r){return Object(f.__awaiter)(this,void 0,void 0,function(){var e;return Object(f.__generator)(this,function(t){if("string"!=typeof n||0===n.length)throw K.create(W);if(null===r||65!==r.length)throw K.create(B);return e={swScope:n,vapidKey:r},[2,this.put(e)]})})},t.prototype.deleteVapidDetails=function(n){return Object(f.__awaiter)(this,void 0,void 0,function(){var e;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getVapidFromSWScope(n)];case 1:if(!(e=t.sent()))throw K.create(D);return[4,this.delete(n)];case 2:return t.sent(),[2,e]}})})},t}(st),ht="messagingSenderId",dt=function(){function t(t){var e=this;if(!t.options[ht]||"string"!=typeof t.options[ht])throw K.create(p);this.messagingSenderId=t.options[ht],this.tokenDetailsModel=new ut,this.vapidDetailsModel=new lt,this.iidModel=new nt,this.app=t,this.INTERNAL={delete:function(){return e.delete()}}}return t.prototype.getToken=function(){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return"granted"!==(e=this.getNotificationPermission_())?"denied"===e?[2,Promise.reject(K.create(y))]:[2,Promise.resolve(null)]:[4,this.getSWRegistration_()];case 1:return n=t.sent(),[4,this.getPublicVapidKey_()];case 2:return r=t.sent(),[4,this.getPushSubscription(n,r)];case 3:return i=t.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(n.scope)];case 4:return(o=t.sent())?[2,this.manageExistingToken(n,i,r,o)]:[2,this.getNewToken(n,i,r)]}})})},t.prototype.manageExistingToken=function(e,n,r,i){return Object(f.__awaiter)(this,void 0,void 0,function(){return Object(f.__generator)(this,function(t){switch(t.label){case 0:return function(t,e,n){if(!tt(e.buffer,n.vapidKey.buffer))return!1;var r=t.endpoint===n.endpoint,i=tt(t.getKey("auth"),n.auth),o=tt(t.getKey("p256dh"),n.p256dh);return r&&i&&o}(n,r,i)?Date.now()<i.createTime+6048e5?[2,i.fcmToken]:[2,this.updateToken(e,n,r,i)]:[4,this.deleteTokenFromDB(i.fcmToken)];case 1:return t.sent(),[2,this.getNewToken(e,n,r)]}})})},t.prototype.updateToken=function(i,o,a,s){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,s.fcmToken,s.fcmPushSet,o,a)];case 1:return e=t.sent(),n={swScope:i.scope,vapidKey:a,fcmSenderId:this.messagingSenderId,fcmToken:e,fcmPushSet:s.fcmPushSet,createTime:Date.now(),endpoint:o.endpoint,auth:o.getKey("auth"),p256dh:o.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(n)];case 2:return t.sent(),[4,this.vapidDetailsModel.saveVapidDetails(i.scope,a)];case 3:return t.sent(),[2,e];case 4:return r=t.sent(),[4,this.deleteToken(s.fcmToken)];case 5:throw t.sent(),r;case 6:return[2]}})})},t.prototype.getNewToken=function(r,i,o){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,i,o)];case 1:return e=t.sent(),n={swScope:r.scope,vapidKey:o,fcmSenderId:this.messagingSenderId,fcmToken:e.token,fcmPushSet:e.pushSet,createTime:Date.now(),endpoint:i.endpoint,auth:i.getKey("auth"),p256dh:i.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(n)];case 2:return t.sent(),[4,this.vapidDetailsModel.saveVapidDetails(r.scope,o)];case 3:return t.sent(),[2,e.token]}})})},t.prototype.deleteToken=function(r){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return[4,this.deleteTokenFromDB(r)];case 1:return t.sent(),[4,this.getSWRegistration_()];case 2:return(e=t.sent())?[4,e.pushManager.getSubscription()]:[3,4];case 3:if(n=t.sent())return[2,n.unsubscribe()];t.label=4;case 4:return[2,!0]}})})},t.prototype.deleteTokenFromDB=function(n){return Object(f.__awaiter)(this,void 0,void 0,function(){var e;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return[4,this.tokenDetailsModel.deleteToken(n)];case 1:return e=t.sent(),[4,this.iidModel.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet)];case 2:return t.sent(),[2]}})})},t.prototype.getPushSubscription=function(e,n){return e.pushManager.getSubscription().then(function(t){return t||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n})})},t.prototype.requestPermission=function(){throw K.create(l)},t.prototype.useServiceWorker=function(t){throw K.create(l)},t.prototype.usePublicVapidKey=function(t){throw K.create(l)},t.prototype.onMessage=function(t,e,n){throw K.create(l)},t.prototype.onTokenRefresh=function(t,e,n){throw K.create(l)},t.prototype.setBackgroundMessageHandler=function(t){throw K.create(h)},t.prototype.delete=function(){return Object(f.__awaiter)(this,void 0,void 0,function(){return Object(f.__generator)(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return t.sent(),[2]}})})},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},t.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},t.prototype.getIIDModel=function(){return this.iidModel},t}();var pt="FCM_MSG",ft=function(n){function t(t){var e=n.call(this,t)||this;return e.bgMessageHandler=null,self.addEventListener("push",function(t){e.onPush(t)}),self.addEventListener("pushsubscriptionchange",function(t){e.onSubChange(t)}),self.addEventListener("notificationclick",function(t){e.onNotificationClick(t)}),e}return Object(f.__extends)(t,n),t.prototype.onPush=function(t){t.waitUntil(this.onPush_(t))},t.prototype.onSubChange=function(t){t.waitUntil(this.onSubChange_(t))},t.prototype.onNotificationClick=function(t){t.waitUntil(this.onNotificationClick_(t))},t.prototype.onPush_=function(i){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(f.__generator)(this,function(t){switch(t.label){case 0:if(!i.data)return[2];try{e=i.data.json()}catch(t){return[2]}return[4,this.hasVisibleClients_()];case 1:return t.sent()?e.notification||this.bgMessageHandler?[2,this.sendMessageToWindowClients_(e)]:[2]:(n=this.getNotificationData_(e))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return[2,t.sent().showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:return t.sent(),[2];case 5:return[2]}})})},t.prototype.onSubChange_=function(t){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=t.sent(),[3,3];case 2:throw n=t.sent(),K.create(j,{message:n});case 3:return t.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return t.sent(),[3,8];case 5:return r=t.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(i=t.sent()))throw r;return[4,this.deleteToken(i.fcmToken)];case 7:throw t.sent(),r;case 8:return[2]}})})},t.prototype.onNotificationClick_=function(o){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return o.notification&&o.notification.data&&o.notification.data[pt]?(o.stopImmediatePropagation(),o.notification.close(),(e=o.notification.data[pt]).notification&&(n=e.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(r=t.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=t.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=t.sent(),t.label=5;case 5:return r?(delete e.notification,i=_t(a.NOTIFICATION_CLICKED,e),[2,this.attemptToMessageClient_(r,i)]):[2]}})})},t.prototype.getNotificationData_=function(t){if(t&&"object"==typeof t.notification){var e,n=Object(f.__assign)({},t.notification);return n.data=((e={})[pt]=t,e),n}},t.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw K.create(M);this.bgMessageHandler=t},t.prototype.getWindowClient_=function(o){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return e=new URL(o,self.location.href).href,[4,gt()];case 1:for(n=t.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===e){r=n[i];break}return[2,r]}})})},t.prototype.attemptToMessageClient_=function(e,n){return Object(f.__awaiter)(this,void 0,void 0,function(){return Object(f.__generator)(this,function(t){if(!e)throw K.create(L);return e.postMessage(n),[2]})})},t.prototype.hasVisibleClients_=function(){return Object(f.__awaiter)(this,void 0,void 0,function(){return Object(f.__generator)(this,function(t){switch(t.label){case 0:return[4,gt()];case 1:return[2,t.sent().some(function(t){return"visible"===t.visibilityState})]}})})},t.prototype.sendMessageToWindowClients_=function(i){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n,r=this;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return[4,gt()];case 1:return e=t.sent(),n=_t(a.PUSH_MSG_RECEIVED,i),[4,Promise.all(e.map(function(t){return r.attemptToMessageClient_(t,n)}))];case 2:return t.sent(),[2]}})})},t.prototype.getSWRegistration_=function(){return Object(f.__awaiter)(this,void 0,void 0,function(){return Object(f.__generator)(this,function(t){return[2,self.registration]})})},t.prototype.getPublicVapidKey_=function(){return Object(f.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(f.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=t.sent()))throw K.create(w);return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(n=t.sent())?[2,J]:[2,n]}})})},t}(dt);function gt(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function _t(t,e){return(n={})[i.TYPE_OF_MSG]=t,n[i.DATA]=e,n;var n}var vt=function(n){function t(t){var e=n.call(this,t)||this;return e.registrationToUse=null,e.publicVapidKeyToUse=null,e.manifestCheckPromise=null,e.messageObserver=null,e.tokenRefreshObserver=null,e.onMessageInternal=Object(u.createSubscribe)(function(t){e.messageObserver=t}),e.onTokenRefreshInternal=Object(u.createSubscribe)(function(t){e.tokenRefreshObserver=t}),e.setupSWMessageListener_(),e}return Object(f.__extends)(t,n),t.prototype.getToken=function(){var t=this;return this.isSupported_()?this.manifestCheck_().then(function(){return n.prototype.getToken.call(t)}):Promise.reject(K.create(m))},t.prototype.manifestCheck_=function(){if(this.manifestCheckPromise)return this.manifestCheckPromise;var t=document.querySelector('link[rel="manifest"]');return this.manifestCheckPromise=t?fetch(t.href).then(function(t){return t.json()}).catch(function(){}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw K.create(g)}):Promise.resolve(),this.manifestCheckPromise},t.prototype.requestPermission=function(){return Object(f.__awaiter)(this,void 0,void 0,function(){return Object(f.__generator)(this,function(t){return"granted"===Notification.permission?[2]:[2,new Promise(function(e,n){var t=function(t){return"granted"===t?e():n("denied"===t?K.create(v):K.create(_))},r=Notification.requestPermission(t);r&&r.then(t)})]})})},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw K.create(w);if(null!=this.registrationToUse)throw K.create(O);this.registrationToUse=t},t.prototype.usePublicVapidKey=function(t){if("string"!=typeof t)throw K.create(q);if(null!=this.publicVapidKeyToUse)throw K.create(X);var e=rt(t);if(65!==e.length)throw K.create(Q);this.publicVapidKeyToUse=e},t.prototype.onMessage=function(t,e,n){return"function"==typeof t?this.onMessageInternal(t,e,n):this.onMessageInternal(t)},t.prototype.onTokenRefresh=function(t,e,n){return"function"==typeof t?this.onTokenRefreshInternal(t,e,n):this.onTokenRefreshInternal(t)},t.prototype.waitForRegistrationToActivate_=function(r){var i=r.installing||r.waiting||r.active;return new Promise(function(t,e){if(i)if("activated"!==i.state)if("redundant"!==i.state){var n=function(){if("activated"===i.state)t(r);else{if("redundant"!==i.state)return;e(K.create(x))}i.removeEventListener("statechange",n)};i.addEventListener("statechange",n)}else e(K.create(x));else t(r);else e(K.create(V))})},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(t){throw K.create(b,{browserErrorMessage:t.message})}).then(function(t){return e.waitForRegistrationToActivate_(t).then(function(){return(e.registrationToUse=t).update(),t})}))},t.prototype.getPublicVapidKey_=function(){return this.publicVapidKeyToUse?Promise.resolve(this.publicVapidKeyToUse):Promise.resolve(J)},t.prototype.setupSWMessageListener_=function(){var r=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[i.TYPE_OF_MSG]){var e=t.data;switch(e[i.TYPE_OF_MSG]){case a.PUSH_MSG_RECEIVED:case a.NOTIFICATION_CLICKED:var n=e[i.DATA];r.messageObserver&&r.messageObserver.next(n)}}},!1)},t.prototype.isSupported_=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},t}(dt);function mt(t){var e={Messaging:vt};t.INTERNAL.registerService("messaging",function(t){return self&&"ServiceWorkerGlobalScope"in self?new ft(t):new vt(t)},e)}mt(c.default)},function(t,e,n){n(63)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"registerStorage",function(){return Ft});var l=n(7),r="https://firebasestorage.googleapis.com",a="https://firebasestorage.googleapis.com",s="/v0",i="/v0",v=function(){function t(t,e){this.code_=o(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return o(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),m={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function o(t){return"storage/"+t}function u(){return new v(m.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function c(){return new v(m.CANCELED,"User canceled the upload/download.")}function y(){return new v(m.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function d(t,e,n){return new v(m.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function h(){return new v(m.APP_DELETED,"The Firebase app was deleted.")}function p(t,e){return new v(m.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function f(t){throw new v(m.INTERNAL_ERROR,"Internal error: "+t)}var g={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function _(t){switch(t){case g.RAW:case g.BASE64:case g.BASE64URL:case g.DATA_URL:return;default:throw"Expected one of the event types: ["+g.RAW+", "+g.BASE64+", "+g.BASE64URL+", "+g.DATA_URL+"]."}}var b=function(t,e){this.data=t,this.contentType=e||null};function w(t,e){switch(t){case g.RAW:return new b(C(e));case g.BASE64:case g.BASE64URL:return new b(E(t,e));case g.DATA_URL:return new b((n=new x(e)).base64?E(g.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw p(g.DATA_URL,"Malformed data URL.")}return C(e)}(n.rest),new x(e).contentType)}var n;throw u()}function C(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function E(e,t){switch(e){case g.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw p(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case g.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw p(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw p(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var x=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw p(g.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)};var k,S,A={STATE_CHANGED:"state_changed"},P={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},T={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function I(t){switch(t){case P.RUNNING:case P.PAUSING:case P.CANCELING:return T.RUNNING;case P.PAUSED:return T.PAUSED;case P.SUCCESS:return T.SUCCESS;case P.CANCELED:return T.CANCELED;case P.ERROR:default:return T.ERROR}}function O(t,e){for(var n in t)r=t,i=n,Object.prototype.hasOwnProperty.call(r,i)&&e(n,t[n]);var r,i}function R(t){if(null==t)return{};var n={};return O(t,function(t,e){n[t]=e}),n}function N(t){return new Promise(t)}function D(t){return Promise.resolve(t)}function M(t){return null!=t}function L(t){return void 0!==t}function j(t){return"function"==typeof t}function F(t){return"object"==typeof t}function U(t){return"string"==typeof t||t instanceof String}function V(t){return W()&&t instanceof Blob}function W(){return"undefined"!=typeof Blob}(S=k||(k={}))[S.NO_ERROR=0]="NO_ERROR",S[S.NETWORK_ERROR=1]="NETWORK_ERROR",S[S.ABORT=2]="ABORT";var B=function(){function t(){var n=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=k.NO_ERROR,this.sendPromise_=N(function(e,t){n.xhr_.addEventListener("abort",function(t){n.errorCode_=k.ABORT,e(n)}),n.xhr_.addEventListener("error",function(t){n.errorCode_=k.NETWORK_ERROR,e(n)}),n.xhr_.addEventListener("load",function(t){e(n)})})}return t.prototype.send=function(t,e,n,r){var i=this;if(this.sent_)throw f("cannot .send() more than once");(this.sent_=!0,this.xhr_.open(e,t,!0),M(r))&&O(r,function(t,e){i.xhr_.setRequestHeader(t,e.toString())});return M(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw f("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw f("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw f("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){M(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){M(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),G=function(){function t(){}return t.prototype.createXhrIo=function(){return new B},t}();function H(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return F(n=e)&&!Array.isArray(n)?e:null}var Y=function(){function l(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(l.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),l.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},l.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},l.makeFromBucketSpec=function(e){var t,n;try{t=l.makeFromUrl(e)}catch(t){return new l(e,"")}if(""===t.path)return t;throw n=e,new v(m.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")},l.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-]+)";for(var r,i=[{regex:new RegExp("^gs://"+n+"(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],o=0;o<i.length;o++){var a=i[o],s=a.regex.exec(t);if(s){var u=s[a.indices.bucket],c=s[a.indices.path];c||(c=""),e=new l(u,c),a.postModify(e);break}}if(null==e)throw r=t,new v(m.INVALID_URL,"Invalid URL '"+r+"'.");return e},l}();function z(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function q(t){return r+s+t}function X(t){return r+i+t}function Q(t){var r=encodeURIComponent,i="?";return O(t,function(t,e){var n=r(t)+"="+r(e);i=i+n+"&"}),i=i.slice(0,-1)}function Z(t,e){return e}var K=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Z},J=null;function $(){if(J)return J;var t=[];t.push(new K("bucket")),t.push(new K("generation")),t.push(new K("metageneration")),t.push(new K("name","fullPath",!0));var e=new K("name");e.xform=function(t,e){return!U(n=e)||n.length<2?n:z(n=n);var n},t.push(e);var n=new K("size");return n.xform=function(t,e){return M(e)?+e:e},t.push(n),t.push(new K("timeCreated")),t.push(new K("updated")),t.push(new K("md5Hash",null,!0)),t.push(new K("cacheControl",null,!0)),t.push(new K("contentDisposition",null,!0)),t.push(new K("contentEncoding",null,!0)),t.push(new K("contentLanguage",null,!0)),t.push(new K("contentType",null,!0)),t.push(new K("metadata","customMetadata",!0)),t.push(new K("downloadTokens","downloadURLs",!1,function(i,t){if(!(U(t)&&0<t.length))return[];var o=encodeURIComponent;return t.split(",").map(function(t){var e=i.bucket,n=i.fullPath,r="/b/"+o(e)+"/o/"+o(n);return a+s+r+Q({alt:"media",token:t})})})),J=t}function tt(t,e,n){for(var r,i,o={type:"file"},a=n.length,s=0;s<a;s++){var u=n[s];o[u.local]=u.xform(o,e[u.server])}return r=o,i=t,Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,n=new Y(t,e);return i.makeStorageReference(n)}}),o}function et(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function nt(t){var e;if(!(t&&F(t)))throw"Expected Metadata object.";for(var n in t){var r=t[n];if("customMetadata"===n){if(!F(r))throw"Expected object for 'customMetadata' mapping."}else if(F(e=r)&&null!==e)throw"Mapping for '"+n+"' cannot be an object."}}function rt(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}var a,s,u,c,l,h;if(!(r<=n.length&&n.length<=i))throw a=r,s=i,u=e,c=n.length,a===s?h=1===(l=a)?"argument":"arguments":(l="between "+a+" and "+s,h="arguments"),new v(m.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+u+"`: Expected "+l+" "+h+", received "+c+".");for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?d(o,e,t.message):d(o,e,t)}}var it=function(e,t){var n=this;this.validator=function(t){n.optional&&!L(t)||e(t)},this.optional=!!t};function ot(t,e){function n(t){if(!U(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new it(r,e)}function at(t){return new it(nt,t)}function st(){return new it(function(t){var e;if(!(("number"==typeof(e=t)||e instanceof Number)&&0<=t))throw"Expected a number 0 or greater."})}function ut(e,t){return new it(function(t){if(!(null===t||M(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function ct(t){return new it(function(t){if(null!==t&&!j(t))throw"Expected a Function."},t)}function lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(W())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var ht=function(){function s(t,e){var n=0,r="";V(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return s.prototype.size=function(){return this.size_},s.prototype.type=function(){return this.type_},s.prototype.slice=function(t,e){if(V(this.data_)){var n=this.data_,r=(o=t,a=e,(i=n).webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new s(r)}var i,o,a;return new s(new Uint8Array(this.data_.buffer,t,e-t),!0)},s.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(W()){var n=t.map(function(t){return t instanceof s?t.data_:t});return new s(lt.apply(null,n))}var r=t.map(function(t){return U(t)?w(g.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),a=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[a++]=t[e]}),new s(o,!0)},s.prototype.uploadData=function(){return this.data_},s}();function dt(t,e){return-1!==t.indexOf(e)}var pt=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function ft(t){if(!t)throw u()}function gt(a,s){return function(t,e){var n,r,i,o=(n=a,r=s,null===(i=H(e))?null:tt(n,i,r));return ft(null!==o),o}}function _t(o){return function(t,e){var n,r,i;return 401===t.getStatus()?n=new v(m.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=o.bucket,n=new v(m.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=o.path,n=new v(m.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):n=e,n.setServerResponseProp(e.serverResponseProp()),n}}function vt(i){var o=_t(i);return function(t,e){var n,r=o(t,e);return 404===t.getStatus()&&(n=i.path,r=new v(m.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),r.setServerResponseProp(e.serverResponseProp()),r}}function mt(t,e,n){var r=q(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new pt(r,"GET",gt(t,n),i);return o.errorHandler=vt(e),o}function yt(t,e,n){var r,i,o=R(n);return o.fullPath=t.path,o.size=e.size(),o.contentType||(o.contentType=(i=e,(r=null)&&r.contentType||i&&i.type()||"application/octet-stream")),o}var bt=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function wt(t,e){var n;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){ft(!1)}return ft(dt(e||["active"],n)),n}function Ct(t,a,e,s,n,u,r,i){var c=new bt(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=s.size()),s.size()!==c.total)throw new v(m.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,l=o;0<n&&(l=Math.min(l,n));var h=c.current,d=h+l,p={"X-Goog-Upload-Command":l===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},f=s.slice(h,d);if(null===f)throw y();var g=a.maxUploadRetryTime(),_=new pt(e,"POST",function(t,e){var n,r=wt(t,["active","final"]),i=c.current+l,o=s.size();return n="final"===r?gt(a,u)(t,e):null,new bt(i,o,"final"===r,n)},g);return _.headers=p,_.body=f.uploadData(),_.progressCallback=i||null,_.errorHandler=_t(t),_}var Et=function(t,e,n){if(j(t)||M(e)||M(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},xt=function(){function t(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}return Object.defineProperty(t.prototype,"downloadURL",{get:function(){if(null!==this.metadata){var t=this.metadata.downloadURLs;return null!=t&&null!=t[0]?t[0]:null}return null},enumerable:!0,configurable:!0}),t}();function kt(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];D(!0).then(function(){n.apply(null,t)})}}var St=function(){function t(t,e,n,r,i,o){void 0===o&&(o=null);var a=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=P.RUNNING,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(m.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(P.ERROR))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(m.CANCELED)?a.completeTransitions_():(a.error_=t,a.transition_(P.ERROR))},this.promise_=N(function(t,e){a.resolve_=t,a.reject_=e,a.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var n=this,r=this.transferred_;return function(t,e){n.updateProgress_(r+t)}},t.prototype.shouldDoResumable_=function(t){return 262144<t.size()},t.prototype.start_=function(){this.state_===P.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(e){var n=this;this.authWrapper_.getAuthToken().then(function(t){switch(n.state_){case P.RUNNING:e(t);break;case P.CANCELING:n.transition_(P.CANCELED);break;case P.PAUSING:n.transition_(P.PAUSED)}})},t.prototype.createResumable_=function(){var _=this;this.resolveToken_(function(t){var e,n,r,i,o,a,s,u,c,l,h,d,p,f=(e=_.authWrapper_,n=_.location_,r=_.mappings_,i=_.blob_,o=_.metadata_,a=n.bucketOnlyServerUrl(),s=yt(n,i,o),u={name:s.fullPath},c=X(a),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=et(s,r),d=e.maxUploadRetryTime(),(p=new pt(c,"POST",function(t,e){var n;wt(t);try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){ft(!1)}return ft(U(n)),n},d)).urlParams=u,p.headers=l,p.body=h,p.errorHandler=_t(n),p),g=_.authWrapper_.makeRequest(f,t);(_.request_=g).getPromise().then(function(t){_.request_=null,_.uploadUrl_=t,_.needToFetchStatus_=!1,_.completeTransitions_()},_.errorHandler_)})},t.prototype.fetchStatus_=function(){var c=this,l=this.uploadUrl_;this.resolveToken_(function(t){var e,n,r,o,i,a,s=(e=c.authWrapper_,n=c.location_,r=l,o=c.blob_,i=e.maxUploadRetryTime(),(a=new pt(r,"POST",function(t,e){var n,r=wt(t,["active","final"]);try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){ft(!1)}var i=parseInt(n,10);return ft(!isNaN(i)),new bt(i,o.size(),"final"===r)},i)).headers={"X-Goog-Upload-Command":"query"},a.errorHandler=_t(n),a),u=c.authWrapper_.makeRequest(s,t);(c.request_=u).getPromise().then(function(t){t=t,c.request_=null,c.updateProgress_(t.current),c.needToFetchStatus_=!1,t.finalized&&(c.needToFetchMetadata_=!0),c.completeTransitions_()},c.errorHandler_)})},t.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new bt(this.transferred_,this.blob_.size()),a=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=Ct(r.location_,r.authWrapper_,a,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(P.ERROR)}var n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(P.SUCCESS)):r.completeTransitions_()},r.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=mt(r.authWrapper_,r.location_,r.mappings_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(P.SUCCESS)},r.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=yt(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+et(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=ht.getBlob(c,r,l);if(null===h)throw y();var d={name:u.fullPath},p=X(o),f=t.maxUploadRetryTime(),g=new pt(p,"POST",gt(t,n),f);return g.urlParams=d,g.headers=a,g.body=h.uploadData(),g.errorHandler=_t(e),g}(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(P.SUCCESS)},r.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case P.CANCELING:case P.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case P.RUNNING:var e=this.state_===P.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case P.PAUSED:this.state_=t,this.notifyObservers_();break;case P.CANCELED:this.error_=c(),this.state_=t,this.notifyObservers_();break;case P.ERROR:case P.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case P.PAUSING:this.transition_(P.PAUSED);break;case P.CANCELING:this.transition_(P.CANCELED);break;case P.RUNNING:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=I(this.state_);return new xt(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(e,t,n,o){void 0===t&&(t=void 0),void 0===n&&(n=void 0),void 0===o&&(o=void 0);var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=ct(!0).validator,a=ut(null,!0).validator;function s(t){try{return void i(t)}catch(t){}try{if(a(t),!(L(t.next)||L(t.error)||L(t.complete)))throw"";return}catch(t){throw r}}rt("on",[ot(function(t){if(e!==A.STATE_CHANGED)throw"Expected one of the event types: ["+A.STATE_CHANGED+"]."}),ut(s,!0),ct(!0),ct(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&rt("on",i,arguments);var r=new Et(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var l=[ut(function(t){if(null===t)throw r;s(t)}),ct(!0),ct(!0)];return!(L(t)||L(n)||L(o))?c(l):c(null)(t,n,o)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e,n,r;e=this.observers_,n=t,-1!==(r=e.indexOf(n))&&e.splice(r,1)},t.prototype.notifyObservers_=function(){var t,e=this;this.finishPromise_(),(t=this.observers_,Array.prototype.slice.call(t)).forEach(function(t){e.notifyObserver_(t)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(I(this.state_)){case T.SUCCESS:kt(this.resolve_.bind(null,this.snapshot))();break;case T.CANCELED:case T.ERROR:kt(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(I(this.state_)){case T.RUNNING:case T.PAUSED:null!==t.next&&kt(t.next.bind(t,this.snapshot))();break;case T.SUCCESS:null!==t.complete&&kt(t.complete.bind(t))();break;case T.CANCELED:case T.ERROR:null!==t.error&&kt(t.error.bind(t,this.error_))();break;default:null!==t.error&&kt(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){rt("resume",[],arguments);var t=this.state_===P.PAUSED||this.state_===P.PAUSING;return t&&this.transition_(P.RUNNING),t},t.prototype.pause=function(){rt("pause",[],arguments);var t=this.state_===P.RUNNING;return t&&this.transition_(P.PAUSING),t},t.prototype.cancel=function(){rt("cancel",[],arguments);var t=this.state_===P.RUNNING||this.state_===P.PAUSING;return t&&this.transition_(P.CANCELING),t},t}(),At=function(){function n(t,e){this.authWrapper=t,this.location=e instanceof Y?e:Y.makeFromUrl(e)}return n.prototype.toString=function(){return rt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},n.prototype.newRef=function(t,e){return new n(t,e)},n.prototype.mappings=function(){return $()},n.prototype.child=function(t){rt("child",[ot()],arguments);var e,n,r=(e=this.location.path,n=t.split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?n:e+"/"+n),i=new Y(this.location.bucket,r);return this.newRef(this.authWrapper,i)},Object.defineProperty(n.prototype,"parent",{get:function(){var t=function(t){if(0==t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Y(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){var t=new Y(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return z(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),n.prototype.put=function(t,e){return void 0===e&&(e=null),rt("put",[new it(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||W()&&t instanceof Blob))throw"Expected Blob or File."}),at(!0)],arguments),this.throwIfRoot_("put"),new St(this,this.authWrapper,this.location,this.mappings(),new ht(t),e)},n.prototype.putString=function(t,e,n){void 0===e&&(e=g.RAW),rt("putString",[ot(),ot(_,!0),at(!0)],arguments),this.throwIfRoot_("putString");var r=w(e,t),i=R(n);return!M(i.contentType)&&M(r.contentType)&&(i.contentType=r.contentType),new St(this,this.authWrapper,this.location,this.mappings(),new ht(r.data,!0),i)},n.prototype.delete=function(){rt("delete",[],arguments),this.throwIfRoot_("delete");var s=this;return this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,a=(e=s.authWrapper,n=s.location,r=q(n.fullServerUrl()),i=e.maxOperationRetryTime(),(o=new pt(r,"DELETE",function(t,e){},i)).successCodes=[200,204],o.errorHandler=vt(n),o);return s.authWrapper.makeRequest(a,t).getPromise()})},n.prototype.getMetadata=function(){rt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var n=this;return this.authWrapper.getAuthToken().then(function(t){var e=mt(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise()})},n.prototype.updateMetadata=function(l){rt("updateMetadata",[at()],arguments),this.throwIfRoot_("updateMetadata");var h=this;return this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,a,s,u,c=(e=h.authWrapper,n=h.location,r=l,i=h.mappings(),o=q(n.fullServerUrl()),a=et(r,i),s=e.maxOperationRetryTime(),(u=new pt(o,"PATCH",gt(e,i),s)).headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=vt(n),u);return h.authWrapper.makeRequest(c,t).getPromise()})},n.prototype.getDownloadURL=function(){return rt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.getMetadata().then(function(t){var e=t.downloadURLs[0];if(M(e))return e;throw new v(m.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")})},n.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw e=t,new v(m.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').");var e},n}(),Pt=function(){function t(t){var e;this.promise_=(e=t,Promise.reject(e))}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}(),Tt=function(){function t(){this.map_={},this.id_=-9007199254740991}return t.prototype.addRequest=function(t){var e=this.id_;this.id_++,this.map_[e]=t;var n=this;function r(){delete n.map_[e]}t.getPromise().then(r,r)},t.prototype.clear=function(){O(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}(),It=function(){function a(t,e,n,r,i){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var o=this.app_.options;M(o)&&(this.bucket_=a.extractBucket_(o))}this.storageRefMaker_=e,this.requestMaker_=n,this.pool_=i,this.service_=r,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e4,this.requestMap_=new Tt}return a.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:Y.makeFromBucketSpec(e).bucket},a.prototype.getAuthToken=function(){return null!==this.app_&&M(this.app_.INTERNAL)&&M(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):D(null)},a.prototype.bucket=function(){if(this.deleted_)throw h();return this.bucket_},a.prototype.service=function(){return this.service_},a.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},a.prototype.makeRequest=function(t,e){if(this.deleted_)return new Pt(h());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},a.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},a.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},a.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},a.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},a.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},a}();var Ot=function(){function t(t,e,n,r,i,o,a,s,u,c,l){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l;var h=this;this.promise_=N(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var s=this;function t(t,e){var n,r=s.resolve_,i=s.reject_,o=e.xhr;if(e.wasSuccessCode)try{var a=s.callback_(o,o.getResponseText());L(a)?r(a):r()}catch(t){i(t)}else null!==o?((n=u()).setServerResponseProp(o.getResponseText()),s.errorCallback_?i(s.errorCallback_(o,n)):i(n)):e.canceled?i(n=s.appDelete_?h():c()):i(n=new v(m.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new Rt(!1,null,!0)):this.backoffId_=function(e,t,n){var i=1,r=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){u||(u=!0,t.apply(null,arguments))}function l(t){r=setTimeout(function(){r=null,e(h,s())},t)}function h(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];u||(t?c.apply(null,arguments):s()||o?c.apply(null,arguments):(i<64&&(i*=2),1===a?(a=2,e=0):e=1e3*(i+Math.random()),l(e)))}var d=!1;function p(t){d||(d=!0,u||(null!==r?(t||(a=2),clearTimeout(r),l(0)):t||(a=1)))}return l(0),setTimeout(function(){p(o=!0)},n),p}(function(o,t){if(t)o(!1,new Rt(!1,null,!0));else{var e=s.pool_.createXhrIo();s.pendingXhr_=e,null!==s.progressCallback_&&e.addUploadProgressListener(a),e.send(s.url_,s.method_,s.body_,s.headers_).then(function(t){null!==s.progressCallback_&&t.removeUploadProgressListener(a),s.pendingXhr_=null;var e=(t=t).getErrorCode()===k.NO_ERROR,n=t.getStatus();if(e&&!s.isRetryStatusCode_(n)){var r=dt(s.successCodes_,n);o(!0,new Rt(r,t))}else{var i=t.getErrorCode()===k.ABORT;o(!1,new Rt(!1,null,i))}})}function a(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==s.progressCallback_&&s.progressCallback_(e,n)}},t,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=dt([408,429],t),r=dt(this.additionalRetryCodes_,t);return e||n||r},t}(),Rt=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function Nt(t,e,n){var r,i,o,a,s=Q(t.urlParams),u=t.url+s,c=R(t.headers);return r=c,null!==(i=e)&&0<i.length&&(r.Authorization="Firebase "+i),o=c,a=void 0!==l.default?l.default.SDK_VERSION:"AppManager",o["X-Firebase-Storage-Version"]="webjs/"+a,new Ot(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var Dt=function(){function t(t,e,n){if(this.bucket_=null,this.authWrapper_=new It(t,function(t,e){return new At(t,e)},Nt,this,e),this.app_=t,null!=n)this.bucket_=Y.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new Y(r,""))}this.internals_=new Mt(this)}return t.prototype.ref=function(t){if(rt("ref",[ot(function(t){if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new At(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){return rt("refFromURL",[ot(function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{Y.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new At(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){rt("setMaxUploadRetryTime",[st()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){rt("setMaxOperationRetryTime",[st()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Mt=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),D(void 0)},t}(),Lt="storage";function jt(t,e,n){return new Dt(t,new G,n)}function Ft(t){var e={TaskState:T,TaskEvent:A,StringFormat:g,Storage:Dt,Reference:At};t.INTERNAL.registerService(Lt,jt,e,void 0,!0)}Ft(l.default)}])});